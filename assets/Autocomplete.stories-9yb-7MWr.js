import{j as b}from"./jsx-runtime-DEdD30eg.js";import{r as o}from"./index-RYns6xqu.js";import{c as y}from"./index-Bb4qSo10.js";import{f as A}from"./index-DIYUg_6P.js";import"./bundle-mjs-Dnoi3Axr.js";const j=({options:s,inputRef:l,wrapperRef:u,onChange:i})=>{const[t,r]=o.useState(()=>s??[]),[n,d]=o.useState(!1),[p,a]=o.useState("");o.useEffect(()=>{var m;const e=new AbortController;return(m=l.current)==null||m.addEventListener("focus",()=>d(!0),{signal:e.signal}),()=>{e.abort()}},[l]),o.useEffect(()=>{const e=new AbortController,m=c=>{var x;c.key==="Escape"&&(d(!1),(x=l.current)==null||x.blur())},v=c=>{var x;(x=u.current)!=null&&x.contains(c.target)||d(!1)};return document.addEventListener("keydown",m,{signal:e.signal}),document.addEventListener("mousedown",v,{signal:e.signal}),()=>{e.abort()}},[l,u]),o.useEffect(()=>{var m;const e=new AbortController;return(m=u.current)==null||m.addEventListener("focusout",v=>{var c;(c=u.current)!=null&&c.contains(v.relatedTarget)||d(!1)},{signal:e.signal}),()=>{e.abort()}},[u]);const f=o.useCallback(e=>{if(e.length===0)r(s);else{const m=s.map(({value:c})=>c),v=A(m,e).map(c=>({value:c}));r(v)}},[s]),g=o.useCallback(e=>{a(e.target.value),f(e.target.value),i==null||i(e.target.value)},[f,i]),h=o.useCallback(e=>{a(e),f(e),i==null||i(e),d(!1)},[f,i]);return{inputRef:l,newOptions:t,showOptions:n,value:p,handleChange:g,handleSelectValue:h}},L=({ulRef:s,inputRef:l,wrapperRef:u,options:i})=>{const t=o.useRef(0);o.useEffect(()=>{var a,f;const r=((a=s.current)==null?void 0:a.querySelectorAll("li"))??[],n=new AbortController,d=()=>{t.current<r.length-1?(t.current=t.current+1,r[t.current].focus()):(t.current=0,r[0].focus())},p=()=>{var g;t.current>0?(t.current=t.current-1,r[t.current].focus()):(t.current=0,(g=l.current)==null||g.focus())};return(f=s.current)==null||f.addEventListener("keydown",g=>{var h;switch(g.preventDefault(),g.key){case"ArrowDown":{d();break}case"Tab":{g.shiftKey?p():d();break}case"ArrowUp":{t.current===0?(h=l.current)==null||h.focus():p();break}case"Enter":{const e=r[t.current].querySelector("button");e==null||e.click();break}}},{signal:n.signal}),()=>{n.abort()}},[l,s,i,t]),o.useEffect(()=>{var n;const r=new AbortController;return(n=l.current)==null||n.addEventListener("keydown",d=>{var p;if(d.key==="ArrowDown"){const a=(p=s.current)==null?void 0:p.querySelector("li");a&&a.focus()}},{signal:r.signal}),()=>{r.abort()}},[l,s,i]),o.useEffect(()=>{var n;const r=new AbortController;return(n=u.current)==null||n.addEventListener("mouseenter",()=>{var p;(((p=s.current)==null?void 0:p.querySelectorAll("li"))??[]).forEach(a=>a.blur())},{signal:r.signal}),()=>{r.abort()}},[s,u])},q=y(["max-h-[250px]","overflow-y-auto"],{variants:{variant:{default:"bg-white"},theme:{kubefirst:"",konstruct:"",colony:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),S=y(["p-1","text-center","w-full block","bg-white"],{variants:{variant:{default:""},theme:{kubefirst:"",konstruct:"",colony:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),C=y(["focus-visible:outline-none"],{variants:{variant:{default:""},theme:{kubefirst:"",konstruct:"",colony:""}},defaultVariants:{variant:"default",theme:"kubefirst"},compoundVariants:[{theme:"konstruct",class:["focus:bg-orange-100","hover:bg-orange-100"]},{theme:"kubefirst",class:["focus:bg-purple-100","hover:bg-purple-100"]},{theme:"colony",class:["focus:bg-red-100","hover:bg-red-100"]}]}),T=y(["cursor-pointer","focus-visible:outline-none","px-3","py-1.5","w-full","text-left"],{variants:{variant:{default:""},theme:{kubefirst:"",konstruct:"",colony:""}},defaultVariants:{variant:"default",theme:"kubefirst"},compoundVariants:[{theme:"konstruct",class:["focus:bg-orange-100","hover:bg-orange-100"]},{theme:"kubefirst",class:["focus:bg-purple-100","hover:bg-purple-100"]},{theme:"colony",class:["focus:bg-red-100","hover:bg-red-100"]}]}),V=({className:s,inputRef:l,options:u,placeholder:i,placeholderClassName:t,variant:r,theme:n,wrapperRef:d,onClick:p})=>{const a=o.useRef(null);return L({ulRef:a,inputRef:l,wrapperRef:d,options:u}),u.length===0?b.jsx("span",{className:S({theme:n,variant:r,className:t}),children:i}):b.jsx("ul",{ref:a,role:"listbox",className:q({variant:r,theme:n,className:s}),children:u.map(({value:f})=>b.jsx("li",{role:"option",tabIndex:0,className:C({theme:n,variant:r}),children:b.jsx("button",{type:"button",role:"button",className:T({theme:n,variant:r}),onClick:()=>p(f),children:f})},f))})};V.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},inputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLInputElement"}],raw:"RefObject<HTMLInputElement>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLDivElement"}],raw:"RefObject<HTMLDivElement>"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},placeholderClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["VariantProps"]};const I=y(["flex","w-full","rounded-md","border","border-zinc-200","bg-transparent","text-base","text-zinc-700","transition-colors","placeholder:text-muted-foreground","focus-visible:outline-none","focus-visible:ring-1","focus-visible:ring-ring","disabled:cursor-not-allowed","disabled:opacity-50","shadow-sm","py-1","px-2"],{variants:{variant:{default:""},theme:{kubefirst:"",konstruct:"",colony:""}},compoundVariants:[{theme:"kubefirst",class:["focus:ring-kubefirst-purple-light"]},{theme:"konstruct",class:["focus:focus:ring-orange-400"]},{theme:"colony",class:["focus:focus:ring-red-400"]}],defaultVariants:{theme:"kubefirst",variant:"default"}}),H=y(["pl-1","mb-2","text-base","cursor-pointer"],{variants:{variant:{default:""},theme:{kubefirst:"",konstruct:"",colony:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),k=o.forwardRef(({autoComplete:s="off",className:l,label:u,labelClassName:i,name:t,options:r,placeHolderEmptyValues:n="No values...",placeHolderEmptyValuesClassName:d,placeholder:p,theme:a,variant:f,onChange:g},h)=>{const e=o.useRef(null),m=o.useRef(null),v=o.useId();o.useImperativeHandle(h,()=>m.current,[m]);const c=j({options:r,inputRef:m,wrapperRef:e,onChange:g});return b.jsxs("div",{ref:e,className:"relative flex flex-col",children:[u?b.jsx("label",{htmlFor:t??v,className:H({theme:a,variant:f,className:i}),children:u}):null,b.jsx("input",{ref:m,id:t??v,type:"text",name:t,role:"combobox",autoComplete:s,className:I({theme:a,variant:f,className:l}),onChange:c.handleChange,value:c.value,placeholder:p}),c.showOptions&&b.jsx("div",{className:"absolute z-10 top-full w-full rounded-md mt-1 border shadow-sm",children:b.jsx(V,{className:l,inputRef:m,wrapperRef:e,options:c.newOptions,placeholder:n,placeholderClassName:d,variant:f,theme:a,onClick:c.handleSelectValue})})]})});k.displayName="Autocomplete";k.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{autoComplete:{defaultValue:{value:"'off'",computed:!1},required:!1},placeHolderEmptyValues:{defaultValue:{value:"'No values...'",computed:!1},required:!1}}};const F={component:k},w={args:{placeholder:"Search...",options:[{value:"Option 1"},{value:"Option 2"},{value:"Option 3"},{value:"Option 4"},{value:"Option 5"},{value:"Option 6"}]},render:s=>b.jsxs("div",{className:"w-[350px] flex flex-col gap-3",children:[b.jsx(k,{label:"Kubefirst colors",...s}),b.jsx(k,{label:"Konstruct colors",theme:"konstruct",...s}),b.jsx(k,{label:"Colony colors",theme:"colony",...s})]})};var O,E,N;w.parameters={...w.parameters,docs:{...(O=w.parameters)==null?void 0:O.docs,source:{originalSource:`{
  args: {
    placeholder: 'Search...',
    options: [{
      value: 'Option 1'
    }, {
      value: 'Option 2'
    }, {
      value: 'Option 3'
    }, {
      value: 'Option 4'
    }, {
      value: 'Option 5'
    }, {
      value: 'Option 6'
    }]
  },
  render: args => <div className="w-[350px] flex flex-col gap-3">
      <AutocompleteComponent label="Kubefirst colors" {...args} />
      <AutocompleteComponent label="Konstruct colors" theme="konstruct" {...args} />
      <AutocompleteComponent label="Colony colors" theme="colony" {...args} />
    </div>
}`,...(N=(E=w.parameters)==null?void 0:E.docs)==null?void 0:N.source}}};const B=["Autocomplete"];export{w as Autocomplete,B as __namedExportsOrder,F as default};
