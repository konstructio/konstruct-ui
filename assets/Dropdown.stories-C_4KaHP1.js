import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{r}from"./index-CDlOlYQx.js";import{u as Q}from"./useToggle-BALwLbl6.js";import{L as X}from"./Loading-CZh88sfR.js";import{T as j}from"./Typography-uPknD8VA.js";import{c as R,a as b}from"./index-DJQVxuCM.js";import{C as Y}from"./chevron-up-UzVUTr3-.js";import"./createLucideIcon-Ct27RUP0.js";import"./index-4AoDZzVP.js";import"./index-_3p-ol44.js";const U=r.createContext({isOpen:!1,toggleOpen(){throw new Error("toggleOpen function must be overridden")},value:void 0,setValue(){throw new Error("setValue function must be overridden")}}),k=()=>{const o=r.useContext(U);if(!o)throw new Error("useDropdownContext must be used within a DropdownProvider");return o},$=({children:o,onChange:i,value:n,name:e})=>{const[a,d]=Q(!1),m=r.useCallback(l=>{i==null||i({target:{value:l,name:e??""}})},[i,e]);return s.jsx(U.Provider,{value:{value:n,isOpen:a,setValue:m,toggleOpen:d},children:o})};$.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{onChange:{required:!1,tsType:{name:"DropdownProps['onChange']",raw:"DropdownProps['onChange']"},description:""},value:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""}}};const Z=({ulRef:o,wrapperRef:i,wrapperInputRef:n})=>{const e=r.useRef(0),{isOpen:a}=k();r.useEffect(()=>{var c,p;const d=((c=o.current)==null?void 0:c.querySelectorAll("li"))??[],m=new AbortController,l=()=>{e.current<d.length-1?(e.current=e.current+1,d[e.current].focus()):(e.current=0,d[0].focus())},t=()=>{var u;e.current>0?(e.current=e.current-1,d[e.current].focus()):(e.current=0,(u=n.current)==null||u.focus())};return(p=o.current)==null||p.addEventListener("keydown",u=>{var g;switch(u.preventDefault(),u.key){case"ArrowDown":{l();break}case"Tab":{u.shiftKey?t():l();break}case"ArrowUp":{e.current===0?(g=n.current)==null||g.focus():t();break}case"Enter":{const w=d[e.current].querySelector("button");w==null||w.click();break}}},{signal:m.signal}),()=>{m.abort()}},[o,e,n]),r.useEffect(()=>{var m;const d=new AbortController;return(m=i.current)==null||m.addEventListener("mouseenter",()=>{var t;(((t=o.current)==null?void 0:t.querySelectorAll("li"))??[]).forEach(c=>c.blur())},{signal:d.signal}),()=>{d.abort()}},[o,i]),r.useEffect(()=>{a||(e.current=0)},[a])},ee=R(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3","hover:bg-slate-50","focus:bg-slate-50","colony:focus:bg-red-100","colony:hover:bg-red-100"]),T=({isClickable:o,className:i,...n})=>{const{setValue:e,toggleOpen:a}=k(),d=r.useRef(null),m=r.useCallback(t=>{e(t.value),a(!1)},[e,a]),l=r.useCallback((t,c)=>{t.key==="Enter"&&m(c)},[m]);return s.jsxs("li",{ref:d,role:"option",className:b(ee({className:i})),tabIndex:0,onClick:()=>o&&m(n),onKeyDown:t=>l(t,n),children:[n.leftIcon?s.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:n.leftIcon}):null,s.jsx(j,{variant:"body2",className:"text-zinc-700",children:n.label})]})};T.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},isClickable:{required:!0,tsType:{name:"boolean"},description:""}}};const re=R(["absolute","bg-white","border","duration-100","ease-in-out","flex-col","mt-1","overflow-hidden","rounded-md","shadow-2xs","top-full","transition-all","w-full","z-10","max-h-[185px]","overflow-y-auto","border-gray-200","text-zinc-700","data-[state=open]:flex","data-[state=closed]:hidden"]),F=r.forwardRef(({className:o,isLoading:i,itemClassName:n,name:e,options:a,wrapperInputRef:d,wrapperRef:m},l)=>{const t=r.useRef(null),{isOpen:c}=k();r.useImperativeHandle(l,()=>t.current,[t]),Z({ulRef:t,wrapperRef:m,wrapperInputRef:d});const p=a.length===0;return s.jsx("ul",{ref:t,title:e,role:"listbox",className:b(re({className:o})),"data-state":c?"open":"closed",children:i?s.jsx(T,{className:n,isClickable:!1,value:"Loading...",label:"Loading..."}):p?s.jsx(T,{className:n,isClickable:!1,value:"No options",label:"No options"}):a.map(u=>s.jsx(T,{className:n,isClickable:!0,...u},u.value))})});F.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},itemClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!0,tsType:{name:"boolean"},description:""},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const ne=R(["border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none","h-9","border-gray-200","aria-expanded:border-kubefirst-primary","aria-expanded:text-kubefirst-secondary","focus-visible:bg-zinc-50","colony:aria-expanded:border-red-400","colony:aria-expanded:text-red-400","colony:focus-visible:bg-red-100"]),te=R(["mb-1","cursor-pointer","text-[14px]","leading-[20px]","tracking-[0.1px]"]),ae=({ulRef:o})=>{const i=r.useRef(null),n=r.useRef(null),{isOpen:e,toggleOpen:a}=k();r.useEffect(()=>{var p;const l=new AbortController,t=u=>{u.key==="Escape"&&a(!1)},c=u=>{var g;(g=i.current)!=null&&g.contains(u.target)||a(!1)};return document.addEventListener("keydown",t,{signal:l.signal}),document.addEventListener("mousedown",c,{signal:l.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&a(!1)},{signal:l.signal}),(p=n.current)==null||p.addEventListener("focus",()=>{a(!0)},{signal:l.signal}),()=>{l.abort()}},[a,i]),r.useEffect(()=>{var t;const l=new AbortController;return(t=n.current)==null||t.addEventListener("keydown",c=>{var p;if(c.key==="ArrowDown"){const u=(p=o.current)==null?void 0:p.querySelector("li");u&&u.focus()}},{signal:l.signal}),()=>{l.abort()}},[n,o]);const d=r.useCallback(()=>a(!0),[a]),m=r.useCallback(()=>{e||a(!1)},[e,a]);return{wrapperRef:i,wrapperInputRef:n,handleOpen:d,handleOpenIfClosed:m}},H=r.forwardRef(({className:o,defaultValue:i,iconClassName:n,isLoading:e,label:a,labelClassName:d,listClassName:m,listItemClassName:l,name:t,options:c,placeholder:p,required:u,theme:g,wrapperClassName:w},W)=>{const E=r.useId(),x=r.useRef(null),O=r.useRef(null),{wrapperRef:h,wrapperInputRef:L,handleOpen:B,handleOpenIfClosed:M}=ae({ulRef:O}),{isOpen:D,toggleOpen:S,value:v,setValue:A}=k(),N=t?`${E}-${t}`:E;r.useImperativeHandle(W,()=>x.current,[x]);const f=r.useMemo(()=>c.find(({value:y})=>y===v),[c,v]);r.useEffect(()=>{x.current&&(x.current.value=v?f==null?void 0:f.value:"")},[f,v]),r.useEffect(()=>{if(i&&!v){const y=c&&c.find(q=>q.value===i);y&&A(y.value)}},[i,c,A,v]),r.useEffect(()=>{var q;const y=new AbortController;return(q=h.current)==null||q.addEventListener("focusout",J=>{var K;const _=J.relatedTarget;(!_||!((K=h.current)!=null&&K.contains(_)))&&S(!1)}),()=>{y.abort()}},[S,h]);const G=()=>f!=null&&f.leftIcon?s.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:f.leftIcon}):null;return s.jsxs("div",{ref:h,className:b("flex flex-col w-full relative",w),"data-theme":g,children:[a?s.jsxs("label",{id:N,className:b(te({className:d})),htmlFor:N,onClick:M,children:[a,u?s.jsx("span",{className:"text-red-500 ml-1",children:"*"}):null]}):null,s.jsxs("div",{ref:L,id:N,className:b(ne({className:o})),role:"combobox",onClick:B,"aria-expanded":D,tabIndex:0,"aria-labelledby":N,children:[v?s.jsxs(j,{variant:"body2",className:"flex gap-3 items-center text-zinc-700 text-base",children:[G(),f==null?void 0:f.label]}):s.jsx(j,{variant:"body2",className:"flex gap-3 items-center text-zinc-700 text-base",children:p}),e?s.jsx(X,{className:"w-4 h-4 text-zinc-500"}):s.jsx(Y,{"data-state":D?"open":"closed",className:b("w-4 h-4 text-zinc-500 transition-all duration-50 data-[state=open]:rotate-0 data-[state=closed]:rotate-180",n)})]}),s.jsx("input",{ref:x,type:"text",name:t,className:"hidden","aria-hidden":"true",required:u}),s.jsx(F,{ref:O,className:m,itemClassName:l,name:t,wrapperRef:h,wrapperInputRef:L,options:c,isLoading:!!e})]})});H.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{className:{required:!1,tsType:{name:"string"},description:""},iconClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'colony'
| 'civo'
| 'kubefirst-dark'
| 'colony-dark'
| 'civo-dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'colony'"},{name:"literal",value:"'civo'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'colony-dark'"},{name:"literal",value:"'civo-dark'"},{name:"undefined"}]},description:""},value:{required:!1,tsType:{name:"string"},description:""},wrapperClassName:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { target: { value: string; name: string } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: string; name: string } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""}},composes:["VariantProps","Omit"]};const I=r.forwardRef(({onChange:o,value:i,name:n,...e},a)=>s.jsx($,{onChange:o,value:i,name:n,children:s.jsx(H,{name:n,ref:a,...e})}));I.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{className:{required:!1,tsType:{name:"string"},description:""},iconClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'colony'
| 'civo'
| 'kubefirst-dark'
| 'colony-dark'
| 'civo-dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'colony'"},{name:"literal",value:"'civo'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'colony-dark'"},{name:"literal",value:"'civo-dark'"},{name:"undefined"}]},description:""},value:{required:!1,tsType:{name:"string"},description:""},wrapperClassName:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { target: { value: string; name: string } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: string; name: string } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""}},composes:["VariantProps","Omit"]};const ge={title:"In Review/Dropdown",component:I},C={args:{options:[{label:"Talos",value:"talos",leftIcon:s.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:s.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option...",required:!1,labelClassName:"",isLoading:!1,theme:"kubefirst",name:"dropdown"},render:o=>{const[i,n]=r.useState();return s.jsx("div",{className:"max-w-[350px]",children:s.jsx(I,{label:"Dropdown with Kubefirst theme",onChange:({target:{value:e}})=>n(e),value:i,...o})})}};var z,P,V;C.parameters={...C.parameters,docs:{...(z=C.parameters)==null?void 0:z.docs,source:{originalSource:`{
  args: {
    options: [{
      label: 'Talos',
      value: 'talos',
      leftIcon: <img src="./talos.svg" alt="Talos Logo" />
    }, {
      label: 'K3S',
      value: 'k3s',
      leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
    }],
    placeholder: 'Select an option...',
    required: false,
    labelClassName: '',
    isLoading: false,
    theme: 'kubefirst',
    name: 'dropdown'
  },
  render: args => {
    const [value, setValue] = useState<string>();
    return <div className="max-w-[350px]">
        <DropdownComponent label="Dropdown with Kubefirst theme" onChange={({
        target: {
          value
        }
      }) => setValue(value)} value={value} {...args} />
      </div>;
  }
}`,...(V=(P=C.parameters)==null?void 0:P.docs)==null?void 0:V.source}}};const ve=["Dropdown"];export{C as Dropdown,ve as __namedExportsOrder,ge as default};
