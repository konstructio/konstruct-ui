import{j as e}from"./jsx-runtime-DR9Q75dM.js";import{r}from"./index-DRjF_FHU.js";import{u as U}from"./useToggle-CSjcspRO.js";import{c as T}from"./index-Ch1LPoRI.js";import{c as k}from"./index-Bb4qSo10.js";import{C as $}from"./chevron-up-CudvOeva.js";import{u as H}from"./theme.hook-CuwzjDGP.js";import"./index-Dw6WB_A6.js";const K=r.createContext({value:null,isOpen:!1,toggleOpen(){throw new Error("toggleOpen function must be overridden")},setValue(){throw new Error("setValue function must be overridden")}}),b=()=>{const t=r.useContext(K);if(!t)throw new Error("useTheme must be used within a DropdownProvider");return t},S=({children:t,onChange:n})=>{const[l,o]=U(!1),[a,s]=r.useState(null),p=r.useCallback(i=>{n==null||n(i),s(i)},[n]);return e.jsx(K.Provider,{value:{value:a,isOpen:l,setValue:p,toggleOpen:o},children:t})};S.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{onChange:{required:!1,tsType:{name:"DropdownProps['onChange']",raw:"DropdownProps['onChange']"},description:""}}};const z=({ulRef:t,wrapperRef:n,wrapperInputRef:l})=>{const o=r.useRef(0),{isOpen:a}=b();r.useEffect(()=>{var m,u;const s=((m=t.current)==null?void 0:m.querySelectorAll("li"))??[],p=new AbortController,i=()=>{o.current<s.length-1?(o.current=o.current+1,s[o.current].focus()):(o.current=0,s[0].focus())},c=()=>{var d;o.current>0?(o.current=o.current-1,s[o.current].focus()):(o.current=0,(d=l.current)==null||d.focus())};return(u=t.current)==null||u.addEventListener("keydown",d=>{var w;switch(d.preventDefault(),d.key){case"ArrowDown":{i();break}case"Tab":{d.shiftKey?c():i();break}case"ArrowUp":{o.current===0?(w=l.current)==null||w.focus():c();break}case"Enter":{const g=s[o.current].querySelector("button");g==null||g.click();break}}},{signal:p.signal}),()=>{p.abort()}},[t,o,l]),r.useEffect(()=>{var p;const s=new AbortController;return(p=n.current)==null||p.addEventListener("mouseenter",()=>{var c;(((c=t.current)==null?void 0:c.querySelectorAll("li"))??[]).forEach(m=>m.blur())},{signal:s.signal}),()=>{s.abort()}},[t,n]),r.useEffect(()=>{a||(o.current=0)},[a])},B=k(["cursor-pointer","py-1","px-2","h-full","focus-visible:outline-none"],{variants:{theme:{kubefirst:["focus:bg-purple-100","hover:bg-purple-100"],konstruct:["focus:bg-orange-100","hover:bg-orange-100"],colony:["focus:bg-red-100","hover:bg-red-100"]}},defaultVariants:{theme:"kubefirst"}}),V=({theme:t,...n})=>{const{setValue:l,toggleOpen:o}=b(),a=r.useCallback(s=>{l(s),o(!1)},[l,o]);return e.jsx("li",{className:B({theme:t}),role:"option",tabIndex:0,children:e.jsxs("button",{type:"button",role:"button",className:"m-0 p-0 w-full flex items-center gap-3",onClick:()=>a(n),children:[n.leftIcon?e.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:n.leftIcon}):null,n.label]})})};V.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},theme:{required:!0,tsType:{name:"DropdownProps['theme']",raw:"DropdownProps['theme']"},description:""}}};const G=k(["absolute","bg-white","border","duration-100","ease-in-out","flex-col","mt-1","overflow-hidden","rounded-md","shadow-sm","top-full","transition-all","w-full","z-10"],{variants:{theme:{colony:["border-red-400"],konstruct:["border-orange-400"],kubefirst:["border-kubefirst-purple-light"]}},defaultVariants:{theme:"kubefirst"}}),_=r.forwardRef(({options:t,theme:n,wrapperRef:l,wrapperInputRef:o},a)=>{const s=r.useRef(null),{isOpen:p}=b();return r.useImperativeHandle(a,()=>s.current,[s]),z({ulRef:s,wrapperRef:l,wrapperInputRef:o}),e.jsx("ul",{ref:s,role:"listbox",className:T(G({theme:n}),p?"flex":"hidden"),children:t.map(i=>e.jsx(V,{theme:n,...i},i.value))})});_.__docgenInfo={description:"",methods:[],displayName:"List"};const J=k(["border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none"],{variants:{theme:{konstruct:["aria-expanded:border-orange-400","aria-expanded:text-orange-400","focus-visible:bg-orange-100"],kubefirst:["aria-expanded:border-kubefirst-purple-light","aria-expanded:text-kubefirst-purple-dark","focus-visible:bg-purple-100"],colony:["aria-expanded:border-red-400","aria-expanded:text-red-400","focus-visible:bg-red-100"]}},defaultVariants:{theme:"kubefirst"}}),M=({ulRef:t})=>{const n=r.useRef(null),l=r.useRef(null),{isOpen:o,toggleOpen:a}=b();r.useEffect(()=>{var u;const i=new AbortController,c=d=>{d.key==="Escape"&&a(!1)},m=d=>{var w;(w=n.current)!=null&&w.contains(d.target)||a(!1)};return document.addEventListener("keydown",c,{signal:i.signal}),document.addEventListener("mousedown",m,{signal:i.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&a(!1)},{signal:i.signal}),(u=l.current)==null||u.addEventListener("focus",()=>{a(!0)},{signal:i.signal}),()=>{i.abort()}},[a,n]),r.useEffect(()=>{var c;const i=new AbortController;return(c=l.current)==null||c.addEventListener("keydown",m=>{var u;if(m.key==="ArrowDown"){const d=(u=t.current)==null?void 0:u.querySelector("li");d&&d.focus()}},{signal:i.signal}),()=>{i.abort()}},[l,t]);const s=r.useCallback(()=>a(!0),[a]),p=r.useCallback(()=>{o||a(!1)},[o,a]);return{wrapperRef:n,wrapperInputRef:l,handleOpen:s,handleOpenIfClosed:p}},A=r.forwardRef(({theme:t,label:n,placeholder:l,name:o,options:a,defaultValue:s},p)=>{const i=r.useId(),c=r.useRef(null),m=r.useRef(null),{wrapperRef:u,wrapperInputRef:d,handleOpen:w,handleOpenIfClosed:g}=M({ulRef:m}),{isOpen:N,value:f,setValue:D,toggleOpen:j}=b(),{theme:P}=H(),I=t??P,C=o?`${i}-${o}`:i;r.useImperativeHandle(p,()=>c.current,[c]),r.useEffect(()=>{c.current&&(c.current.value=f?f.value:"")},[f]),r.useEffect(()=>{if(s){const x=a.find(v=>v.value===s);x&&D(x)}},[s,a,D]),r.useEffect(()=>{var v;const x=new AbortController;return(v=u.current)==null||v.addEventListener("focusout",F=>{var R;const E=F.relatedTarget;(!E||!((R=u.current)!=null&&R.contains(E)))&&j(!1)}),()=>{x.abort()}},[j,u]);const W=()=>f!=null&&f.leftIcon?e.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:f.leftIcon}):null;return e.jsxs("div",{ref:u,className:"flex flex-col w-full relative",children:[n?e.jsx("label",{className:"m-2 cursor-pointer",htmlFor:C,onClick:g,children:n}):null,e.jsxs("div",{ref:d,id:C,className:J({theme:I}),role:"combobox",onClick:w,"aria-expanded":N,tabIndex:0,children:[e.jsx("span",{className:"text-base text-inherit",children:f?e.jsxs("span",{className:"flex gap-3 items-center",children:[W(),f.label]}):l}),e.jsx($,{className:T("w-4 h-4 text-inherit transition-all duration-50",N?"rotate-0":"rotate-180")})]}),e.jsx("input",{ref:c,type:"text",name:o,className:"hidden"}),e.jsx(_,{ref:m,wrapperRef:u,wrapperInputRef:d,options:a,theme:I})]})});A.__docgenInfo={description:"",methods:[],displayName:"Wrapper"};const h=r.forwardRef(({onChange:t,...n},l)=>e.jsx(S,{onChange:t,children:e.jsx(A,{ref:l,...n})}));h.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{defaultValue:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: Option) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}},name:"value"}],return:{name:"void"}}},description:""}},composes:["VariantProps"]};const re={component:h},y={args:{options:[{label:"Talos",value:"talos",leftIcon:e.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:e.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option..."},render:t=>{const n=t.options.map(l=>({...l,leftIcon:void 0}));return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Dropdowns without icons"}),e.jsxs("div",{className:"max-w-[350px]",children:[e.jsx(h,{label:"Dropdown with Kubefirst theme",theme:"kubefirst",name:"components-dropdown",...t,options:n}),e.jsx(h,{label:"Dropdown with Kontruct theme",theme:"konstruct",name:"components-dropdown",...t,options:n}),e.jsx(h,{label:"Dropdown with Colony theme",theme:"colony",name:"components-dropdown",...t,options:n})]}),e.jsx("h2",{className:"text-xl font-bold mt-8",children:"Dropdowns with icons"}),e.jsxs("div",{className:"max-w-[350px]",children:[e.jsx(h,{label:"Dropdown with Kubefirst theme",theme:"kubefirst",name:"components-dropdown",...t}),e.jsx(h,{label:"Dropdown with Kontruct theme",theme:"konstruct",name:"components-dropdown",...t}),e.jsx(h,{label:"Dropdown with Colony theme",theme:"colony",name:"components-dropdown",...t})]})]})}};var L,q,O;y.parameters={...y.parameters,docs:{...(L=y.parameters)==null?void 0:L.docs,source:{originalSource:`{
  args: {
    options: [{
      label: 'Talos',
      value: 'talos',
      leftIcon: <img src="./talos.svg" alt="Talos Logo" />
    }, {
      label: 'K3S',
      value: 'k3s',
      leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
    }],
    placeholder: 'Select an option...'
  },
  render: args => {
    const optionsWithoutLeftIcon = args.options.map(option => ({
      ...option,
      leftIcon: undefined
    }));
    return <>
        <h2 className="text-xl font-bold">Dropdowns without icons</h2>
        <div className="max-w-[350px]">
          <DropdownComponent label="Dropdown with Kubefirst theme" theme="kubefirst" name="components-dropdown" {...args} options={optionsWithoutLeftIcon} />

          <DropdownComponent label="Dropdown with Kontruct theme" theme="konstruct" name="components-dropdown" {...args} options={optionsWithoutLeftIcon} />

          <DropdownComponent label="Dropdown with Colony theme" theme="colony" name="components-dropdown" {...args} options={optionsWithoutLeftIcon} />
        </div>

        <h2 className="text-xl font-bold mt-8">Dropdowns with icons</h2>
        <div className="max-w-[350px]">
          <DropdownComponent label="Dropdown with Kubefirst theme" theme="kubefirst" name="components-dropdown" {...args} />

          <DropdownComponent label="Dropdown with Kontruct theme" theme="konstruct" name="components-dropdown" {...args} />

          <DropdownComponent label="Dropdown with Colony theme" theme="colony" name="components-dropdown" {...args} />
        </div>
      </>;
  }
}`,...(O=(q=y.parameters)==null?void 0:q.docs)==null?void 0:O.source}}};const se=["Dropdown"];export{y as Dropdown,se as __namedExportsOrder,re as default};
