import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{r as n}from"./index-DUAV1Q2A.js";import{u as U}from"./useToggle-BkgZmkan.js";import{c as R}from"./index-BVvdOpju.js";import{u as $}from"./theme.hook-gog7kSAh.js";import{a as k}from"./index-Bj7X0qp-.js";import{C as H}from"./chevron-up-r50vysvG.js";import"./index-ux_S9feM.js";const V=n.createContext({value:null,isOpen:!1,toggleOpen(){throw new Error("toggleOpen function must be overridden")},setValue(){throw new Error("setValue function must be overridden")}}),b=()=>{const o=n.useContext(V);if(!o)throw new Error("useTheme must be used within a DropdownProvider");return o},A=({children:o,onChange:t})=>{const[l,e]=U(!1),[a,i]=n.useState(null),d=n.useCallback(s=>{t==null||t(s),i(s)},[t]);return r.jsx(V.Provider,{value:{value:a,isOpen:l,setValue:d,toggleOpen:e},children:o})};A.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{onChange:{required:!1,tsType:{name:"DropdownProps['onChange']",raw:"DropdownProps['onChange']"},description:""}}};const z=({ulRef:o,wrapperRef:t,wrapperInputRef:l})=>{const e=n.useRef(0),{isOpen:a}=b();n.useEffect(()=>{var m,p;const i=((m=o.current)==null?void 0:m.querySelectorAll("li"))??[],d=new AbortController,s=()=>{e.current<i.length-1?(e.current=e.current+1,i[e.current].focus()):(e.current=0,i[0].focus())},c=()=>{var u;e.current>0?(e.current=e.current-1,i[e.current].focus()):(e.current=0,(u=l.current)==null||u.focus())};return(p=o.current)==null||p.addEventListener("keydown",u=>{var g;switch(u.preventDefault(),u.key){case"ArrowDown":{s();break}case"Tab":{u.shiftKey?c():s();break}case"ArrowUp":{e.current===0?(g=l.current)==null||g.focus():c();break}case"Enter":{const h=i[e.current].querySelector("button");h==null||h.click();break}}},{signal:d.signal}),()=>{d.abort()}},[o,e,l]),n.useEffect(()=>{var d;const i=new AbortController;return(d=t.current)==null||d.addEventListener("mouseenter",()=>{var c;(((c=o.current)==null?void 0:c.querySelectorAll("li"))??[]).forEach(m=>m.blur())},{signal:i.signal}),()=>{i.abort()}},[o,t]),n.useEffect(()=>{a||(e.current=0)},[a])},B=k(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3"],{variants:{theme:{kubefirst:["focus:bg-purple-100","hover:bg-purple-100"],colony:["focus:bg-red-100","hover:bg-red-100"],civo:""}},defaultVariants:{theme:"kubefirst"}}),K=({theme:o,...t})=>{const{setValue:l,toggleOpen:e}=b(),a=n.useRef(null),i=n.useCallback(s=>{l(s),e(!1)},[l,e]),d=n.useCallback((s,c)=>{s.key==="Enter"&&i(c)},[i]);return r.jsxs("li",{ref:a,role:"option",className:R(B({theme:o})),tabIndex:0,onClick:()=>i(t),onKeyDown:s=>d(s,t),children:[t.leftIcon?r.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:t.leftIcon}):null,t.label]})};K.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},theme:{required:!0,tsType:{name:"DropdownProps['theme']",raw:"DropdownProps['theme']"},description:""}}};const G=k(["absolute","bg-white","border","duration-100","ease-in-out","flex-col","mt-1","overflow-hidden","rounded-md","shadow-sm","top-full","transition-all","w-full","z-10"],{variants:{theme:{colony:["border-red-400"],kubefirst:["border-kubefirst-primary"],civo:""}},defaultVariants:{theme:"kubefirst"}}),S=n.forwardRef(({options:o,theme:t,wrapperRef:l,wrapperInputRef:e,name:a},i)=>{const d=n.useRef(null),{isOpen:s}=b();return n.useImperativeHandle(i,()=>d.current,[d]),z({ulRef:d,wrapperRef:l,wrapperInputRef:e}),r.jsx("ul",{ref:d,title:a,role:"listbox",className:R(G({theme:t}),s?"flex":"hidden"),children:o.map(c=>r.jsx(K,{theme:t,...c},c.value))})});S.__docgenInfo={description:"",methods:[],displayName:"List",props:{wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const J=k(["border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none"],{variants:{theme:{kubefirst:["aria-expanded:border-kubefirst-primary","aria-expanded:text-kubefirst-secondary","focus-visible:bg-purple-100"],colony:["aria-expanded:border-red-400","aria-expanded:text-red-400","focus-visible:bg-red-100"],civo:""}},defaultVariants:{theme:"kubefirst"}}),M=({ulRef:o})=>{const t=n.useRef(null),l=n.useRef(null),{isOpen:e,toggleOpen:a}=b();n.useEffect(()=>{var p;const s=new AbortController,c=u=>{u.key==="Escape"&&a(!1)},m=u=>{var g;(g=t.current)!=null&&g.contains(u.target)||a(!1)};return document.addEventListener("keydown",c,{signal:s.signal}),document.addEventListener("mousedown",m,{signal:s.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&a(!1)},{signal:s.signal}),(p=l.current)==null||p.addEventListener("focus",()=>{a(!0)},{signal:s.signal}),()=>{s.abort()}},[a,t]),n.useEffect(()=>{var c;const s=new AbortController;return(c=l.current)==null||c.addEventListener("keydown",m=>{var p;if(m.key==="ArrowDown"){const u=(p=o.current)==null?void 0:p.querySelector("li");u&&u.focus()}},{signal:s.signal}),()=>{s.abort()}},[l,o]);const i=n.useCallback(()=>a(!0),[a]),d=n.useCallback(()=>{e||a(!1)},[e,a]);return{wrapperRef:t,wrapperInputRef:l,handleOpen:i,handleOpenIfClosed:d}},_=n.forwardRef(({theme:o,label:t,placeholder:l,name:e,options:a,defaultValue:i},d)=>{const s=n.useId(),c=n.useRef(null),m=n.useRef(null),{wrapperRef:p,wrapperInputRef:u,handleOpen:g,handleOpenIfClosed:h}=M({ulRef:m}),{isOpen:I,value:f,setValue:C,toggleOpen:j}=b(),{theme:P}=$(),D=o??P,v=e?`${s}-${e}`:s;n.useImperativeHandle(d,()=>c.current,[c]),n.useEffect(()=>{c.current&&(c.current.value=f?f.value:"")},[f]),n.useEffect(()=>{if(i){const y=a.find(x=>x.value===i);y&&C(y)}},[i,a,C]),n.useEffect(()=>{var x;const y=new AbortController;return(x=p.current)==null||x.addEventListener("focusout",F=>{var T;const q=F.relatedTarget;(!q||!((T=p.current)!=null&&T.contains(q)))&&j(!1)}),()=>{y.abort()}},[j,p]);const W=()=>f!=null&&f.leftIcon?r.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:f.leftIcon}):null;return r.jsxs("div",{ref:p,className:"flex flex-col w-full relative",children:[t?r.jsx("label",{id:v,className:"m-2 cursor-pointer",htmlFor:v,onClick:h,children:t}):null,r.jsxs("div",{ref:u,id:v,className:R(J({theme:D})),role:"combobox",onClick:g,"aria-expanded":I,tabIndex:0,"aria-labelledby":v,children:[r.jsx("span",{className:"text-base text-inherit",children:f?r.jsxs("span",{className:"flex gap-3 items-center",children:[W(),f.label]}):l}),r.jsx(H,{className:R("w-4 h-4 text-inherit transition-all duration-50",I?"rotate-0":"rotate-180")})]}),r.jsx("input",{ref:c,type:"text",name:e,className:"hidden","aria-hidden":"true"}),r.jsx(S,{ref:m,name:e,wrapperRef:p,wrapperInputRef:u,options:a,theme:D})]})});_.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{defaultValue:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: Option) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}},name:"value"}],return:{name:"void"}}},description:""}},composes:["VariantProps"]};const w=n.forwardRef(({onChange:o,...t},l)=>r.jsx(A,{onChange:o,children:r.jsx(_,{ref:l,...t})}));w.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{defaultValue:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: Option) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}},name:"value"}],return:{name:"void"}}},description:""}},composes:["VariantProps"]};const oe={title:"In Review/Dropdown",component:w},N={args:{options:[{label:"Talos",value:"talos",leftIcon:r.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:r.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option..."},render:o=>{const t=o.options.map(l=>({...l,leftIcon:void 0}));return r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-xl font-bold",children:"Dropdowns without icons"}),r.jsxs("div",{className:"max-w-[350px]",children:[r.jsx(w,{label:"Dropdown with Kubefirst theme",theme:"kubefirst",name:"components-dropdown",...o,options:t}),r.jsx(w,{label:"Dropdown with Colony theme",theme:"colony",name:"components-dropdown",...o,options:t})]}),r.jsx("h2",{className:"text-xl font-bold mt-8",children:"Dropdowns with icons"}),r.jsxs("div",{className:"max-w-[350px]",children:[r.jsx(w,{label:"Dropdown with Kubefirst theme",theme:"kubefirst",name:"components-dropdown",...o}),r.jsx(w,{label:"Dropdown with Colony theme",theme:"colony",name:"components-dropdown",...o})]})]})}};var E,O,L;N.parameters={...N.parameters,docs:{...(E=N.parameters)==null?void 0:E.docs,source:{originalSource:`{
  args: {
    options: [{
      label: 'Talos',
      value: 'talos',
      leftIcon: <img src="./talos.svg" alt="Talos Logo" />
    }, {
      label: 'K3S',
      value: 'k3s',
      leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
    }],
    placeholder: 'Select an option...'
  },
  render: args => {
    const optionsWithoutLeftIcon = args.options.map(option => ({
      ...option,
      leftIcon: undefined
    }));
    return <>
        <h2 className="text-xl font-bold">Dropdowns without icons</h2>
        <div className="max-w-[350px]">
          <DropdownComponent label="Dropdown with Kubefirst theme" theme="kubefirst" name="components-dropdown" {...args} options={optionsWithoutLeftIcon} />

          <DropdownComponent label="Dropdown with Colony theme" theme="colony" name="components-dropdown" {...args} options={optionsWithoutLeftIcon} />
        </div>

        <h2 className="text-xl font-bold mt-8">Dropdowns with icons</h2>
        <div className="max-w-[350px]">
          <DropdownComponent label="Dropdown with Kubefirst theme" theme="kubefirst" name="components-dropdown" {...args} />

          <DropdownComponent label="Dropdown with Colony theme" theme="colony" name="components-dropdown" {...args} />
        </div>
      </>;
  }
}`,...(L=(O=N.parameters)==null?void 0:O.docs)==null?void 0:L.source}}};const se=["Dropdown"];export{N as Dropdown,se as __namedExportsOrder,oe as default};
