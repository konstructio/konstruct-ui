import{j as o}from"./jsx-runtime-D_zvdyIk.js";import{r as n}from"./index-CDlOlYQx.js";import{u as W}from"./useToggle-BALwLbl6.js";import{L as B}from"./Loading-UlTOW7bB.js";import{T as q}from"./Typography-DDXCUpEe.js";import{c as R,a as w}from"./index-DJQVxuCM.js";import{C as M}from"./chevron-up-UzVUTr3-.js";import"./createLucideIcon-CMELoiyk.js";import"./index-DZ1mZqx3.js";import"./index-_3p-ol44.js";const K=n.createContext({isOpen:!1,toggleOpen(){throw new Error("toggleOpen function must be overridden")},value:void 0,setValue(){throw new Error("setValue function must be overridden")}}),x=()=>{const l=n.useContext(K);if(!l)throw new Error("useDropdownContext must be used within a DropdownProvider");return l},z=({children:l,onChange:r,value:i,name:e})=>{const[a,s]=W(!1),u=n.useCallback(t=>{r==null||r({target:{value:t,name:e??""}})},[r,e]);return o.jsx(K.Provider,{value:{value:i,isOpen:a,setValue:u,toggleOpen:s},children:l})};z.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{onChange:{required:!1,tsType:{name:"DropdownProps['onChange']",raw:"DropdownProps['onChange']"},description:""},value:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""}}};const G=({ulRef:l,wrapperRef:r,wrapperInputRef:i})=>{const e=n.useRef(0),{isOpen:a}=x();n.useEffect(()=>{var m,p;const s=((m=l.current)==null?void 0:m.querySelectorAll("li"))??[],u=new AbortController,t=()=>{e.current<s.length-1?(e.current=e.current+1,s[e.current].focus()):(e.current=0,s[0].focus())},d=()=>{var c;e.current>0?(e.current=e.current-1,s[e.current].focus()):(e.current=0,(c=i.current)==null||c.focus())};return(p=l.current)==null||p.addEventListener("keydown",c=>{var v;switch(c.preventDefault(),c.key){case"ArrowDown":{t();break}case"Tab":{c.shiftKey?d():t();break}case"ArrowUp":{e.current===0?(v=i.current)==null||v.focus():d();break}case"Enter":{const g=s[e.current].querySelector("button");g==null||g.click();break}}},{signal:u.signal}),()=>{u.abort()}},[l,e,i]),n.useEffect(()=>{var u;const s=new AbortController;return(u=r.current)==null||u.addEventListener("mouseenter",()=>{var d;(((d=l.current)==null?void 0:d.querySelectorAll("li"))??[]).forEach(m=>m.blur())},{signal:s.signal}),()=>{s.abort()}},[l,r]),n.useEffect(()=>{a||(e.current=0)},[a])},J=R(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3","hover:bg-slate-50","focus:bg-slate-50","colony:focus:bg-red-100","colony:hover:bg-red-100"]),C=({isClickable:l,...r})=>{const{setValue:i,toggleOpen:e}=x(),a=n.useRef(null),s=n.useCallback(t=>{i(t.value),e(!1)},[i,e]),u=n.useCallback((t,d)=>{t.key==="Enter"&&s(d)},[s]);return o.jsxs("li",{ref:a,role:"option",className:w(J()),tabIndex:0,onClick:()=>l&&s(r),onKeyDown:t=>u(t,r),children:[r.leftIcon?o.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:r.leftIcon}):null,o.jsx(q,{variant:"body2",className:"text-zinc-700",children:r.label})]})};C.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},isClickable:{required:!0,tsType:{name:"boolean"},description:""}}};const Q=R(["absolute","bg-white","border","duration-100","ease-in-out","flex-col","mt-1","overflow-hidden","rounded-md","shadow-2xs","top-full","transition-all","w-full","z-10","max-h-[185px]","overflow-y-auto","border-gray-200","text-zinc-700"]),P=n.forwardRef(({isLoading:l,options:r,wrapperRef:i,wrapperInputRef:e,name:a},s)=>{const u=n.useRef(null),{isOpen:t}=x();n.useImperativeHandle(s,()=>u.current,[u]),G({ulRef:u,wrapperRef:i,wrapperInputRef:e});const d=r.length===0;return o.jsx("ul",{ref:u,title:a,role:"listbox",className:w(Q(),t?"flex":"hidden"),children:l?o.jsx(C,{isClickable:!1,value:"Loading...",label:"Loading..."}):d?o.jsx(C,{isClickable:!1,value:"No options",label:"No options"}):r.map(m=>o.jsx(C,{isClickable:!0,...m},m.value))})});P.__docgenInfo={description:"",methods:[],displayName:"List",props:{isLoading:{required:!0,tsType:{name:"boolean"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const X=R(["border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none","h-9","border-gray-200","aria-expanded:border-kubefirst-primary","aria-expanded:text-kubefirst-secondary","focus-visible:bg-zinc-50","colony:aria-expanded:border-red-400","colony:aria-expanded:text-red-400","colony:focus-visible:bg-red-100"]),Y=R(["mb-1","cursor-pointer","text-[14px]","leading-[20px]","tracking-[0.1px]"]),Z=({ulRef:l})=>{const r=n.useRef(null),i=n.useRef(null),{isOpen:e,toggleOpen:a}=x();n.useEffect(()=>{var p;const t=new AbortController,d=c=>{c.key==="Escape"&&a(!1)},m=c=>{var v;(v=r.current)!=null&&v.contains(c.target)||a(!1)};return document.addEventListener("keydown",d,{signal:t.signal}),document.addEventListener("mousedown",m,{signal:t.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&a(!1)},{signal:t.signal}),(p=i.current)==null||p.addEventListener("focus",()=>{a(!0)},{signal:t.signal}),()=>{t.abort()}},[a,r]),n.useEffect(()=>{var d;const t=new AbortController;return(d=i.current)==null||d.addEventListener("keydown",m=>{var p;if(m.key==="ArrowDown"){const c=(p=l.current)==null?void 0:p.querySelector("li");c&&c.focus()}},{signal:t.signal}),()=>{t.abort()}},[i,l]);const s=n.useCallback(()=>a(!0),[a]),u=n.useCallback(()=>{e||a(!1)},[e,a]);return{wrapperRef:r,wrapperInputRef:i,handleOpen:s,handleOpenIfClosed:u}},V=n.forwardRef(({theme:l,label:r,labelClassName:i,placeholder:e,name:a,options:s,required:u,defaultValue:t,isLoading:d},m)=>{const p=n.useId(),c=n.useRef(null),v=n.useRef(null),{wrapperRef:g,wrapperInputRef:T,handleOpen:U,handleOpenIfClosed:$}=Z({ulRef:v}),{isOpen:I,toggleOpen:E,value:b,setValue:O}=x(),h=a?`${p}-${a}`:p;n.useImperativeHandle(m,()=>c.current,[c]);const f=n.useMemo(()=>s.find(({value:y})=>y===b),[s,b]);n.useEffect(()=>{c.current&&(c.current.value=b?f==null?void 0:f.value:"")},[f,b]),n.useEffect(()=>{if(t&&!b){const y=s&&s.find(k=>k.value===t);y&&O(y.value)}},[t,s,O,b]),n.useEffect(()=>{var k;const y=new AbortController;return(k=g.current)==null||k.addEventListener("focusout",H=>{var D;const L=H.relatedTarget;(!L||!((D=g.current)!=null&&D.contains(L)))&&E(!1)}),()=>{y.abort()}},[E,g]);const F=()=>f!=null&&f.leftIcon?o.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:f.leftIcon}):null;return o.jsxs("div",{ref:g,className:"flex flex-col w-full relative","data-theme":l,children:[r?o.jsxs("label",{id:h,className:w(Y({className:i})),htmlFor:h,onClick:$,children:[r,u?o.jsx("span",{className:"text-red-500 ml-1",children:"*"}):null]}):null,o.jsxs("div",{ref:T,id:h,className:w(X()),role:"combobox",onClick:U,"aria-expanded":I,tabIndex:0,"aria-labelledby":h,children:[b?o.jsxs(q,{variant:"body2",className:"flex gap-3 items-center text-zinc-700 text-base",children:[F(),f==null?void 0:f.label]}):o.jsx(q,{variant:"body2",className:"flex gap-3 items-center text-zinc-700 text-base",children:e}),d?o.jsx(B,{className:"w-4 h-4 text-zinc-500"}):o.jsx(M,{className:w("w-4 h-4 text-zinc-500 transition-all duration-50",I?"rotate-0":"rotate-180")})]}),o.jsx("input",{ref:c,type:"text",name:a,className:"hidden","aria-hidden":"true",required:u}),o.jsx(P,{ref:v,name:a,wrapperRef:g,wrapperInputRef:T,options:s,isLoading:!!d})]})});V.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{isLoading:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'colony'
| 'civo'
| 'kubefirst-dark'
| 'colony-dark'
| 'civo-dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'colony'"},{name:"literal",value:"'civo'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'colony-dark'"},{name:"literal",value:"'civo-dark'"},{name:"undefined"}]},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { target: { value: string; name: string } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: string; name: string } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""}},composes:["VariantProps","Omit"]};const j=n.forwardRef(({onChange:l,value:r,name:i,...e},a)=>o.jsx(z,{onChange:l,value:r,name:i,children:o.jsx(V,{name:i,ref:a,...e})}));j.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{isLoading:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'colony'
| 'civo'
| 'kubefirst-dark'
| 'colony-dark'
| 'civo-dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'colony'"},{name:"literal",value:"'civo'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'colony-dark'"},{name:"literal",value:"'civo-dark'"},{name:"undefined"}]},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { target: { value: string; name: string } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: string; name: string } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""}},composes:["VariantProps","Omit"]};const ce={title:"In Review/Dropdown",component:j},N={args:{options:[{label:"Talos",value:"talos",leftIcon:o.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:o.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option...",required:!1,labelClassName:"",isLoading:!1,theme:"kubefirst",name:"dropdown"},render:l=>{const[r,i]=n.useState();return o.jsx("div",{className:"max-w-[350px]",children:o.jsx(j,{label:"Dropdown with Kubefirst theme",onChange:({target:{value:e}})=>i(e),value:r,...l})})}};var S,A,_;N.parameters={...N.parameters,docs:{...(S=N.parameters)==null?void 0:S.docs,source:{originalSource:`{
  args: {
    options: [{
      label: 'Talos',
      value: 'talos',
      leftIcon: <img src="./talos.svg" alt="Talos Logo" />
    }, {
      label: 'K3S',
      value: 'k3s',
      leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
    }],
    placeholder: 'Select an option...',
    required: false,
    labelClassName: '',
    isLoading: false,
    theme: 'kubefirst',
    name: 'dropdown'
  },
  render: args => {
    const [value, setValue] = useState<string>();
    return <div className="max-w-[350px]">
        <DropdownComponent label="Dropdown with Kubefirst theme" onChange={({
        target: {
          value
        }
      }) => setValue(value)} value={value} {...args} />
      </div>;
  }
}`,...(_=(A=N.parameters)==null?void 0:A.docs)==null?void 0:_.source}}};const de=["Dropdown"];export{N as Dropdown,de as __namedExportsOrder,ce as default};
