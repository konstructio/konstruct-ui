import{r as o,R,j as s}from"./iframe-BzlWAk8Y.js";import{u as $}from"./useToggle-BaH7sTp8.js";import{S as B}from"./loader-oVpvLQIB.js";import{B as V}from"./Badge-PKzqo74J.js";import{T as M}from"./Typography-0XhGnr1V.js";import{a as S,c as h}from"./index-B-7A89sm.js";import{X as K}from"./x-MrXxibht.js";import{P as j}from"./index-CudE3X82.js";function I(){return I=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n},I.apply(this,arguments)}function U(n,e){if(n==null)return{};var r=J(n,e),t,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(a=0;a<i.length;a++)t=i[a],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function J(n,e){if(n==null)return{};var r={},t=Object.keys(n),a,i;for(i=0;i<t.length;i++)a=t[i],!(e.indexOf(a)>=0)&&(r[a]=n[a]);return r}var L=o.forwardRef(function(n,e){var r=n.color,t=r===void 0?"currentColor":r,a=n.size,i=a===void 0?24:a,p=U(n,["color","size"]);return R.createElement("svg",I({ref:e,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},p),R.createElement("polyline",{points:"18 15 12 9 6 15"}))});L.propTypes={color:j.string,size:j.oneOfType([j.string,j.number])};L.displayName="ChevronUp";const X={options:[],selectedOptions:[],isOpen:!1,inputRef:null,onSelectOption(){throw new Error("Function not implemented.")},onRemoveOption(){throw new Error("Function not implemented.")},onOpen(){throw new Error("Function not implemented.")},isLoading:!1,noOptionsText:void 0},_=o.createContext(X),N=()=>{const n=o.useContext(_);if(!n)throw new Error("useMultiSelectDropdown must be used within a MultiSelectDropdownProvider");return n},P=({children:n,defaultOptions:e=[],multiselect:r=!0,value:t,onChange:a,onBlur:i,name:p,isLoading:q,noOptionsText:k})=>{const c=o.useRef(null),[b,T]=$(!1),[x,w]=o.useState(e),[g,O]=o.useState([]),f=t!==void 0;o.useEffect(()=>{if(!f){const d=new Set(g.map(l=>l.id));w(r?e.filter(l=>!d.has(l.id)):e.map(l=>({...l,isSelected:d.has(l.id)})))}},[e,r,f,g]),o.useEffect(()=>{if(f){const d=t||[];O(d);const l=new Set(d.map(m=>m.id));w(r?e.filter(m=>!l.has(m.id)):e.map(m=>({...m,isSelected:l.has(m.id)})))}},[t,f,e,r]);const v=o.useCallback(d=>{const l=d.map(({id:u,value:D,label:F})=>({id:u,value:D??F})),m=JSON.stringify(l);c.current&&(c.current.value=m),a&&a({target:{value:d,name:p??""}})},[a,p]),y=o.useCallback(d=>{const l=b;T(d),l&&d===!1&&i&&c.current&&i({target:c.current,type:"blur"})},[b,T,i,c]),A=o.useCallback(d=>{if(f){const u=[...r?g:[],d];v(u),y(!1);return}const l=[...r?g:[],d];O(l);const m=l.map(u=>u.id);w(()=>r?e.filter(u=>!m.includes(u.id)):e.map(u=>({...u,isSelected:m.includes(u.id)}))),v(l),y(!1)},[e,v,r,g,y,f]),z=o.useCallback(d=>{if(f){const u=g.filter(D=>D.id!==d.id);v(u);return}const l=g.filter(u=>u.id!==d.id);O(l);const m=l.map(u=>u.id);w(()=>e.filter(u=>!m.includes(u.id))),v(l)},[e,v,g,f]);return s.jsx(_.Provider,{value:{options:x,selectedOptions:g,isOpen:b,inputRef:c,onSelectOption:A,onRemoveOption:z,onOpen:y,isLoading:q,noOptionsText:k},children:n})};P.__docgenInfo={description:"",methods:[],displayName:"MultiSelectDropdownProvider",props:{defaultOptions:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string | number;
  label: string;
  badge?: string;
  value?: string;
}`,signature:{properties:[{key:"id",value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"badge",value:{name:"string",required:!1}},{key:"value",value:{name:"string",required:!1}}]}}],raw:"MultiSelectDropdownOption[]"},description:"",defaultValue:{value:"[]",computed:!1}},isLoading:{required:!1,tsType:{name:"boolean"},description:""},multiselect:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},name:{required:!1,tsType:{name:"string"},description:""},noOptionsText:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string | number;
  label: string;
  badge?: string;
  value?: string;
}`,signature:{properties:[{key:"id",value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"badge",value:{name:"string",required:!1}},{key:"value",value:{name:"string",required:!1}}]}}],raw:"MultiSelectDropdownOption[]"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:`(params: {
  target: { value: MultiSelectDropdownOption[]; name: string };
}) => void`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  target: { value: MultiSelectDropdownOption[]; name: string };
}`,signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: MultiSelectDropdownOption[]; name: string }",signature:{properties:[{key:"value",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string | number;
  label: string;
  badge?: string;
  value?: string;
}`,signature:{properties:[{key:"id",value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"badge",value:{name:"string",required:!1}},{key:"value",value:{name:"string",required:!1}}]}}],raw:"MultiSelectDropdownOption[]",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: { target: HTMLInputElement | null; type?: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: HTMLInputElement | null; type?: string }",signature:{properties:[{key:"target",value:{name:"union",raw:"HTMLInputElement | null",elements:[{name:"HTMLInputElement"},{name:"null"}],required:!0}},{key:"type",value:{name:"string",required:!1}}]}},name:"event"}],return:{name:"void"}}},description:""}}};const G=S(["cursor-pointer","py-1.5","px-2","last:pb-2","first:pt-2","h-full","flex","items-center","gap-2","hover:bg-gray-50","focus:bg-gray-50","dark:hover:bg-metal-700","dark:focus:bg-metal-700"],{variants:{isSelected:{true:"",false:""}},compoundVariants:[{isSelected:!0,class:["bg-slate-50","dark:bg-metal-700"]}],defaultVariants:{isSelected:!1}}),E=({option:n,theme:e,isSelected:r,className:t})=>{const{onSelectOption:a}=N();return s.jsxs("li",{role:"option","data-theme":e,className:h(G({isSelected:r}),t),onClick:()=>a(n),children:[s.jsx(M,{variant:"body2",children:n.label}),n.badge&&s.jsx(V,{label:n.badge})]})};E.__docgenInfo={description:"",methods:[],displayName:"Item",props:{option:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  id: string | number;
  label: string;
  badge?: string;
  value?: string;
}`,signature:{properties:[{key:"id",value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"badge",value:{name:"string",required:!1}},{key:"value",value:{name:"string",required:!1}}]}},description:""},theme:{required:!1,tsType:{name:"Theme"},description:""},isSelected:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};const Q=S(["absolute","bg-white","border","duration-100","flex","flex-col","mt-0.5","rounded","shadow-xs","top-full","transition-all","w-full","z-10","animate-in","fade-in-50","overflow-hidden","border-gray-200","dark:border-metal-700","dark:bg-metal-800"]),H=({theme:n})=>{const{options:e,selectedOptions:r,isLoading:t,noOptionsText:a}=N();return s.jsx("ul",{role:"listbox","data-theme":n,className:h(Q()),children:t?s.jsx(E,{option:{id:"loading",label:"Loading..."},className:"select-none pointer-events-none",isSelected:!1},"loading"):e.length>0?e.map(i=>s.jsx(E,{option:i,isSelected:r.some(p=>p.id===i.id)},i.id)):s.jsx("li",{className:"select-none",children:s.jsx(M,{variant:"body2",className:"italic px-2 py-2",children:a??"No options"})})})};H.__docgenInfo={description:"",methods:[],displayName:"List",props:{theme:{required:!1,tsType:{name:"Theme"},description:""}}};const Y=()=>{const n=o.useRef(null),{onOpen:e}=N();o.useEffect(()=>{const t=new AbortController,a=p=>{p.key==="Escape"&&e(!1)},i=p=>{n.current?.contains(p.target)||e(!1)};return document.addEventListener("keydown",a,{signal:t.signal}),document.addEventListener("mousedown",i,{signal:t.signal}),()=>{t.abort()}},[e,n]);const r=o.useCallback(t=>{t.target?.closest("[data-value]")||e(!0)},[e]);return{wrapperRef:n,handleOpen:r}},Z=S(["flex","flex-col","w-full","relative","cursor-pointer"]),ee=S(["cursor-pointer","mb-1","select-none"]),ne=S(["min-h-9","border","cursor-pointer","duration-250","ease-in-out","flex","items-center","justify-between","px-2","py-1","rounded-md","transition-all","w-full","border-gray-200","dark:border-metal-700","dark:bg-metal-800"]),C=o.forwardRef(({isRequired:n,label:e,labelClassName:r,name:t,placeholder:a="",theme:i,wrapperClassName:p},q)=>{const k=o.useId(),c=t?`${k}-name`:"id",{inputRef:b,isLoading:T,isOpen:x,selectedOptions:w,onOpen:g,onRemoveOption:O}=N(),{wrapperRef:f,handleOpen:v}=Y();return o.useImperativeHandle(q,()=>b.current,[b]),s.jsxs("div",{ref:f,className:h(Z({className:p})),"data-theme":i,children:[e?s.jsxs(M,{component:"label",variant:"labelLarge",htmlFor:c,className:h(ee({className:r})),onClick:()=>g(!0),children:[e," ",n&&s.jsx(M,{component:"span",className:"text-red-500 dark:text-red-500 text-sm font-normal",children:"*"})]}):null,s.jsxs("div",{id:c,className:h(ne()),role:"combobox",onClick:v,"aria-expanded":x,children:[w.length===0?s.jsx("span",{className:"text-base text-inherit select-none",children:a}):s.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(y=>s.jsx(V,{"data-value":y.label,label:y.value??y.label??"",className:"select-none",rightIcon:s.jsx(K,{onClick:()=>O(y)})},y.id))}),T?s.jsx(B,{className:"w-4 h-4 animate-spin shrink-0 text-gray-400"}):s.jsx(L,{className:h("w-4 h-4 transition-all duration-50 shrink-0 text-gray-400",x?"rotate-0":"rotate-180")})]}),s.jsx("input",{ref:b,type:"text",name:t,className:"hidden",readOnly:!0}),x?s.jsx(H,{}):null]})});C.displayName="MultiSelectDropdownWrapper";C.__docgenInfo={description:"",methods:[],displayName:"MultiSelectDropdownWrapper",props:{ref:{required:!1,tsType:{name:"ForwardedRef",elements:[{name:"HTMLInputElement"}],raw:"ForwardedRef<HTMLInputElement>"},description:""},theme:{required:!1,tsType:{name:"Theme"},description:""},placeholder:{defaultValue:{value:"''",computed:!1},required:!1}}};const W=o.forwardRef(({isLoading:n,multiselect:e,name:r,noOptionsText:t,options:a,value:i,onChange:p,onBlur:q,...k},c)=>s.jsx(P,{defaultOptions:a,multiselect:e,value:i,onChange:p,onBlur:q,name:r,isLoading:n,noOptionsText:t,children:s.jsx(C,{ref:c,name:r,...k})}));W.displayName="KonstructMultiSelectDropdown";W.__docgenInfo={description:"",methods:[],displayName:"KonstructMultiSelectDropdown",props:{isLoading:{required:!1,tsType:{name:"boolean"},description:""},isRequired:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},multiselect:{required:!1,tsType:{name:"boolean"},description:""},name:{required:!1,tsType:{name:"string"},description:""},noOptionsText:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string | number;
  label: string;
  badge?: string;
  value?: string;
}`,signature:{properties:[{key:"id",value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"badge",value:{name:"string",required:!1}},{key:"value",value:{name:"string",required:!1}}]}}],raw:"MultiSelectDropdownOption[]"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string | number;
  label: string;
  badge?: string;
  value?: string;
}`,signature:{properties:[{key:"id",value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"badge",value:{name:"string",required:!1}},{key:"value",value:{name:"string",required:!1}}]}}],raw:"MultiSelectDropdownOption[]"},description:""},wrapperClassName:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:`(params: {
  target: { value: MultiSelectDropdownOption[]; name: string };
}) => void`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  target: { value: MultiSelectDropdownOption[]; name: string };
}`,signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: MultiSelectDropdownOption[]; name: string }",signature:{properties:[{key:"value",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string | number;
  label: string;
  badge?: string;
  value?: string;
}`,signature:{properties:[{key:"id",value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"badge",value:{name:"string",required:!1}},{key:"value",value:{name:"string",required:!1}}]}}],raw:"MultiSelectDropdownOption[]",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:`(event: {
  target: HTMLInputElement | null;
  type?: string;
}) => void`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  target: HTMLInputElement | null;
  type?: string;
}`,signature:{properties:[{key:"target",value:{name:"union",raw:"HTMLInputElement | null",elements:[{name:"HTMLInputElement"},{name:"null"}],required:!0}},{key:"type",value:{name:"string",required:!1}}]}},name:"event"}],return:{name:"void"}}},description:""}},composes:["VariantProps","Omit"]};export{W as M};
