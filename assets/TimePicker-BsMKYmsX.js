import{j as t}from"./jsx-runtime-u17CrQMm.js";import{r as a}from"./iframe-batYq3Oy.js";import{c as x,a as d}from"./index-Bn42e07n.js";import{C as E}from"./chevron-down-E1S6bPNa.js";const $=(e,n)=>n==="12"?`${e.getHours()%12||12}:${e.getMinutes().toString().padStart(2,"0")} ${e.getHours()>=12?"PM":"AM"}`:`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`,L=e=>e.getHours(),R=e=>e.getMinutes(),j=a.createContext({time:new Date,format:"12",formattedTime:"",isAM:!1,onSelectHour(){throw new Error("onSelectHour is not implemented")},onSelectMinute(){throw new Error("onSelectMinute is not implemented")},onSelectAM(){throw new Error("onSelectAM is not implemented")},onSelectPM(){throw new Error("onSelectPM is not implemented")}}),q=({children:e,time:n,format:u})=>{const[l,c]=a.useState(u),[r,i]=a.useState(()=>n??new Date),s=a.useMemo(()=>r.getHours()<12,[r]),o=a.useCallback(p=>{const b=new Date(r);l==="12"?p===12?b.setHours(s?0:12):b.setHours(s?p:p+12):b.setHours(p),i(b)},[l,s,r]),m=a.useCallback(p=>{const b=new Date(r);b.setMinutes(p),i(b)},[r]),f=a.useCallback(()=>{const p=new Date(r),b=p.getHours();s||p.setHours(b-12),i(p)},[s,r]),h=a.useCallback(()=>{const p=new Date(r),b=p.getHours();s&&p.setHours(b+12),i(p)},[s,r]);return a.useEffect(()=>{c(l)},[l]),t.jsx(j.Provider,{value:{time:r,format:l,formattedTime:$(r,l),isAM:s,onSelectHour:o,onSelectMinute:m,onSelectAM:f,onSelectPM:h},children:e})};q.__docgenInfo={description:"",methods:[],displayName:"TimePickerProvider",props:{time:{required:!1,tsType:{name:"Date"},description:""},format:{required:!0,tsType:{name:"NonNullable",elements:[{name:"intersection['format']",raw:"TimePickerProps['format']"}],raw:"NonNullable<TimePickerProps['format']>"},description:""}}};const y=()=>{const e=a.useContext(j);if(!e)throw new Error("useTimePickerContext must be used within a TimePickerProvider");return e},D=x(["border","rounded","p-2.5","w-full","flex","items-center","justify-between","border-gray-300","dark:border-metal-700","cursor-pointer","transition-all","transition-duration-100","data-[open=true]:border-aurora-500","text-sm","text-slate-800","dark:text-slate-50"]),P=x(["snap-y","snap-mandatory","overflow-y-scroll","scrollbar-none","flex","flex-col","dark:text-metal-50"]),w=x(["w-15","h-10","snap-start","rounded","transition-all","transition-duration-100","focus-within:outline-2","border-2","border-transparent","outline-none","hover:bg-gray-100","hover:border-2","hover:border-white","data-[active=true]:bg-blue-600","data-[active=true]:hover:border-blue-200","data-[active=true]:text-white","data-[active=true]:font-medium","focus-visible:border-blue-200","focus-within:border-blue-200","dark:focus-within:border-aurora-50","dark:data-[active=true]:bg-aurora-500","dark:data-[active=true]:text-metal-900"]),T=x(["flex","items-center","justify-center","cursor-pointer","w-full","h-full","px-6","py-3","outline-none","focus:border-blue-200","text-sm"]),g=({hours:e,scrollBehavior:n})=>{const u=a.useRef(null),l=a.useRef(!0),{format:c,onSelectHour:r}=y(),i=c==="12"&&e>=12?e-12:e,s=a.useCallback((o,m)=>{o.currentTarget?.blur(),r(m)},[r]);if(a.useEffect(()=>{if(l.current){const o=u.current,m=i===0&&c==="12"?12:i;o&&o.querySelector(`[data-value="${`0${m}`.slice(-2)}"]`)?.scrollIntoView({behavior:n,block:"center"}),l.current=!1}},[c,i,n]),c==="12"){const o=i===0?12:i;return t.jsx("ul",{ref:u,className:d(P()),"aria-label":"hours",role:"listbox",children:Array.from({length:12},(m,f)=>t.jsx("li",{className:d(w()),"data-value":`0${f+1}`.slice(-2),"data-active":o-1===f,role:"presentation",children:t.jsx("button",{type:"button",role:"option",className:d(T()),onClick:h=>s(h,f+1),children:f+1})},f))})}return t.jsx("ul",{ref:u,className:d(P()),"aria-label":"hours",role:"listbox",children:Array.from({length:24},(o,m)=>t.jsx("li",{className:d(w()),"data-value":`0${m}`.slice(-2),"data-active":e===m,role:"presentation",children:t.jsx("button",{type:"button",role:"option",className:d(T()),onClick:f=>s(f,m),children:m})},m))})};g.displayName="HoursList";g.__docgenInfo={description:"",methods:[],displayName:"HoursList",props:{hours:{required:!0,tsType:{name:"number"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const v=({listClassName:e,listItemClassName:n,listItemButtonClassName:u})=>{const{format:l,isAM:c,onSelectAM:r,onSelectPM:i}=y(),s=a.useCallback((o,m)=>{o.currentTarget?.blur(),m()},[]);return l==="24"?null:t.jsxs("ul",{className:d("flex items-center justify-center flex-col",e),"aria-label":"meridian",role:"listbox",children:[t.jsx("li",{className:d(w({className:n})),"data-active":c,role:"presentation",children:t.jsx("button",{type:"button",role:"option",className:d(T({className:u})),onClick:o=>s(o,r),children:"AM"})}),t.jsx("li",{className:d(w({className:n})),"data-active":!c,role:"presentation",children:t.jsx("button",{type:"button",role:"option",className:d(T({className:u})),onClick:o=>s(o,i),children:"PM"})})]})};v.displayName="MeridianList";v.__docgenInfo={description:"",methods:[],displayName:"MeridianList",props:{listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const M=({minutes:e,scrollBehavior:n})=>{const u=a.useRef(null),l=a.useRef(e),{onSelectMinute:c}=y();a.useEffect(()=>{const i=u.current;if(i){const s=`0${l.current}`.slice(-2);i.querySelector(`[data-value="${s}"]`)?.scrollIntoView({behavior:n,block:"center"})}},[n]);const r=a.useCallback((i,s)=>{c(i),s.currentTarget?.blur()},[c]);return t.jsx("ul",{ref:u,className:d(P()),"aria-label":"minutes",role:"listbox",children:Array.from({length:60},(i,s)=>t.jsx("li",{className:d(w()),"data-value":`0${s}`.slice(-2),"data-active":e===s,role:"presentation",children:t.jsx("button",{type:"button",role:"option",className:d(T()),onClick:o=>r(s,o),children:`0${s}`.slice(-2)})},s))})};M.displayName="MinutesList";M.__docgenInfo={description:"",methods:[],displayName:"MinutesList",props:{minutes:{required:!0,tsType:{name:"number"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const S=({isOpen:e,scrollBehavior:n,listClassName:u,listItemClassName:l,listItemButtonClassName:c})=>{const{time:r}=y(),i=a.useMemo(()=>L(r),[r]),s=a.useMemo(()=>R(r),[r]);return e?t.jsxs("div",{role:"group",className:d("flex gap-1.5 p-2 rounded-md shadow w-full max-h-[216px] absolute mt-1 bg-white z-10 animate-in fade-in-0 zoom-in-95 dark:bg-metal-800 dark:border dark:border-metal-700"),children:[t.jsx(g,{hours:i,scrollBehavior:n,listClassName:u,listItemClassName:l,listItemButtonClassName:c}),t.jsx(M,{minutes:s,scrollBehavior:n,listClassName:u,listItemClassName:l,listItemButtonClassName:c}),t.jsx(v,{listClassName:u,listItemClassName:l,listItemButtonClassName:c})]}):null};S.__docgenInfo={description:"",methods:[],displayName:"WrapperList",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const I=({name:e,label:n,required:u,scrollBehavior:l,className:c,listClassName:r,listItemClassName:i,listItemButtonClassName:s})=>{const o=a.useId(),[m,f]=a.useState(!1),h=a.useRef(null),{format:p,formattedTime:b}=y(),k=e??`time-${o}`,B=a.useCallback(()=>f(N=>!N),[]);return a.useEffect(()=>{const N=new AbortController,_=C=>{C.key==="Escape"&&f(!1)},A=C=>{h.current?.contains(C.target)||f(!1)};return document.addEventListener("mousedown",A,{signal:N.signal}),document.addEventListener("keydown",_,{signal:N.signal}),()=>{N.abort()}},[]),t.jsxs("div",{ref:h,className:d("w-max text-slate-800 text-sm flex flex-col gap-2",p==="12"?"w-52":"w-[140px]"),children:[n?t.jsxs("label",{htmlFor:k,className:"text-slate-500 dark:text-metal-50 font-medium",children:[n," ",u&&t.jsx("span",{className:"text-red-600",children:"*"})]}):null,t.jsxs("div",{className:"relative",children:[t.jsxs("button",{"aria-label":k,"aria-haspopup":"listbox","aria-expanded":"true","aria-controls":"time-options",className:d(D({className:c})),"data-open":m,onClick:B,children:[b,t.jsx(E,{className:"w-4 h-4 transition-all text-gray-400 data-[open=true]:rotate-180","data-open":m})]}),t.jsx(S,{isOpen:m,scrollBehavior:l,listClassName:r,listItemClassName:i,listItemButtonClassName:s})]}),t.jsx("input",{type:"hidden",name:k,value:b,className:"hidden"})]})};I.__docgenInfo={description:"",methods:[],displayName:"Wrapper"};const H=({format:e="12",...n})=>t.jsx(q,{format:e,children:t.jsx(I,{...n})});H.displayName="KonstructTimePicker";H.__docgenInfo={description:"",methods:[],displayName:"KonstructTimePicker",props:{format:{required:!1,tsType:{name:"union",raw:"'12' | '24'",elements:[{name:"literal",value:"'12'"},{name:"literal",value:"'24'"}]},description:"",defaultValue:{value:"'12'",computed:!1}},scrollBehavior:{required:!1,tsType:{name:"union",raw:"'smooth' | 'auto'",elements:[{name:"literal",value:"'smooth'"},{name:"literal",value:"'auto'"}]},description:""},time:{required:!1,tsType:{name:"Date"},description:""},name:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"string"},description:""}}};export{H as T};
