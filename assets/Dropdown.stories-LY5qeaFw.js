import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as a}from"./iframe-R6RX4IC6.js";import{B as le}from"./Button-BWVXPofe.js";import{M as H}from"./Modal-lKK7OXsK.js";import{u as ie}from"./useToggle-5gmBjjqp.js";import{L as ce}from"./Loading-BWuTQev_.js";import{T as Y}from"./Typography-CBpITUJw.js";import{c as S,a as h}from"./index-Cr-WShRT.js";import{C as de}from"./chevron-up-DuHFXAzc.js";import"./preload-helper-Dp1pzeXC.js";import"./index-G7pYqrZ8.js";import"./index-DIqZCXi7.js";import"./index-evuUrQbD.js";import"./index-0dYZbL4g.js";import"./index-B-JS_tq_.js";import"./Combination-D8lfLvvK.js";import"./x-ChCgqgja.js";import"./index-CslSlgow.js";import"./createLucideIcon-U9oImwRd.js";const Z=a.createContext({isOpen:!1,toggleOpen(){throw new Error("toggleOpen function must be overridden")},value:void 0,setValue(){throw new Error("setValue function must be overridden")},searchTerm:"",setSearchTerm(){throw new Error("setSearchTerm function must be overridden")}}),q=()=>{const o=a.useContext(Z);if(!o)throw new Error("useDropdownContext must be used within a DropdownProvider");return o},ee=({children:o,value:c,name:s,onChange:t,onBlur:r})=>{const[l,u]=ie(!1),[n,i]=a.useState(""),d=a.useCallback(p=>{t==null||t({target:{value:p,name:s??""}}),r==null||r()},[t,s,r]);return e.jsx(Z.Provider,{value:{value:c,isOpen:l,searchTerm:n,setSearchTerm:i,setValue:d,toggleOpen:u},children:o})};ee.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{name:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"DropdownProps['onChange']",raw:"DropdownProps['onChange']"},description:""},onBlur:{required:!1,tsType:{name:"DropdownProps['onBlur']",raw:"DropdownProps['onBlur']"},description:""}}};const ue=({ulRef:o,wrapperRef:c,wrapperInputRef:s})=>{const t=a.useRef(0),{isOpen:r}=q();a.useEffect(()=>{var d,p;const l=((d=o.current)==null?void 0:d.querySelectorAll("li"))??[],u=new AbortController,n=()=>{t.current<l.length-1?(t.current=t.current+1,l[t.current].focus()):(t.current=0,l[0].focus())},i=()=>{var m;t.current>0?(t.current=t.current-1,l[t.current].focus()):(t.current=0,(m=s.current)==null||m.focus())};return(p=o.current)==null||p.addEventListener("keydown",m=>{var g;switch(m.preventDefault(),m.key){case"ArrowDown":{n();break}case"Tab":{m.shiftKey?i():n();break}case"ArrowUp":{t.current===0?(g=s.current)==null||g.focus():i();break}case"Enter":{const b=l[t.current].querySelector("button");b==null||b.click();break}}},{signal:u.signal}),()=>{u.abort()}},[o,t,s]),a.useEffect(()=>{var u;const l=new AbortController;return(u=c.current)==null||u.addEventListener("mouseenter",()=>{var i;(((i=o.current)==null?void 0:i.querySelectorAll("li"))??[]).forEach(d=>d.blur())},{signal:l.signal}),()=>{l.abort()}},[o,c]),a.useEffect(()=>{r||(t.current=0)},[r])},pe=S(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3","hover:bg-slate-50","focus:bg-slate-50","colony:focus:bg-red-100/20","colony:hover:bg-red-100/20","civo:focus:bg-civo-primary/5","civo:hover:bg-civo-primary/5"]),D=({isClickable:o,className:c,...s})=>{const{setValue:t,toggleOpen:r}=q(),l=a.useRef(null),u=a.useCallback(i=>{t(i.value),r(!1)},[t,r]),n=a.useCallback((i,d)=>{i.key==="Enter"&&(i.stopPropagation(),u(d))},[u]);return e.jsxs("li",{ref:l,role:"option",className:h(pe({className:c})),tabIndex:0,onClick:i=>{o&&(u(s),i.stopPropagation())},onKeyDown:i=>n(i,s),children:[s.leftIcon?e.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:s.leftIcon}):null,e.jsx(Y,{variant:"body2",className:"text-zinc-700",children:s.label})]})};D.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},isClickable:{required:!0,tsType:{name:"boolean"},description:""}}};const me=S(["absolute","bg-white","border","duration-100","ease-in-out","flex-col","mt-1","overflow-hidden","rounded-md","shadow-2xs","top-full","transition-all","w-full","z-10","max-h-[185px]","overflow-y-auto","border-gray-200","text-zinc-700","data-[state=open]:block","data-[state=closed]:hidden"]),te=a.forwardRef(({className:o,isLoading:c,itemClassName:s,name:t,options:r,searchable:l=!1,wrapperInputRef:u,wrapperRef:n},i)=>{const d=a.useRef(null),{isOpen:p,searchTerm:m}=q();a.useImperativeHandle(i,()=>d.current,[d]),ue({ulRef:d,wrapperRef:n,wrapperInputRef:u});const g=l?r.filter(x=>{const E=m.toLowerCase();return(typeof x.label=="string"?x.label.toLowerCase():"").includes(E)}):r,b=g.length===0;return e.jsx("ul",{ref:d,title:t,role:"listbox",className:h(me({className:o})),"data-state":p?"open":"closed",children:c?e.jsx(D,{className:s,isClickable:!1,value:"Loading...",label:"Loading..."}):b?e.jsx(D,{className:s,isClickable:!1,value:"No options",label:"No options"}):g.map(x=>e.jsx(D,{className:s,isClickable:!0,...x},x.value))})});te.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},itemClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!0,tsType:{name:"boolean"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const fe=S(["border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none","h-9","border-gray-200","aria-expanded:border-kubefirst-primary","aria-expanded:text-kubefirst-secondary","focus-visible:bg-zinc-50","colony:aria-expanded:border-red-400","colony:aria-expanded:text-red-400","civo:aria-expanded:border-civo-primary","civo:aria-expanded:text-civo-primary"],{variants:{hasError:{true:["border-red-600","text-red-600","colony:aria-expanded:border-red-600","colony:aria-expanded:text-red-600","civo:aria-expanded:border-red-600","civo:aria-expanded:text-red-600"],false:""}},defaultVariants:{hasError:!1}}),ge=S(["mb-1","cursor-pointer","text-[14px]","leading-[20px]","tracking-[0.1px]"]),ve=({ulRef:o})=>{const c=a.useRef(null),s=a.useRef(null),{isOpen:t,toggleOpen:r}=q();a.useEffect(()=>{var p;const n=new AbortController,i=m=>{m.key==="Escape"&&r(!1)},d=m=>{var g;(g=c.current)!=null&&g.contains(m.target)||r(!1)};return document.addEventListener("keydown",i,{signal:n.signal}),document.addEventListener("mousedown",d,{signal:n.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&r(!1)},{signal:n.signal}),(p=s.current)==null||p.addEventListener("focus",()=>{r(!0)},{signal:n.signal}),()=>{n.abort()}},[r,c]),a.useEffect(()=>{var i;const n=new AbortController;return(i=s.current)==null||i.addEventListener("keydown",d=>{var p;if(d.key==="ArrowDown"){const m=(p=o.current)==null?void 0:p.querySelector("li");m&&m.focus()}},{signal:n.signal}),()=>{n.abort()}},[s,o]);const l=a.useCallback(()=>r(!0),[r]),u=a.useCallback(()=>{t||r(!1)},[t,r]);return{wrapperRef:c,wrapperInputRef:s,handleOpen:l,handleOpenIfClosed:u}},ae=a.forwardRef(({className:o,defaultValue:c,error:s,iconClassName:t,isLoading:r,label:l,labelClassName:u,listClassName:n,listItemClassName:i,name:d,options:p,placeholder:m,isRequired:g,searchable:b=!1,theme:x,wrapperClassName:E,onBlur:N},re)=>{const P=a.useId(),C=a.useRef(null),_=a.useRef(null),{wrapperRef:T,wrapperInputRef:A,handleOpen:z,handleOpenIfClosed:se}=ve({ulRef:_}),{isOpen:V,searchTerm:ne,value:w,toggleOpen:F,setValue:K,setSearchTerm:M}=q(),j=d?`${P}-${d}`:P;a.useImperativeHandle(re,()=>C.current,[C]);const f=a.useMemo(()=>p.find(({value:v})=>v===w),[p,w]);a.useEffect(()=>{C.current&&(C.current.value=w?f==null?void 0:f.value:"")},[f,w]),a.useEffect(()=>{if(c&&!w){const v=p&&p.find(y=>y.value===c);v&&K(v.value)}},[c,p,K,w]),a.useEffect(()=>{var y;const v=new AbortController;return(y=T.current)==null||y.addEventListener("focusout",I=>{var U,$;const L=I.relatedTarget;(!L||!((U=T.current)!=null&&U.contains(L)))&&(F(!1),M(""),($=C.current)!=null&&$.value||N==null||N())}),()=>{v.abort()}},[F,T,M,N,w]);const oe=v=>{const y=v.target.value;M(y);const I=p.find(L=>L.value.toLocaleLowerCase()===y.toLocaleLowerCase());I&&K(I.value)};return e.jsxs("div",{ref:T,className:h("flex flex-col w-full relative",E),"data-theme":x,children:[l?e.jsxs("label",{id:j,className:h(ge({className:u})),htmlFor:j,onClick:se,children:[l,g?e.jsx("span",{className:"text-red-600 ml-1",children:"*"}):null]}):null,e.jsxs("div",{ref:A,id:j,className:h(fe({className:o,hasError:!!s})),role:"combobox",onClick:z,"aria-expanded":V,tabIndex:0,"aria-labelledby":j,children:[e.jsxs("div",{className:"flex gap-3 items-center flex-1",children:[(f==null?void 0:f.leftIcon)&&e.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:f.leftIcon}),b?e.jsx("input",{type:"text",value:V?ne:(f==null?void 0:f.label)||"",onChange:oe,placeholder:m,className:h("flex-1 bg-transparent border-none outline-none text-zinc-700 text-base",{"text-red-700 placeholder:text-red-700":!!s}),onClick:v=>{v.stopPropagation(),z()},"aria-label":l||m,"aria-labelledby":j}):e.jsx(Y,{variant:"body2",className:h("flex-1 text-zinc-700 text-base",{"text-red-700":!!s}),children:(f==null?void 0:f.label)||m})]}),r?e.jsx(ce,{className:"w-4 h-4 text-zinc-500"}):e.jsx(de,{"data-state":V?"open":"closed",className:h("w-4 h-4 text-zinc-500 transition-all duration-50 data-[state=open]:rotate-0 data-[state=closed]:rotate-180",t,{"text-red-700":!!s})})]}),e.jsx("input",{ref:C,type:"text",name:d,className:"hidden","aria-hidden":"true",required:g}),e.jsx(te,{ref:_,className:n,itemClassName:i,name:d,wrapperRef:T,wrapperInputRef:A,options:p,isLoading:!!r,searchable:b})]})});ae.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{searchable:{defaultValue:{value:"false",computed:!1},required:!1}}};const k=a.forwardRef(({onChange:o,onBlur:c,value:s,error:t,helperText:r,name:l,...u},n)=>e.jsx(ee,{onChange:o,onBlur:c,value:s,name:l,children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(ae,{name:l,error:t,ref:n,onBlur:c,...u}),t?e.jsx("span",{className:"text-xs text-red-700",children:t}):null,!t&&r?e.jsx("span",{className:"text-xs text-slate-600",children:r}):null]})}));k.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{className:{required:!1,tsType:{name:"string"},description:""},error:{required:!1,tsType:{name:"string"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},iconClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},isRequired:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'colony'
| 'civo'
| 'kubefirst-dark'
| 'colony-dark'
| 'civo-dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'colony'"},{name:"literal",value:"'civo'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'colony-dark'"},{name:"literal",value:"'civo-dark'"},{name:"undefined"}]},description:""},value:{required:!1,tsType:{name:"string"},description:""},wrapperClassName:{required:!1,tsType:{name:"string"},description:""},onBlur:{required:!1,tsType:{name:"VoidFunction"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { target: { value: string; name: string } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: string; name: string } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""}},composes:["VariantProps","Omit"]};const Ke={title:"In Review/Dropdown",component:k},O={args:{options:[{label:"Talos",value:"talos",leftIcon:e.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:e.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option...",required:!1,labelClassName:"",isLoading:!1,name:"dropdown"},render:o=>{const[c,s]=a.useState(),[t,r]=a.useState(),[l,u]=a.useState();return e.jsxs("div",{className:"max-w-[350px] flex flex-col gap-6",children:[e.jsx(k,{label:"Dropdown with Kubefirst theme",onChange:({target:{value:n}})=>s(n),value:c,searchable:!0,...o}),e.jsx(k,{label:"Dropdown with Colony theme",onChange:({target:{value:n}})=>r(n),theme:"colony",value:t,searchable:!0,...o}),e.jsx(k,{label:"Dropdown with Civo theme",onChange:({target:{value:n}})=>u(n),theme:"civo",value:l,searchable:!1,...o})]})}},R={render:()=>{const[o,c]=a.useState(!1),[s,t]=a.useState();return e.jsxs("div",{children:[e.jsx(le,{onClick:()=>c(!0),theme:"kubefirst",children:"Open Modal with Dropdown"}),e.jsx(H,{isOpen:o,onClose:()=>c(!1),theme:"kubefirst",className:"min-h-[100px]",children:e.jsx(H.Body,{children:e.jsx("div",{className:"p-6",children:e.jsx(k,{label:"Choose your distribution",options:[{label:"Talos",value:"talos",leftIcon:e.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:e.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option...",onChange:({target:{value:r}})=>{console.log("value",r),t(r)},value:s,theme:"kubefirst",name:"modal-dropdown"})})})})]})}};var W,B,G;O.parameters={...O.parameters,docs:{...(W=O.parameters)==null?void 0:W.docs,source:{originalSource:`{
  args: {
    options: [{
      label: 'Talos',
      value: 'talos',
      leftIcon: <img src="./talos.svg" alt="Talos Logo" />
    }, {
      label: 'K3S',
      value: 'k3s',
      leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
    }],
    placeholder: 'Select an option...',
    required: false,
    labelClassName: '',
    isLoading: false,
    name: 'dropdown'
  },
  render: args => {
    const [value1, setValue1] = useState<string>();
    const [value2, setValue2] = useState<string>();
    const [value3, setValue3] = useState<string>();
    return <div className="max-w-[350px] flex flex-col gap-6">
        <DropdownComponent label="Dropdown with Kubefirst theme" onChange={({
        target: {
          value
        }
      }) => setValue1(value)} value={value1} searchable={true} {...args} />

        <DropdownComponent label="Dropdown with Colony theme" onChange={({
        target: {
          value
        }
      }) => setValue2(value)} theme="colony" value={value2} searchable={true} {...args} />

        <DropdownComponent label="Dropdown with Civo theme" onChange={({
        target: {
          value
        }
      }) => setValue3(value)} theme="civo" value={value3} searchable={false} {...args} />
      </div>;
  }
} satisfies Story`,...(G=(B=O.parameters)==null?void 0:B.docs)==null?void 0:G.source}}};var J,Q,X;R.parameters={...R.parameters,docs:{...(J=R.parameters)==null?void 0:J.docs,source:{originalSource:`{
  render: () => {
    const [isOpen, setIsOpen] = useState(false);
    const [value, setValue] = useState<string>();
    return <div>
        <Button onClick={() => setIsOpen(true)} theme="kubefirst">
          Open Modal with Dropdown
        </Button>

        <Modal isOpen={isOpen} onClose={() => setIsOpen(false)} theme="kubefirst" className="min-h-[100px]">
          <Modal.Body>
            <div className="p-6">
              <DropdownComponent label="Choose your distribution" options={[{
              label: 'Talos',
              value: 'talos',
              leftIcon: <img src="./talos.svg" alt="Talos Logo" />
            }, {
              label: 'K3S',
              value: 'k3s',
              leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
            }]} placeholder="Select an option..." onChange={({
              target: {
                value
              }
            }) => {
              console.log('value', value);
              setValue(value);
            }} value={value} theme="kubefirst" name="modal-dropdown" />
            </div>
          </Modal.Body>
        </Modal>
      </div>;
  }
} satisfies Story`,...(X=(Q=R.parameters)==null?void 0:Q.docs)==null?void 0:X.source}}};const Me=["Dropdown","DropdownInModal"];export{O as Dropdown,R as DropdownInModal,Me as __namedExportsOrder,Ke as default};
