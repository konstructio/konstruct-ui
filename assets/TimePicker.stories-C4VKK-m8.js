import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as i}from"./iframe-CelO_bQr.js";import{c as y,a as p}from"./index-DJQVxuCM.js";import{C as V}from"./chevron-down-B8i8ZMyU.js";import"./createLucideIcon-CcnLTaVp.js";const O=(t,l)=>l==="12"?`${t.getHours()%12||12}:${t.getMinutes().toString().padStart(2,"0")} ${t.getHours()>=12?"PM":"AM"}`:`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`,F=t=>t.getHours(),W=t=>t.getMinutes(),B=i.createContext({time:new Date,format:"12",formattedTime:"",isAM:!1,onSelectHour(){throw new Error("onSelectHour is not implemented")},onSelectMinute(){throw new Error("onSelectMinute is not implemented")},onSelectAM(){throw new Error("onSelectAM is not implemented")},onSelectPM(){throw new Error("onSelectPM is not implemented")}}),A=({children:t,time:l,format:d})=>{const[c,m]=i.useState(d),[r,o]=i.useState(()=>l??new Date),s=i.useMemo(()=>r.getHours()<12,[r]),a=i.useCallback(f=>{const b=new Date(r);c==="12"?f===12?b.setHours(s?0:12):b.setHours(s?f:f+12):b.setHours(f),o(b)},[c,s,r]),u=i.useCallback(f=>{const b=new Date(r);b.setMinutes(f),o(b)},[r]),n=i.useCallback(()=>{const f=new Date(r),b=f.getHours();s||f.setHours(b-12),o(f)},[s,r]),T=i.useCallback(()=>{const f=new Date(r),b=f.getHours();s&&f.setHours(b+12),o(f)},[s,r]);return i.useEffect(()=>{m(c)},[c]),e.jsx(B.Provider,{value:{time:r,format:c,formattedTime:O(r,c),isAM:s,onSelectHour:a,onSelectMinute:u,onSelectAM:n,onSelectPM:T},children:t})};A.__docgenInfo={description:"",methods:[],displayName:"TimePickerProvider",props:{time:{required:!1,tsType:{name:"Date"},description:""},format:{required:!0,tsType:{name:"NonNullable",elements:[{name:"intersection['format']",raw:"TimePickerProps['format']"}],raw:"NonNullable<TimePickerProps['format']>"},description:""}}};const P=()=>{const t=i.useContext(B);if(!t)throw new Error("useTimePickerContext must be used within a TimePickerProvider");return t},z=y(["border","rounded","p-[0.625rem]","w-full","flex","items-center","justify-between","border-gray-300","cursor-pointer","transition-all","transition-duration-100","data-[open=true]:border-blue-primary","data-[open=true]:border-civo-primary","text-sm"]),k=y(["snap-y","snap-mandatory","overflow-y-scroll","scrollbar-none","flex","flex-col"]),N=y(["w-[60px]","h-[40px]","snap-start","rounded","transition-all","transition-duration-100","focus-within:outline-2","border-2","border-transparent","outline-none","hover:bg-gray-100","hover:border-2","hover:border-white","data-[active=true]:bg-blue-600","data-[active=true]:hover:border-blue-200","data-[active=true]:text-white","data-[active=true]:font-medium","focus-visible:border-blue-200","focus-within:border-blue-200"]),w=y(["flex","items-center","justify-center","cursor-pointer","w-full","h-full","px-6","py-3","outline-none","focus:border-blue-200","text-sm"]),M=({hours:t,scrollBehavior:l})=>{const d=i.useRef(null),c=i.useRef(!0),{format:m,onSelectHour:r}=P(),o=m==="12"&&t>=12?t-12:t,s=i.useCallback((a,u)=>{var n;(n=a.currentTarget)==null||n.blur(),r(u)},[r]);if(i.useEffect(()=>{if(c.current){const a=d.current,u=o===0&&m==="12"?12:o;if(a){const n=a.querySelector(`[data-value="${`0${u}`.slice(-2)}"]`);n==null||n.scrollIntoView({behavior:l,block:"center"})}c.current=!1}},[m,o,l]),m==="12"){const a=o===0?12:o;return e.jsx("ul",{ref:d,className:p(k()),"aria-label":"hours",role:"listbox",children:Array.from({length:12},(u,n)=>e.jsx("li",{className:p(N()),"data-value":`0${n+1}`.slice(-2),"data-active":a-1===n,role:"presentation",children:e.jsx("button",{type:"button",role:"option",className:p(w()),onClick:T=>s(T,n+1),children:n+1})},n))})}return e.jsx("ul",{ref:d,className:p(k()),"aria-label":"hours",role:"listbox",children:Array.from({length:24},(a,u)=>e.jsx("li",{className:p(N()),"data-value":`0${u}`.slice(-2),"data-active":t===u,role:"presentation",children:e.jsx("button",{type:"button",role:"option",className:p(w()),onClick:n=>s(n,u),children:u})},u))})};M.displayName="HoursList";M.__docgenInfo={description:"",methods:[],displayName:"HoursList",props:{hours:{required:!0,tsType:{name:"number"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const j=({listClassName:t,listItemClassName:l,listItemButtonClassName:d})=>{const{format:c,isAM:m,onSelectAM:r,onSelectPM:o}=P(),s=i.useCallback((a,u)=>{var n;(n=a.currentTarget)==null||n.blur(),u()},[]);return c==="24"?null:e.jsxs("ul",{className:p("flex items-center justify-center flex-col",t),"aria-label":"meridian",role:"listbox",children:[e.jsx("li",{className:p(N({className:l})),"data-active":m,role:"presentation",children:e.jsx("button",{type:"button",role:"option",className:p(w({className:d})),onClick:a=>s(a,r),children:"AM"})}),e.jsx("li",{className:p(N({className:l})),"data-active":!m,role:"presentation",children:e.jsx("button",{type:"button",role:"option",className:p(w({className:d})),onClick:a=>s(a,o),children:"PM"})})]})};j.displayName="MeridianList";j.__docgenInfo={description:"",methods:[],displayName:"MeridianList",props:{listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const q=({minutes:t,scrollBehavior:l})=>{const d=i.useRef(null),c=i.useRef(t),{onSelectMinute:m}=P();i.useEffect(()=>{const o=d.current;if(o){const s=`0${c.current}`.slice(-2),a=o.querySelector(`[data-value="${s}"]`);a==null||a.scrollIntoView({behavior:l,block:"center"})}},[l]);const r=i.useCallback((o,s)=>{var a;m(o),(a=s.currentTarget)==null||a.blur()},[m]);return e.jsx("ul",{ref:d,className:p(k()),"aria-label":"minutes",role:"listbox",children:Array.from({length:60},(o,s)=>e.jsx("li",{className:p(N()),"data-value":`0${s}`.slice(-2),"data-active":t===s,role:"presentation",children:e.jsx("button",{type:"button",role:"option",className:p(w()),onClick:a=>r(s,a),children:`0${s}`.slice(-2)})},s))})};q.displayName="MinutesList";q.__docgenInfo={description:"",methods:[],displayName:"MinutesList",props:{minutes:{required:!0,tsType:{name:"number"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const K=y(["flex","gap-1.5","p-2","rounded-md","shadow","w-full","max-h-[216px]","absolute mt-1","bg-white","z-10"]),E=({isOpen:t,scrollBehavior:l,listClassName:d,listItemClassName:c,listItemButtonClassName:m})=>{const{time:r}=P(),o=i.useMemo(()=>F(r),[r]),s=i.useMemo(()=>W(r),[r]);return t?e.jsxs("div",{role:"group",className:p(K()),children:[e.jsx(M,{hours:o,scrollBehavior:l,listClassName:d,listItemClassName:c,listItemButtonClassName:m}),e.jsx(q,{minutes:s,scrollBehavior:l,listClassName:d,listItemClassName:c,listItemButtonClassName:m}),e.jsx(j,{listClassName:d,listItemClassName:c,listItemButtonClassName:m})]}):null};E.__docgenInfo={description:"",methods:[],displayName:"WrapperList",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const $=({name:t,label:l,required:d,scrollBehavior:c,className:m,listClassName:r,listItemClassName:o,listItemButtonClassName:s})=>{const a=i.useId(),[u,n]=i.useState(!1),T=i.useRef(null),{format:f,formattedTime:b}=P(),v=t??`time-${a}`,L=i.useCallback(()=>n(h=>!h),[]);return i.useEffect(()=>{const h=new AbortController,R=g=>{g.key==="Escape"&&n(!1)},D=g=>{var S;(S=T.current)!=null&&S.contains(g.target)||n(!1)};return document.addEventListener("mousedown",D,{signal:h.signal}),document.addEventListener("keydown",R,{signal:h.signal}),()=>{h.abort()}},[]),e.jsxs("div",{ref:T,className:p("w-max text-slate-800 text-sm flex flex-col gap-2",f==="12"?"w-[208px]":"w-[140px]"),children:[l?e.jsxs("label",{htmlFor:v,className:"text-slate-500 font-medium",children:[l," ",d&&e.jsx("span",{className:"text-red-600",children:"*"})]}):null,e.jsxs("div",{className:"relative",children:[e.jsxs("button",{"aria-label":v,"aria-haspopup":"listbox","aria-expanded":"true","aria-controls":"time-options",className:p(z({className:m})),"data-open":u,onClick:L,children:[b,e.jsx(V,{className:"w-4 h-4 transition-all text-gray-400 data-[open=true]:rotate-180","data-open":u})]}),e.jsx(E,{isOpen:u,scrollBehavior:c,listClassName:r,listItemClassName:o,listItemButtonClassName:s})]}),e.jsx("input",{type:"hidden",name:v,value:b,className:"hidden"})]})};$.__docgenInfo={description:"",methods:[],displayName:"Wrapper"};const x=({format:t="12",...l})=>e.jsx(A,{format:t,children:e.jsx($,{...l})});x.displayName="TimePicker";x.__docgenInfo={description:"",methods:[],displayName:"TimePicker",props:{format:{required:!1,tsType:{name:"union",raw:"'12' | '24'",elements:[{name:"literal",value:"'12'"},{name:"literal",value:"'24'"}]},description:"",defaultValue:{value:"'12'",computed:!1}},scrollBehavior:{required:!1,tsType:{name:"union",raw:"'smooth' | 'auto'",elements:[{name:"literal",value:"'smooth'"},{name:"literal",value:"'auto'"}]},description:""},time:{required:!1,tsType:{name:"Date"},description:""},name:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"string"},description:""}}};const Y={title:"In Review/TimePicker",component:x},C={render:()=>e.jsxs("div",{className:"max-w-[350px] flex flex-col gap-2",children:[e.jsx(x,{name:"time-12",label:"Time 12 format",required:!0}),e.jsx(x,{name:"time-24",label:"Time 24 format",format:"24",required:!0})]})};var I,H,_;C.parameters={...C.parameters,docs:{...(I=C.parameters)==null?void 0:I.docs,source:{originalSource:`{
  render: () => <div className="max-w-[350px] flex flex-col gap-2">
      <TimePickerComponent name="time-12" label="Time 12 format" required />

      <TimePickerComponent name="time-24" label="Time 24 format" format="24" required />
    </div>
}`,...(_=(H=C.parameters)==null?void 0:H.docs)==null?void 0:_.source}}};const Z=["TimePicker"];export{C as TimePicker,Z as __namedExportsOrder,Y as default};
