import{j as i}from"./jsx-runtime-D_zvdyIk.js";import{r as n}from"./iframe-BT5zlg0t.js";import{c as h,f as N,a as v}from"./index-CJCZd66Q.js";import"./preload-helper-PPVm8Dsz.js";const O=h(["flex","w-full","rounded-md","border","border-zinc-200","bg-transparent","text-zinc-700","transition-colors","placeholder:text-muted-foreground","focus-visible:outline-none","focus-visible:ring-1","focus-visible:ring-ring","disabled:cursor-not-allowed","disabled:opacity-50","shadow-2xs","py-1","px-2","focus:ring-aurora-500","kubefirst:focus:ring-kubefirst-primary"]),q=h(["pl-1","mb-2","text-base","cursor-pointer"]),A=({options:r,inputRef:a,wrapperRef:l,onChange:u})=>{const[t,s]=n.useState(()=>r??[]),[c,o]=n.useState(!1),[d,m]=n.useState("");n.useEffect(()=>{const e=new AbortController;return a.current?.addEventListener("focus",()=>o(!0),{signal:e.signal}),()=>{e.abort()}},[a]),n.useEffect(()=>{const e=new AbortController,f=g=>{g.key==="Escape"&&(o(!1),a.current?.blur())},p=g=>{l.current?.contains(g.target)||o(!1)};return document.addEventListener("keydown",f,{signal:e.signal}),document.addEventListener("mousedown",p,{signal:e.signal}),()=>{e.abort()}},[a,l]),n.useEffect(()=>{const e=new AbortController;return l.current?.addEventListener("focusout",f=>{l.current?.contains(f.relatedTarget)||o(!1)},{signal:e.signal}),()=>{e.abort()}},[l]);const b=n.useCallback(e=>{if(e.length===0)s(r);else{const f=r.map(({value:g})=>g),p=N(f,e).map(g=>({value:g}));s(p)}},[r]),k=n.useCallback(e=>{m(e.target.value),b(e.target.value),u?.(e.target.value)},[b,u]),y=n.useCallback(e=>{m(e),b(e),u?.(e),o(!1)},[b,u]);return{inputRef:a,newOptions:t,showOptions:c,value:d,handleChange:k,handleSelectValue:y}},E=({ulRef:r,inputRef:a,wrapperRef:l,options:u})=>{const t=n.useRef(0);n.useEffect(()=>{const s=r.current?.querySelectorAll("li")??[],c=new AbortController,o=()=>{t.current<s.length-1?(t.current=t.current+1,s[t.current].focus()):(t.current=0,s[0].focus())},d=()=>{t.current>0?(t.current=t.current-1,s[t.current].focus()):(t.current=0,a.current?.focus())};return r.current?.addEventListener("keydown",m=>{switch(m.preventDefault(),m.key){case"ArrowDown":{o();break}case"Tab":{m.shiftKey?d():o();break}case"ArrowUp":{t.current===0?a.current?.focus():d();break}case"Enter":{s[t.current].querySelector("button")?.click();break}}},{signal:c.signal}),()=>{c.abort()}},[a,r,u,t]),n.useEffect(()=>{const s=new AbortController;return a.current?.addEventListener("keydown",c=>{if(c.key==="ArrowDown"){const o=r.current?.querySelector("li");o&&o.focus()}},{signal:s.signal}),()=>{s.abort()}},[a,r,u]),n.useEffect(()=>{const s=new AbortController;return l.current?.addEventListener("mouseenter",()=>{(r.current?.querySelectorAll("li")??[]).forEach(o=>o.blur())},{signal:s.signal}),()=>{s.abort()}},[r,l])},j=h(["max-h-[250px]","overflow-y-auto","bg-white"]),T=h(["p-1","text-center","w-full","block","bg-white"]),V=h(["focus-visible:outline-none","kubefirst:focus:bg-purple-100","kubefirst:hover:bg-purple-100","border-transparent","focus:bg-aurora-50","hover:bg-aurora-50"]),S=h(["cursor-pointer","focus-visible:outline-none","px-3","py-1.5","w-full","text-left","focus:bg-aurora-50","hover:bg-aurora-50","kubefirst:focus:bg-purple-100","kubefirst:hover:bg-purple-100"]),C=({className:r,inputRef:a,options:l,placeholder:u,placeholderClassName:t,wrapperRef:s,onClick:c})=>{const o=n.useRef(null);return E({ulRef:o,inputRef:a,wrapperRef:s,options:l}),l.length===0?i.jsx("span",{className:v(T({className:t})),children:u}):i.jsx("ul",{ref:o,role:"listbox",className:v(j({className:r})),children:l.map(({value:d})=>i.jsx("li",{role:"option",tabIndex:0,className:v(V()),children:i.jsx("button",{type:"button",role:"button",className:v(S()),onClick:()=>c(d),children:d})},d))})};C.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},inputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'input'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'input'"}],raw:"ComponentRef<'input'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'input'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},placeholderClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["VariantProps"]};const w=n.forwardRef(({autoComplete:r="off",className:a,label:l,labelClassName:u,name:t,options:s,placeholder:c,placeHolderEmptyValues:o="No values...",placeHolderEmptyValuesClassName:d,theme:m,onChange:b},k)=>{const y=n.useRef(null),e=n.useRef(null),f=n.useId();n.useImperativeHandle(k,()=>e.current,[e]);const p=A({options:s,inputRef:e,wrapperRef:y,onChange:b});return i.jsxs("div",{ref:y,className:"relative flex flex-col","data-theme":m,children:[l?i.jsx("label",{htmlFor:t??f,className:v(q({className:u})),children:l}):null,i.jsx("input",{ref:e,id:l?t??f:void 0,type:"text",name:t,role:"combobox",autoComplete:r,className:v(O({className:a})),onChange:p.handleChange,value:p.value,placeholder:c,"aria-expanded":p.showOptions?"true":"false"}),p.showOptions&&i.jsx("div",{className:"absolute z-10 top-full w-full rounded-md mt-1 border shadow-sm border-zinc-200 overflow-hidden",children:i.jsx(C,{className:a,inputRef:e,wrapperRef:y,options:p.newOptions,placeholder:o,placeholderClassName:d,onClick:p.handleSelectValue})})]})});w.displayName="Autocomplete";w.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{autoComplete:{required:!1,tsType:{name:"literal",value:"'off'"},description:"",defaultValue:{value:"'off'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},placeHolderEmptyValues:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:"",defaultValue:{value:"'No values...'",computed:!1}},placeHolderEmptyValuesClassName:{required:!1,tsType:{name:"string"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'light'
| 'kubefirst-dark'
| 'dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'light'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'dark'"},{name:"undefined"}]},description:""}},composes:["VariantProps"]};const z={title:"In Review/Autocomplete",component:w},x={args:{placeholder:"Search...",options:[{value:"Option 1"},{value:"Option 2"},{value:"Option 3"},{value:"Option 4"},{value:"Option 5"},{value:"Option 6"}]},render:r=>i.jsxs("div",{className:"w-[350px] flex flex-col gap-3",children:[i.jsx(w,{label:"Kubefirst colors",theme:"kubefirst",...r}),i.jsx(w,{label:"Civo colors",...r})]})};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  args: {
    placeholder: 'Search...',
    options: [{
      value: 'Option 1'
    }, {
      value: 'Option 2'
    }, {
      value: 'Option 3'
    }, {
      value: 'Option 4'
    }, {
      value: 'Option 5'
    }, {
      value: 'Option 6'
    }]
  },
  render: args => <div className="w-[350px] flex flex-col gap-3">
      <AutocompleteComponent label="Kubefirst colors" theme="kubefirst" {...args} />
      <AutocompleteComponent label="Civo colors" {...args} />
    </div>
}`,...x.parameters?.docs?.source}}};const K=["Autocomplete"];export{x as Autocomplete,K as __namedExportsOrder,z as default};
