import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as t}from"./iframe-BkvQULOn.js";import{u as Z}from"./useToggle-CWCfw80e.js";import{L as ee}from"./Loading-DSjQvI5J.js";import{T as $}from"./Typography-QB4KTuU-.js";import{c as E,a as h}from"./index-CJCZd66Q.js";import{S as te}from"./index-DcJrRpPv.js";import{c as U}from"./createLucideIcon-8S88pdq4.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ne=U("chevron-up",re);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],se=U("search",ae),B=t.createContext({highlightSearchEnabled:!1,isOpen:!1,searchTerm:"",value:void 0,setSearchTerm(){throw new Error("setSearchTerm function must be overridden")},setValue(){throw new Error("setValue function must be overridden")},toggleOpen(){throw new Error("toggleOpen function must be overridden")}}),L=()=>{const u=t.useContext(B);if(!u)throw new Error("useDropdownContext must be used within a DropdownProvider");return u},H=({children:u,value:p,name:l,highlightSearch:a=!1,onChange:s,onBlur:n})=>{const i=t.useRef(a),[c,o]=Z(!1),[d,x]=t.useState(""),f=t.useCallback((r,m)=>{m?.current&&(m.current.value=r),s?.({target:{value:r,name:l??""}}),n?.()},[s,l,n]);return e.jsx(B.Provider,{value:{highlightSearchEnabled:i.current,isOpen:c,searchTerm:d,value:p,setSearchTerm:x,setValue:f,toggleOpen:o},children:u})};H.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{highlightSearch:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},name:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"intersection['onChange']",raw:"DropdownProps['onChange']"},description:""},onBlur:{required:!1,tsType:{name:"intersection['onBlur']",raw:"DropdownProps['onBlur']"},description:""}}};const le=({inputRef:u,searchable:p,ulRef:l,wrapperInputRef:a,wrapperRef:s})=>{const n=t.useRef(0),{isOpen:i}=L();t.useEffect(()=>{const c=l.current?.querySelectorAll("li")??[],o=Array.from(c).filter(r=>r.getAttribute("data-action")!=="true"),d=new AbortController,x=()=>{n.current<o.length-1?(n.current=n.current+1,o[n.current].focus()):(n.current=0,o[0].focus())},f=()=>{n.current>0?(n.current=n.current-1,o[n.current].focus()):(n.current=0,u?.current&&p?u.current.focus():a.current?.focus())};return l.current?.addEventListener("keydown",r=>{switch(r.preventDefault(),r.key){case"ArrowDown":{x();break}case"Tab":{r.shiftKey?f():x();break}case"ArrowUp":{n.current===0?a.current?.focus():f();break}case"Enter":{o[n.current]?.click();break}}},{signal:d.signal}),()=>{d.abort()}},[l,n,a,u,p]),t.useEffect(()=>{const c=new AbortController;return s.current?.addEventListener("mouseenter",()=>{(l.current?.querySelectorAll("li")??[]).forEach(d=>d.blur())},{signal:c.signal}),()=>{c.abort()}},[l,s]),t.useEffect(()=>{i||(n.current=0)},[i])},ie=E(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3","transition-bg","duration-250","hover:bg-gray-50","focus:bg-gray-50","dark:hover:bg-slate-700","dark:focus:bg-slate-700"]),O=({isClickable:u,className:p,inputRef:l,...a})=>{const{searchTerm:s,highlightSearchEnabled:n,setValue:i,toggleOpen:c}=L(),o=t.useRef(null),d=t.useCallback(r=>{i(r.value,l),c(!1)},[i,c]),x=t.useCallback((r,m)=>{r.key==="Enter"&&(r.stopPropagation(),d(m))},[d]),f=t.useCallback(r=>{if(typeof r!="string")return r;const m=n&&s.length>0?r.split(new RegExp(`(${s})`,"gi")).map(g=>g.toLowerCase()===s.toLowerCase()?e.jsx("mark",{className:"bg-transparent font-semibold text-slate-800 dark:text-slate-50",children:g},g):g):[r];return e.jsx($,{variant:"body2",className:"text-zinc-700 dark:text-slate-50",children:m})},[n,s]);return e.jsxs("li",{ref:o,role:"option","data-action":"false",className:h(ie({className:p})),tabIndex:0,onClick:r=>{u&&(d(a),r.stopPropagation())},onKeyDown:r=>x(r,a),children:[a.leftIcon?e.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:a.leftIcon}):null,f(a.label)]})};O.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},isClickable:{required:!0,tsType:{name:"boolean"},description:""},inputRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'input'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'input'"}],raw:"ComponentRef<'input'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'input'> | null>"},description:""}}};const oe=E(["absolute","bg-white","border","flex-col","mt-1","overflow-hidden","rounded-md","shadow-2xs","top-full","w-full","z-10","max-h-[185px]","overflow-y-auto","border-gray-200","text-zinc-700","animate-in","fade-in-50","zoom-in-95","duration-[200ms]","dark:bg-slate-800","dark:border-slate-700","dark:text-slate-50"]),M=t.forwardRef(({additionalOptions:u,className:p,inputRef:l,isLoading:a,itemClassName:s,name:n,options:i,searchable:c=!1,wrapperInputRef:o,wrapperRef:d},x)=>{const f=t.useRef(null),{isOpen:r,searchTerm:m}=L();t.useImperativeHandle(x,()=>f.current,[f]),le({ulRef:f,wrapperRef:d,wrapperInputRef:o,inputRef:l,searchable:c});const g=c?i.filter(b=>{const T=m.toLowerCase();return(typeof b.label=="string"?b.label.toLowerCase():"").includes(T)}):i,N=g.length===0;return e.jsx("ul",{ref:f,title:n,role:"listbox",className:h(oe({className:p})),"data-state":r?"open":"closed",children:a?e.jsx(O,{className:h("select-none",s),isClickable:!1,inputRef:l,value:"Loading...",label:"Loading..."}):N?e.jsx(O,{className:h("select-none",s),isClickable:!1,inputRef:l,value:"No options",label:"No options"}):e.jsxs(e.Fragment,{children:[g.map(b=>e.jsx(O,{className:h("select-none",s),isClickable:!0,inputRef:l,...b},b.value)),u?.map((b,T)=>e.jsx("li",{role:"option","data-action":"true",children:e.jsx(te,{className:"flex p-2 w-full h-full gap-1 items-center text-sm [&>svg]:w-3.5 [&>svg]:h-3.5 [&>svg]:shrink-0 cursor-pointer select-none hover:bg-gray-50 hover:dark:bg-slate-700 focus:outline-0",children:b})},T))]})})});M.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},inputRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'input'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'input'"}],raw:"ComponentRef<'input'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'input'> | null>"},description:""},isLoading:{required:!0,tsType:{name:"boolean"},description:""},itemClassName:{required:!1,tsType:{name:"string"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const ce=E(["group","border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none","h-9","border-gray-200","focus-visible:bg-zinc-50","aria-expanded:border-aurora-500","aria-expanded:text-aurora-500","kubefirst:aria-expanded:border-kubefirst-primary","kubefirst:aria-expanded:text-kubefirst-secondary","dark:border-slate-600","dark:focus-visible:bg-slate-800"],{variants:{hasError:{true:["aria-expanded:border-red-600","aria-expanded:text-red-600","kubefirst:border-red-600","kubefirst:text-red-600"],false:""}},defaultVariants:{hasError:!1}}),ue=E(["flex-1","bg-transparent","border-none","outline-none","text-zinc-700","text-sm","capitalize","placeholder:text-sm","placeholder:normal-case","placeholder:select-none","dark:placeholder:text-slate-400","dark:text-slate-50"]),de=E(["mb-1","cursor-pointer","text-sm","leading-[20px]","tracking-[0.1px]","dark:text-slate-50"]),me=({ulRef:u,inputRef:p})=>{const l=t.useRef(null),a=t.useRef(null),{toggleOpen:s}=L();t.useEffect(()=>{const i=new AbortController,c=d=>{d.key==="Escape"&&s(!1)},o=d=>{l.current?.contains(d.target)||s(!1)};return document.addEventListener("keydown",c,{signal:i.signal}),document.addEventListener("mousedown",o,{signal:i.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&s(!1)},{signal:i.signal}),a.current?.addEventListener("focus",()=>{s(!0)},{signal:i.signal}),()=>{i.abort()}},[s,l]),t.useEffect(()=>{const i=new AbortController;return a.current?.addEventListener("keydown",c=>{if(c.key==="ArrowDown"){const o=u.current?.querySelector("li");o&&o.focus()}},{signal:i.signal}),()=>{i.abort()}},[a,u]);const n=t.useCallback(()=>{s(!0),requestAnimationFrame(()=>p?.current?.focus())},[p,s]);return{wrapperRef:l,wrapperInputRef:a,handleOpen:n}},W=t.forwardRef(({additionalOptions:u,className:p,defaultValue:l,error:a,iconClassName:s,inputClassName:n,isLoading:i,isRequired:c,label:o,labelClassName:d,listClassName:x,listItemClassName:f,name:r,options:m,placeholder:g,searchable:N=!1,showSearchIcon:b,theme:T,wrapperClassName:S,onBlur:_,...z},G)=>{const P=t.useId(),y=t.useRef(null),F=t.useRef(null),{wrapperRef:q,wrapperInputRef:K,handleOpen:D}=me({ulRef:F,inputRef:y}),{isOpen:I,searchTerm:J,value:k,toggleOpen:Q,setValue:V,setSearchTerm:A}=L(),j=r?`${P}-${r}`:P;t.useImperativeHandle(G,()=>y.current,[y]);const v=t.useMemo(()=>m.find(({value:w})=>w===k),[m,k]);t.useEffect(()=>{y.current&&(y.current.value=k?v?.value:"")},[v,k]),t.useEffect(()=>{if(l&&!k){const w=m&&m.find(C=>C.value===l);w&&V(w.value)}},[l,m,V,k]),t.useEffect(()=>{const w=new AbortController;return q.current?.addEventListener("focusout",C=>{const R=C.relatedTarget;(!R||!q.current?.contains(R))&&(A(""),y.current?.value||_?.())}),()=>{w.abort()}},[Q,q,A,_,k]);const X=w=>{const C=w.target.value;A(C);const R=m.find(Y=>Y.value.toLocaleLowerCase()===C.toLocaleLowerCase());R&&V(R.value)};return e.jsxs("div",{ref:q,className:h("flex flex-col w-full relative",S),"data-theme":T,children:[o?e.jsxs("label",{id:j,className:h(de({className:d})),htmlFor:j,onClick:D,children:[o,c&&e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}):null,e.jsxs("div",{ref:K,id:j,className:h(ce({className:p,hasError:!!a})),role:"combobox",onClick:D,"aria-expanded":I,tabIndex:0,"aria-labelledby":j,children:[e.jsxs("div",{className:"flex gap-2.5 items-center flex-1",children:[v?.leftIcon&&!b&&e.jsx("span",{className:"w-4 h-4 flex justify-center items-center dark:text-slate-50",children:v.leftIcon}),b&&e.jsx(se,{className:"w-4 h-4 text-zinc-500 select-none dark:text-slate-300 dark:group-focus-within:text-slate-50 transition-colors duration-300"}),N?e.jsx("input",{ref:y,type:"text",value:I?J:v?.label||"",name:r,onChange:X,placeholder:g,className:h(ue({className:n}),{"text-red-700 placeholder:text-red-700":!!a}),onClick:w=>{w.stopPropagation(),D()},"aria-label":o||g,"aria-labelledby":j,required:c,autoComplete:"off",autoCapitalize:"words",...z}):e.jsx($,{variant:"body2",className:h("flex-1 text-zinc-400 text-sm dark:text-slate-400",{"text-red-700":!!a,"select-none":!v,"text-slate-800 dark:text-slate-50":v}),children:v?.label||g})]}),i?e.jsx(ee,{className:"w-4 h-4 text-zinc-500 select-none"}):!b&&e.jsx(ne,{"data-state":I?"open":"closed",className:h("w-4 h-4 text-zinc-500 transition-all duration-100 data-[state=open]:rotate-0 data-[state=closed]:rotate-180 select-none dark:group-focus-within:text-slate-50",s,{"text-red-700":!!a})})]}),!N&&e.jsx("input",{ref:y,type:"text",name:r,className:"hidden","aria-hidden":"true",required:c,...z}),I&&e.jsx(M,{ref:F,additionalOptions:u,className:x,itemClassName:f,name:r,wrapperRef:q,wrapperInputRef:K,inputRef:y,options:m,isLoading:!!i,searchable:N})]})});W.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{searchable:{defaultValue:{value:"false",computed:!1},required:!1}}};const pe=t.forwardRef(({onChange:u,onBlur:p,value:l,error:a,helperText:s,name:n,highlightSearch:i,...c},o)=>e.jsx(H,{highlightSearch:i,name:n,value:l,onBlur:p,onChange:u,children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(W,{name:n,error:a,ref:o,onBlur:p,...c}),a?e.jsx("span",{className:"text-xs text-red-700",children:a}):null,!a&&s?e.jsx("span",{className:"text-xs text-slate-600",children:s}):null]})}));pe.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{additionalOptions:{required:!1,tsType:{name:"union",raw:"ReactNode[] | string[]",elements:[{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},error:{required:!1,tsType:{name:"string"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},highlightSearch:{required:!1,tsType:{name:"boolean"},description:""},iconClassName:{required:!1,tsType:{name:"string"},description:""},inputClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},isRequired:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:""},showSearchIcon:{required:!1,tsType:{name:"boolean"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'light'
| 'kubefirst-dark'
| 'dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'light'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'dark'"},{name:"undefined"}]},description:""},value:{required:!1,tsType:{name:"string"},description:""},wrapperClassName:{required:!1,tsType:{name:"string"},description:""},onBlur:{required:!1,tsType:{name:"VoidFunction"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { target: { value: string; name: string } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: string; name: string } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""}}};export{pe as D};
