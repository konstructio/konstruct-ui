import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r}from"./iframe-D01DnpOT.js";import{B as Z}from"./Button-DpnKiw0n.js";import{M as z}from"./Modal-B4KGyYMJ.js";import{u as ee}from"./useToggle-C8QLhViD.js";import{L as te}from"./Loading-CiuJYSx7.js";import{T as F}from"./Typography-Cw5nf5s8.js";import{c as L,a as f}from"./index-CJCZd66Q.js";import{C as re}from"./chevron-up-BCwm5asX.js";import"./preload-helper-PPVm8Dsz.js";import"./index-D60xDcd1.js";import"./index-Bik-xiTe.js";import"./index-CkWzIIhm.js";import"./index-D8tTFsQn.js";import"./index-DT-OuMj9.js";import"./Combination-BEv9as3V.js";import"./x-DpLxdFPe.js";import"./index-BczJ4cjc.js";import"./createLucideIcon-olUwYCFx.js";const U=r.createContext({isOpen:!1,toggleOpen(){throw new Error("toggleOpen function must be overridden")},value:void 0,setValue(){throw new Error("setValue function must be overridden")},searchTerm:"",setSearchTerm(){throw new Error("setSearchTerm function must be overridden")}}),j=()=>{const l=r.useContext(U);if(!l)throw new Error("useDropdownContext must be used within a DropdownProvider");return l},$=({children:l,value:o,name:a,onChange:t,onBlur:s})=>{const[n,u]=ee(!1),[i,d]=r.useState(""),c=r.useCallback(p=>{t?.({target:{value:p,name:a??""}}),s?.()},[t,a,s]);return e.jsx(U.Provider,{value:{value:o,isOpen:n,searchTerm:i,setSearchTerm:d,setValue:c,toggleOpen:u},children:l})};$.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{name:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"DropdownProps['onChange']",raw:"DropdownProps['onChange']"},description:""},onBlur:{required:!1,tsType:{name:"DropdownProps['onBlur']",raw:"DropdownProps['onBlur']"},description:""}}};const ae=({ulRef:l,wrapperRef:o,wrapperInputRef:a})=>{const t=r.useRef(0),{isOpen:s}=j();r.useEffect(()=>{const n=l.current?.querySelectorAll("li")??[],u=new AbortController,i=()=>{t.current<n.length-1?(t.current=t.current+1,n[t.current].focus()):(t.current=0,n[0].focus())},d=()=>{t.current>0?(t.current=t.current-1,n[t.current].focus()):(t.current=0,a.current?.focus())};return l.current?.addEventListener("keydown",c=>{switch(c.preventDefault(),c.key){case"ArrowDown":{i();break}case"Tab":{c.shiftKey?d():i();break}case"ArrowUp":{t.current===0?a.current?.focus():d();break}case"Enter":{n[t.current].querySelector("button")?.click();break}}},{signal:u.signal}),()=>{u.abort()}},[l,t,a]),r.useEffect(()=>{const n=new AbortController;return o.current?.addEventListener("mouseenter",()=>{(l.current?.querySelectorAll("li")??[]).forEach(i=>i.blur())},{signal:n.signal}),()=>{n.abort()}},[l,o]),r.useEffect(()=>{s||(t.current=0)},[s])},se=L(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3","hover:bg-slate-50","focus:bg-slate-50","civo:focus:bg-civo-primary/5","civo:hover:bg-civo-primary/5"]),D=({isClickable:l,className:o,...a})=>{const{setValue:t,toggleOpen:s}=j(),n=r.useRef(null),u=r.useCallback(d=>{t(d.value),s(!1)},[t,s]),i=r.useCallback((d,c)=>{d.key==="Enter"&&(d.stopPropagation(),u(c))},[u]);return e.jsxs("li",{ref:n,role:"option",className:f(se({className:o})),tabIndex:0,onClick:d=>{l&&(u(a),d.stopPropagation())},onKeyDown:d=>i(d,a),children:[a.leftIcon?e.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:a.leftIcon}):null,e.jsx(F,{variant:"body2",className:"text-zinc-700",children:a.label})]})};D.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},isClickable:{required:!0,tsType:{name:"boolean"},description:""}}};const ne=L(["absolute","bg-white","border","duration-100","ease-in-out","flex-col","mt-1","overflow-hidden","rounded-md","shadow-2xs","top-full","transition-all","w-full","z-10","max-h-[185px]","overflow-y-auto","border-gray-200","text-zinc-700","data-[state=open]:block","data-[state=closed]:hidden"]),H=r.forwardRef(({className:l,isLoading:o,itemClassName:a,name:t,options:s,searchable:n=!1,wrapperInputRef:u,wrapperRef:i},d)=>{const c=r.useRef(null),{isOpen:p,searchTerm:w}=j();r.useImperativeHandle(d,()=>c.current,[c]),ae({ulRef:c,wrapperRef:i,wrapperInputRef:u});const y=n?s.filter(g=>{const O=w.toLowerCase();return(typeof g.label=="string"?g.label.toLowerCase():"").includes(O)}):s,q=y.length===0;return e.jsx("ul",{ref:c,title:t,role:"listbox",className:f(ne({className:l})),"data-state":p?"open":"closed",children:o?e.jsx(D,{className:a,isClickable:!1,value:"Loading...",label:"Loading..."}):q?e.jsx(D,{className:a,isClickable:!1,value:"No options",label:"No options"}):y.map(g=>e.jsx(D,{className:a,isClickable:!0,...g},g.value))})});H.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},itemClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!0,tsType:{name:"boolean"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const oe=L(["border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none","h-9","border-gray-200","focus-visible:bg-zinc-50","aria-expanded:border-aurora-500","aria-expanded:text-aurora-500","kubefirst:aria-expanded:border-kubefirst-primary","kubefirst:aria-expanded:text-kubefirst-secondary"],{variants:{hasError:{true:["aria-expanded:border-red-600","aria-expanded:text-red-600","kubefirst:border-red-600","kubefirst:text-red-600"],false:""}},defaultVariants:{hasError:!1}}),le=L(["mb-1","cursor-pointer","text-[14px]","leading-[20px]","tracking-[0.1px]"]),ie=({ulRef:l})=>{const o=r.useRef(null),a=r.useRef(null),{isOpen:t,toggleOpen:s}=j();r.useEffect(()=>{const i=new AbortController,d=p=>{p.key==="Escape"&&s(!1)},c=p=>{o.current?.contains(p.target)||s(!1)};return document.addEventListener("keydown",d,{signal:i.signal}),document.addEventListener("mousedown",c,{signal:i.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&s(!1)},{signal:i.signal}),a.current?.addEventListener("focus",()=>{s(!0)},{signal:i.signal}),()=>{i.abort()}},[s,o]),r.useEffect(()=>{const i=new AbortController;return a.current?.addEventListener("keydown",d=>{if(d.key==="ArrowDown"){const c=l.current?.querySelector("li");c&&c.focus()}},{signal:i.signal}),()=>{i.abort()}},[a,l]);const n=r.useCallback(()=>s(!0),[s]),u=r.useCallback(()=>{t||s(!1)},[t,s]);return{wrapperRef:o,wrapperInputRef:a,handleOpen:n,handleOpenIfClosed:u}},W=r.forwardRef(({className:l,defaultValue:o,error:a,iconClassName:t,isLoading:s,label:n,labelClassName:u,listClassName:i,listItemClassName:d,name:c,options:p,placeholder:w,isRequired:y,searchable:q=!1,theme:g,wrapperClassName:O,onBlur:R},G)=>{const M=r.useId(),b=r.useRef(null),P=r.useRef(null),{wrapperRef:C,wrapperInputRef:_,handleOpen:A,handleOpenIfClosed:J}=ie({ulRef:P}),{isOpen:E,searchTerm:Q,value:v,toggleOpen:B,setValue:V,setSearchTerm:K}=j(),k=c?`${M}-${c}`:M;r.useImperativeHandle(G,()=>b.current,[b]);const h=r.useMemo(()=>p.find(({value:m})=>m===v),[p,v]);r.useEffect(()=>{b.current&&(b.current.value=v?h?.value:"")},[h,v]),r.useEffect(()=>{if(o&&!v){const m=p&&p.find(x=>x.value===o);m&&V(m.value)}},[o,p,V,v]),r.useEffect(()=>{const m=new AbortController;return C.current?.addEventListener("focusout",x=>{const N=x.relatedTarget;(!N||!C.current?.contains(N))&&(B(!1),K(""),b.current?.value||R?.())}),()=>{m.abort()}},[B,C,K,R,v]);const X=m=>{const x=m.target.value;K(x);const N=p.find(Y=>Y.value.toLocaleLowerCase()===x.toLocaleLowerCase());N&&V(N.value)};return e.jsxs("div",{ref:C,className:f("flex flex-col w-full relative",O),"data-theme":g,children:[n?e.jsxs("label",{id:k,className:f(le({className:u})),htmlFor:k,onClick:J,children:[n,y?e.jsx("span",{className:"text-red-600 ml-1",children:"*"}):null]}):null,e.jsxs("div",{ref:_,id:k,className:f(oe({className:l,hasError:!!a})),role:"combobox",onClick:A,"aria-expanded":E,tabIndex:0,"aria-labelledby":k,children:[e.jsxs("div",{className:"flex gap-3 items-center flex-1",children:[h?.leftIcon&&e.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:h.leftIcon}),q?e.jsx("input",{type:"text",value:E?Q:h?.label||"",onChange:X,placeholder:w,className:f("flex-1 bg-transparent border-none outline-none text-zinc-700 text-base",{"text-red-700 placeholder:text-red-700":!!a}),onClick:m=>{m.stopPropagation(),A()},"aria-label":n||w,"aria-labelledby":k}):e.jsx(F,{variant:"body2",className:f("flex-1 text-zinc-700 text-base",{"text-red-700":!!a}),children:h?.label||w})]}),s?e.jsx(te,{className:"w-4 h-4 text-zinc-500"}):e.jsx(re,{"data-state":E?"open":"closed",className:f("w-4 h-4 text-zinc-500 transition-all duration-50 data-[state=open]:rotate-0 data-[state=closed]:rotate-180",t,{"text-red-700":!!a})})]}),e.jsx("input",{ref:b,type:"text",name:c,className:"hidden","aria-hidden":"true",required:y}),e.jsx(H,{ref:P,className:i,itemClassName:d,name:c,wrapperRef:C,wrapperInputRef:_,options:p,isLoading:!!s,searchable:q})]})});W.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{searchable:{defaultValue:{value:"false",computed:!1},required:!1}}};const T=r.forwardRef(({onChange:l,onBlur:o,value:a,error:t,helperText:s,name:n,...u},i)=>e.jsx($,{onChange:l,onBlur:o,value:a,name:n,children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(W,{name:n,error:t,ref:i,onBlur:o,...u}),t?e.jsx("span",{className:"text-xs text-red-700",children:t}):null,!t&&s?e.jsx("span",{className:"text-xs text-slate-600",children:s}):null]})}));T.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{className:{required:!1,tsType:{name:"string"},description:""},error:{required:!1,tsType:{name:"string"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},iconClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},isRequired:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'light'
| 'kubefirst-dark'
| 'dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'light'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'dark'"},{name:"undefined"}]},description:""},value:{required:!1,tsType:{name:"string"},description:""},wrapperClassName:{required:!1,tsType:{name:"string"},description:""},onBlur:{required:!1,tsType:{name:"VoidFunction"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { target: { value: string; name: string } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: string; name: string } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""}},composes:["VariantProps","Omit"]};const Ie={title:"In Review/Dropdown",component:T},I={args:{options:[{label:"Talos",value:"talos",leftIcon:e.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:e.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option...",required:!1,labelClassName:"",isLoading:!1,name:"dropdown"},render:function(o){const[a,t]=r.useState(),[s,n]=r.useState();return e.jsxs("div",{className:"max-w-[350px] flex flex-col gap-6",children:[e.jsx(T,{label:"Dropdown with Kubefirst theme",onChange:({target:{value:u}})=>t(u),value:a,searchable:!0,theme:"kubefirst",...o}),e.jsx(T,{label:"Dropdown with Civo theme",onChange:({target:{value:u}})=>n(u),value:s,searchable:!1,...o})]})}},S={render:function(){const[o,a]=r.useState(!1),[t,s]=r.useState();return e.jsxs("div",{children:[e.jsx(Z,{onClick:()=>a(!0),theme:"kubefirst",children:"Open Modal with Dropdown"}),e.jsx(z,{isOpen:o,onClose:()=>a(!1),theme:"kubefirst",className:"min-h-[100px]",children:e.jsx(z.Body,{children:e.jsx("div",{className:"p-6",children:e.jsx(T,{label:"Choose your distribution",options:[{label:"Talos",value:"talos",leftIcon:e.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:e.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option...",onChange:({target:{value:n}})=>{console.log("value",n),s(n)},value:t,theme:"kubefirst",name:"modal-dropdown"})})})})]})}};I.parameters={...I.parameters,docs:{...I.parameters?.docs,source:{originalSource:`{
  args: {
    options: [{
      label: 'Talos',
      value: 'talos',
      leftIcon: <img src="./talos.svg" alt="Talos Logo" />
    }, {
      label: 'K3S',
      value: 'k3s',
      leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
    }],
    placeholder: 'Select an option...',
    required: false,
    labelClassName: '',
    isLoading: false,
    name: 'dropdown'
  },
  render: function DropdownStory(args) {
    const [value1, setValue1] = useState<string>();
    const [value2, setValue2] = useState<string>();
    return <div className="max-w-[350px] flex flex-col gap-6">
        <DropdownComponent label="Dropdown with Kubefirst theme" onChange={({
        target: {
          value
        }
      }) => setValue1(value)} value={value1} searchable={true} theme="kubefirst" {...args} />

        <DropdownComponent label="Dropdown with Civo theme" onChange={({
        target: {
          value
        }
      }) => setValue2(value)} value={value2} searchable={false} {...args} />
      </div>;
  }
} satisfies Story`,...I.parameters?.docs?.source}}};S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:`{
  render: function DropdownInModalStory() {
    const [isOpen, setIsOpen] = useState(false);
    const [value, setValue] = useState<string>();
    return <div>
        <Button onClick={() => setIsOpen(true)} theme="kubefirst">
          Open Modal with Dropdown
        </Button>

        <Modal isOpen={isOpen} onClose={() => setIsOpen(false)} theme="kubefirst" className="min-h-[100px]">
          <Modal.Body>
            <div className="p-6">
              <DropdownComponent label="Choose your distribution" options={[{
              label: 'Talos',
              value: 'talos',
              leftIcon: <img src="./talos.svg" alt="Talos Logo" />
            }, {
              label: 'K3S',
              value: 'k3s',
              leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
            }]} placeholder="Select an option..." onChange={({
              target: {
                value
              }
            }) => {
              console.log('value', value);
              setValue(value);
            }} value={value} theme="kubefirst" name="modal-dropdown" />
            </div>
          </Modal.Body>
        </Modal>
      </div>;
  }
} satisfies Story`,...S.parameters?.docs?.source}}};const Se=["Dropdown","DropdownInModal"];export{I as Dropdown,S as DropdownInModal,Se as __namedExportsOrder,Ie as default};
