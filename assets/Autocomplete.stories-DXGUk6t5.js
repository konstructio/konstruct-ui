import{j as b}from"./jsx-runtime-D_zvdyIk.js";import{r as n}from"./index-DUAV1Q2A.js";import{f as E,c as x}from"./index-CnCxUiSm.js";import{a as k}from"./index-Bj7X0qp-.js";import{u as j}from"./theme.hook-gog7kSAh.js";const T=({options:s,inputRef:a,wrapperRef:l,onChange:i})=>{const[t,r]=n.useState(()=>s??[]),[o,c]=n.useState(!1),[m,u]=n.useState("");n.useEffect(()=>{var p;const e=new AbortController;return(p=a.current)==null||p.addEventListener("focus",()=>c(!0),{signal:e.signal}),()=>{e.abort()}},[a]),n.useEffect(()=>{const e=new AbortController,p=f=>{var g;f.key==="Escape"&&(c(!1),(g=a.current)==null||g.blur())},h=f=>{var g;(g=l.current)!=null&&g.contains(f.target)||c(!1)};return document.addEventListener("keydown",p,{signal:e.signal}),document.addEventListener("mousedown",h,{signal:e.signal}),()=>{e.abort()}},[a,l]),n.useEffect(()=>{var p;const e=new AbortController;return(p=l.current)==null||p.addEventListener("focusout",h=>{var f;(f=l.current)!=null&&f.contains(h.relatedTarget)||c(!1)},{signal:e.signal}),()=>{e.abort()}},[l]);const d=n.useCallback(e=>{if(e.length===0)r(s);else{const p=s.map(({value:f})=>f),h=E(p,e).map(f=>({value:f}));r(h)}},[s]),v=n.useCallback(e=>{u(e.target.value),d(e.target.value),i==null||i(e.target.value)},[d,i]),y=n.useCallback(e=>{u(e),d(e),i==null||i(e),c(!1)},[d,i]);return{inputRef:a,newOptions:t,showOptions:o,value:m,handleChange:v,handleSelectValue:y}},S=({ulRef:s,inputRef:a,wrapperRef:l,options:i})=>{const t=n.useRef(0);n.useEffect(()=>{var u,d;const r=((u=s.current)==null?void 0:u.querySelectorAll("li"))??[],o=new AbortController,c=()=>{t.current<r.length-1?(t.current=t.current+1,r[t.current].focus()):(t.current=0,r[0].focus())},m=()=>{var v;t.current>0?(t.current=t.current-1,r[t.current].focus()):(t.current=0,(v=a.current)==null||v.focus())};return(d=s.current)==null||d.addEventListener("keydown",v=>{var y;switch(v.preventDefault(),v.key){case"ArrowDown":{c();break}case"Tab":{v.shiftKey?m():c();break}case"ArrowUp":{t.current===0?(y=a.current)==null||y.focus():m();break}case"Enter":{const e=r[t.current].querySelector("button");e==null||e.click();break}}},{signal:o.signal}),()=>{o.abort()}},[a,s,i,t]),n.useEffect(()=>{var o;const r=new AbortController;return(o=a.current)==null||o.addEventListener("keydown",c=>{var m;if(c.key==="ArrowDown"){const u=(m=s.current)==null?void 0:m.querySelector("li");u&&u.focus()}},{signal:r.signal}),()=>{r.abort()}},[a,s,i]),n.useEffect(()=>{var o;const r=new AbortController;return(o=l.current)==null||o.addEventListener("mouseenter",()=>{var m;(((m=s.current)==null?void 0:m.querySelectorAll("li"))??[]).forEach(u=>u.blur())},{signal:r.signal}),()=>{r.abort()}},[s,l])},L=k(["max-h-[250px]","overflow-y-auto"],{variants:{variant:{default:"bg-white"},theme:{kubefirst:"",colony:"",civo:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),R=k(["p-1","text-center","w-full block","bg-white"],{variants:{variant:{default:""},theme:{kubefirst:"",colony:"",civo:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),I=k(["focus-visible:outline-none"],{variants:{variant:{default:""},theme:{kubefirst:["focus:bg-purple-100","hover:bg-purple-100"],colony:["focus:bg-red-100","hover:bg-red-100"],civo:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),_=k(["cursor-pointer","focus-visible:outline-none","px-3","py-1.5","w-full","text-left"],{variants:{variant:{default:""},theme:{kubefirst:["focus:bg-purple-100","hover:bg-purple-100"],colony:["focus:bg-red-100","hover:bg-red-100"],civo:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),C=({className:s,inputRef:a,options:l,placeholder:i,placeholderClassName:t,variant:r,theme:o,wrapperRef:c,onClick:m})=>{const u=n.useRef(null);return S({ulRef:u,inputRef:a,wrapperRef:c,options:l}),l.length===0?b.jsx("span",{className:x(R({theme:o,variant:r,className:t})),children:i}):b.jsx("ul",{ref:u,role:"listbox",className:x(L({variant:r,theme:o,className:s})),children:l.map(({value:d})=>b.jsx("li",{role:"option",tabIndex:0,className:x(I({theme:o,variant:r})),children:b.jsx("button",{type:"button",role:"button",className:x(_({theme:o,variant:r})),onClick:()=>m(d),children:d})},d))})};C.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},inputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'input'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'input'"}],raw:"ComponentRef<'input'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'input'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},placeholderClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["VariantProps"]};const K=k(["flex","w-full","rounded-md","border","border-zinc-200","bg-transparent","text-zinc-700","transition-colors","placeholder:text-muted-foreground","focus-visible:outline-none","focus-visible:ring-1","focus-visible:ring-ring","disabled:cursor-not-allowed","disabled:opacity-50","shadow-sm","py-1","px-2"],{variants:{variant:{default:""},theme:{kubefirst:["focus:ring-kubefirst-primary"],colony:["focus:focus:ring-red-400"],civo:""}},defaultVariants:{theme:"kubefirst",variant:"default"}}),z=k(["pl-1","mb-2","text-base","cursor-pointer"],{variants:{variant:{default:""},theme:{kubefirst:"",colony:"",civo:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),N=n.forwardRef(({autoComplete:s="off",className:a,label:l,labelClassName:i,name:t,options:r,placeHolderEmptyValues:o="No values...",placeHolderEmptyValuesClassName:c,placeholder:m,theme:u,variant:d,onChange:v},y)=>{const e=n.useRef(null),p=n.useRef(null),h=n.useId(),{theme:f}=j(),g=u??f;n.useImperativeHandle(y,()=>p.current,[p]);const w=T({options:r,inputRef:p,wrapperRef:e,onChange:v});return b.jsxs("div",{ref:e,className:"relative flex flex-col",children:[l?b.jsx("label",{htmlFor:t??h,className:x(z({theme:g,variant:d,className:i})),children:l}):null,b.jsx("input",{ref:p,id:t??h,type:"text",name:t,role:"combobox",autoComplete:s,className:x(K({theme:g,variant:d,className:a})),onChange:w.handleChange,value:w.value,placeholder:m,"aria-expanded":w.showOptions?"true":"false"}),w.showOptions&&b.jsx("div",{className:"absolute z-10 top-full w-full rounded-md mt-1 border shadow-sm",children:b.jsx(C,{className:a,inputRef:p,wrapperRef:e,options:w.newOptions,placeholder:o,placeholderClassName:c,variant:d,theme:g,onClick:w.handleSelectValue})})]})});N.displayName="Autocomplete";N.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{autoComplete:{required:!1,tsType:{name:"literal",value:"'off'"},description:"",defaultValue:{value:"'off'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeHolderEmptyValues:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:"",defaultValue:{value:"'No values...'",computed:!1}},placeHolderEmptyValuesClassName:{required:!1,tsType:{name:"string"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""}},composes:["VariantProps"]};const U={title:"In Review/Autocomplete",component:N},O={args:{placeholder:"Search...",options:[{value:"Option 1"},{value:"Option 2"},{value:"Option 3"},{value:"Option 4"},{value:"Option 5"},{value:"Option 6"}]},render:s=>b.jsxs("div",{className:"w-[350px] flex flex-col gap-3",children:[b.jsx(N,{label:"Kubefirst colors",...s}),b.jsx(N,{label:"Colony colors",theme:"colony",...s})]})};var A,V,q;O.parameters={...O.parameters,docs:{...(A=O.parameters)==null?void 0:A.docs,source:{originalSource:`{
  args: {
    placeholder: 'Search...',
    options: [{
      value: 'Option 1'
    }, {
      value: 'Option 2'
    }, {
      value: 'Option 3'
    }, {
      value: 'Option 4'
    }, {
      value: 'Option 5'
    }, {
      value: 'Option 6'
    }]
  },
  render: args => <div className="w-[350px] flex flex-col gap-3">
      <AutocompleteComponent label="Kubefirst colors" {...args} />
      <AutocompleteComponent label="Colony colors" theme="colony" {...args} />
    </div>
}`,...(q=(V=O.parameters)==null?void 0:V.docs)==null?void 0:q.source}}};const $=["Autocomplete"];export{O as Autocomplete,$ as __namedExportsOrder,U as default};
