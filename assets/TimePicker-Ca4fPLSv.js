import{r as a,j as t}from"./iframe-BP6xk-sd.js";import{T as M}from"./Typography-baU5Ymfp.js";import{a as y,c as d}from"./index-B-7A89sm.js";import{C as E}from"./chevron-down-CXMmdtVv.js";const $=(e,n)=>n==="12"?`${e.getHours()%12||12}:${e.getMinutes().toString().padStart(2,"0")} ${e.getHours()>=12?"PM":"AM"}`:`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`,R=e=>e.getHours(),D=e=>e.getMinutes(),j=a.createContext({time:new Date,format:"12",formattedTime:"",isAM:!1,onSelectHour(){throw new Error("onSelectHour is not implemented")},onSelectMinute(){throw new Error("onSelectMinute is not implemented")},onSelectAM(){throw new Error("onSelectAM is not implemented")},onSelectPM(){throw new Error("onSelectPM is not implemented")}}),q=({children:e,time:n,format:u})=>{const[c,o]=a.useState(u),[r,i]=a.useState(()=>n??new Date),s=a.useMemo(()=>r.getHours()<12,[r]),l=a.useCallback(p=>{const h=new Date(r);c==="12"?p===12?h.setHours(s?0:12):h.setHours(s?p:p+12):h.setHours(p),i(h)},[c,s,r]),m=a.useCallback(p=>{const h=new Date(r);h.setMinutes(p),i(h)},[r]),f=a.useCallback(()=>{const p=new Date(r),h=p.getHours();s||p.setHours(h-12),i(p)},[s,r]),b=a.useCallback(()=>{const p=new Date(r),h=p.getHours();s&&p.setHours(h+12),i(p)},[s,r]);return a.useEffect(()=>{o(c)},[c]),t.jsx(j.Provider,{value:{time:r,format:c,formattedTime:$(r,c),isAM:s,onSelectHour:l,onSelectMinute:m,onSelectAM:f,onSelectPM:b},children:e})};q.__docgenInfo={description:"",methods:[],displayName:"TimePickerProvider",props:{time:{required:!1,tsType:{name:"Date"},description:""},format:{required:!0,tsType:{name:"NonNullable",elements:[{name:"intersection['format']",raw:"TimePickerProps['format']"}],raw:"NonNullable<TimePickerProps['format']>"},description:""}}};const k=()=>{const e=a.useContext(j);if(!e)throw new Error("useTimePickerContext must be used within a TimePickerProvider");return e},V=y(["border","rounded","p-2.5","w-full","flex","items-center","justify-between","bg-white","border-gray-300","dark:border-metal-700","dark:bg-metal-800","cursor-pointer","transition-all","transition-duration-100","data-[open=true]:border-aurora-500","text-sm","text-slate-800","dark:text-slate-50"]),v=y(["snap-y","snap-mandatory","overflow-y-scroll","scrollbar-none","flex","flex-col","dark:text-metal-50"]),w=y(["w-15","h-10","snap-start","rounded","transition-all","transition-duration-100","focus-within:outline-2","border-2","border-transparent","outline-none","hover:bg-gray-100","hover:border-2","hover:border-white","data-[active=true]:bg-blue-600","data-[active=true]:hover:border-blue-200","data-[active=true]:text-white","data-[active=true]:font-medium","focus-visible:border-blue-200","focus-within:border-blue-200","dark:focus-within:border-aurora-50","dark:data-[active=true]:bg-aurora-500","dark:data-[active=true]:hover:border-aurora-50","dark:hover:border-transparent","dark:data-[active=true]:text-metal-900","dark:hover:bg-metal-700"]),N=y(["flex","items-center","justify-center","cursor-pointer","w-full","h-full","px-6","py-3","outline-none","focus:border-blue-200","text-sm"]),C=({hours:e,scrollBehavior:n})=>{const u=a.useRef(null),c=a.useRef(!0),{format:o,onSelectHour:r}=k(),i=o==="12"&&e>=12?e-12:e,s=a.useCallback((l,m)=>{l.currentTarget?.blur(),r(m)},[r]);if(a.useEffect(()=>{if(c.current){const l=u.current,m=i===0&&o==="12"?12:i;l&&l.querySelector(`[data-value="${`0${m}`.slice(-2)}"]`)?.scrollIntoView({behavior:n,block:"center"}),c.current=!1}},[o,i,n]),o==="12"){const l=i===0?12:i;return t.jsx("ul",{ref:u,className:d(v()),"aria-label":"hours",role:"listbox",children:Array.from({length:12},(m,f)=>t.jsx("li",{className:d(w()),"data-value":`0${f+1}`.slice(-2),"data-active":l-1===f,role:"presentation",children:t.jsx("button",{type:"button",role:"option",className:d(N()),onClick:b=>s(b,f+1),children:f+1})},f))})}return t.jsx("ul",{ref:u,className:d(v()),"aria-label":"hours",role:"listbox",children:Array.from({length:24},(l,m)=>t.jsx("li",{className:d(w()),"data-value":`0${m}`.slice(-2),"data-active":e===m,role:"presentation",children:t.jsx("button",{type:"button",role:"option",className:d(N()),onClick:f=>s(f,m),children:m})},m))})};C.displayName="HoursList";C.__docgenInfo={description:"",methods:[],displayName:"HoursList",props:{hours:{required:!0,tsType:{name:"number"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const P=({listClassName:e,listItemClassName:n,listItemButtonClassName:u})=>{const{format:c,isAM:o,onSelectAM:r,onSelectPM:i}=k(),s=a.useCallback((l,m)=>{l.currentTarget?.blur(),m()},[]);return c==="24"?null:t.jsxs("ul",{className:d("flex items-center justify-center flex-col",e),"aria-label":"meridian",role:"listbox",children:[t.jsx("li",{className:d(w({className:n})),"data-active":o,role:"presentation",children:t.jsx("button",{type:"button",role:"option",className:d(N({className:u}),{"dark:text-slate-50":!o}),onClick:l=>s(l,r),children:"AM"})}),t.jsx("li",{className:d(w({className:n})),"data-active":!o,role:"presentation",children:t.jsx("button",{type:"button",role:"option",className:d(N({className:u}),{"dark:text-slate-50":o}),onClick:l=>s(l,i),children:"PM"})})]})};P.displayName="MeridianList";P.__docgenInfo={description:"",methods:[],displayName:"MeridianList",props:{listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const S=({minutes:e,scrollBehavior:n})=>{const u=a.useRef(null),c=a.useRef(e),{onSelectMinute:o}=k();a.useEffect(()=>{const i=u.current;if(i){const s=`0${c.current}`.slice(-2);i.querySelector(`[data-value="${s}"]`)?.scrollIntoView({behavior:n,block:"center"})}},[n]);const r=a.useCallback((i,s)=>{o(i),s.currentTarget?.blur()},[o]);return t.jsx("ul",{ref:u,className:d(v()),"aria-label":"minutes",role:"listbox",children:Array.from({length:60},(i,s)=>t.jsx("li",{className:d(w()),"data-value":`0${s}`.slice(-2),"data-active":e===s,role:"presentation",children:t.jsx("button",{type:"button",role:"option",className:d(N()),onClick:l=>r(s,l),children:`0${s}`.slice(-2)})},s))})};S.displayName="MinutesList";S.__docgenInfo={description:"",methods:[],displayName:"MinutesList",props:{minutes:{required:!0,tsType:{name:"number"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const I=({isOpen:e,scrollBehavior:n,listClassName:u,listItemClassName:c,listItemButtonClassName:o})=>{const{time:r}=k(),i=a.useMemo(()=>R(r),[r]),s=a.useMemo(()=>D(r),[r]);return e?t.jsxs("div",{role:"group",className:d("flex gap-1.5 p-2 rounded-md shadow w-full max-h-[216px] absolute mt-1 bg-white z-10 animate-in fade-in-0 zoom-in-95 dark:bg-metal-800 dark:border dark:border-metal-700"),children:[t.jsx(C,{hours:i,scrollBehavior:n,listClassName:u,listItemClassName:c,listItemButtonClassName:o}),t.jsx(S,{minutes:s,scrollBehavior:n,listClassName:u,listItemClassName:c,listItemButtonClassName:o}),t.jsx(P,{listClassName:u,listItemClassName:c,listItemButtonClassName:o})]}):null};I.__docgenInfo={description:"",methods:[],displayName:"WrapperList",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const H=({name:e,label:n,isRequired:u,scrollBehavior:c,className:o,listClassName:r,listItemClassName:i,listItemButtonClassName:s})=>{const l=a.useId(),[m,f]=a.useState(!1),b=a.useRef(null),{format:p,formattedTime:h}=k(),x=e??`time-${l}`,B=a.useCallback(()=>f(T=>!T),[]);return a.useEffect(()=>{const T=new AbortController,_=g=>{g.key==="Escape"&&f(!1)},L=g=>{b.current?.contains(g.target)||f(!1)};return document.addEventListener("mousedown",L,{signal:T.signal}),document.addEventListener("keydown",_,{signal:T.signal}),()=>{T.abort()}},[]),t.jsxs("div",{ref:b,className:d("w-max","text-slate-800","text-sm","flex","flex-col","gap-2",p==="12"?"w-53 min-w-53":"w-36 min-w-36"),children:[n?t.jsxs(M,{component:"label",variant:"labelLarge",htmlFor:x,className:"font-medium",children:[n," ",u&&t.jsx(M,{component:"span",className:"text-red-600 dark:text-red-500 text-sm font-normal",children:"*"})]}):null,t.jsxs("div",{className:"relative",children:[t.jsxs("button",{"aria-label":x,"aria-haspopup":"listbox","aria-expanded":"true","aria-controls":"time-options",className:d(V({className:o})),"data-open":m,onClick:B,children:[h,t.jsx(E,{className:"w-4 h-4 transition-all text-gray-400 data-[open=true]:rotate-180","data-open":m})]}),t.jsx(I,{isOpen:m,scrollBehavior:c,listClassName:r,listItemClassName:i,listItemButtonClassName:s})]}),t.jsx("input",{type:"hidden",name:x,value:h,className:"hidden"})]})};H.__docgenInfo={description:"",methods:[],displayName:"Wrapper"};const A=({format:e="12",...n})=>t.jsx(q,{format:e,children:t.jsx(H,{...n})});A.displayName="KonstructTimePicker";A.__docgenInfo={description:`A scrollable time picker component with 12 or 24 hour format support.
Features smooth scroll navigation through hours, minutes, and AM/PM options.

@example
\`\`\`tsx
<TimePicker
  label="Start Time"
  name="startTime"
  format="12"
  time={selectedTime}
  scrollBehavior="smooth"
/>
\`\`\`

@see {@link https://konstructio.github.io/konstruct-ui/?path=/docs/components-timepicker--docs Storybook}`,methods:[],displayName:"KonstructTimePicker",props:{format:{required:!1,tsType:{name:"union",raw:"'12' | '24'",elements:[{name:"literal",value:"'12'"},{name:"literal",value:"'24'"}]},description:"Time format: '12' for AM/PM or '24' for military time",defaultValue:{value:"'12'",computed:!1}},scrollBehavior:{required:!1,tsType:{name:"union",raw:"'smooth' | 'auto'",elements:[{name:"literal",value:"'smooth'"},{name:"literal",value:"'auto'"}]},description:"Scroll behavior when navigating times"},time:{required:!1,tsType:{name:"Date"},description:"Currently selected time"},name:{required:!1,tsType:{name:"string"},description:"Form field name"},label:{required:!1,tsType:{name:"string"},description:"Label displayed above the picker"},isRequired:{required:!1,tsType:{name:"boolean"},description:"Whether the field is required"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS classes for the wrapper"},listClassName:{required:!1,tsType:{name:"string"},description:"Additional CSS classes for the scrollable list"},listItemClassName:{required:!1,tsType:{name:"string"},description:"Additional CSS classes for list items"},listItemButtonClassName:{required:!1,tsType:{name:"string"},description:"Additional CSS classes for list item buttons"}}};export{A as T};
