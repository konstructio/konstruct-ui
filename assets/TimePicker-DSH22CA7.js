import{r,j as l}from"./iframe-DlVqEhCt.js";import{T as K}from"./Typography-NWAg16e1.js";import{a as R,c as T}from"./index-B-7A89sm.js";import{c as ie}from"./createLucideIcon-CBrmlE83.js";const oe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],le=ie("chevron-down",oe),ce=(a,p)=>p==="12"?`${a.getHours()%12||12}:${a.getMinutes().toString().padStart(2,"0")} ${a.getHours()>=12?"PM":"AM"}`:`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`,ue=a=>a?.getHours()??-1,de=a=>a?.getMinutes()??-1,z=(a,p)=>{const u=a.trim().toUpperCase();if(p==="12"){const c=u.match(/^(\d{1,2}):(\d{1,2})\s*(AM|PM)?$/i);if(c){let n=parseInt(c[1],10);const f=parseInt(c[2],10),t=c[3]?.toUpperCase();if(n<1||n>12||f<0||f>59)return null;t==="PM"&&n!==12?n+=12:t==="AM"&&n===12&&(n=0);const b=new Date;return b.setHours(n,f,0,0),b}}else{const c=u.match(/^(\d{1,2}):(\d{1,2})$/);if(c){const n=parseInt(c[1],10),f=parseInt(c[2],10);if(n<0||n>23||f<0||f>59)return null;const t=new Date;return t.setHours(n,f,0,0),t}}return null},G=r.createContext({time:void 0,format:"12",formattedTime:"",isAM:!1,isTyping:!1,onSelectHour(){throw new Error("onSelectHour is not implemented")},onSelectMinute(){throw new Error("onSelectMinute is not implemented")},onSelectAM(){throw new Error("onSelectAM is not implemented")},onSelectPM(){throw new Error("onSelectPM is not implemented")},setTimeDirectly(){throw new Error("setTimeDirectly is not implemented")},setIsTyping(){throw new Error("setIsTyping is not implemented")}}),J=({children:a,time:p,format:u,onChange:c})=>{const[n,f]=r.useState(u),[t,b]=r.useState(()=>p),[h,o]=r.useState(!1),i=r.useMemo(()=>t?t.getHours()<12:!0,[t]),e=r.useCallback(m=>{b(m),c?.(m)},[c]),s=r.useCallback(m=>{const k=t?new Date(t):new Date;n==="12"?m===12?k.setHours(i?0:12):k.setHours(i?m:m+12):k.setHours(m),t||k.setMinutes(0,0,0),e(k)},[n,i,t,e]),d=r.useCallback(m=>{const k=t?new Date(t):new Date;t||k.setHours(0,0,0,0),k.setMinutes(m),e(k)},[t,e]),y=r.useCallback(()=>{const m=t?new Date(t):new Date,k=m.getHours();t?i||m.setHours(k-12):m.setHours(0,0,0,0),e(m)},[i,t,e]),w=r.useCallback(()=>{const m=t?new Date(t):new Date,k=m.getHours();t?i&&m.setHours(k+12):m.setHours(12,0,0,0),e(m)},[i,t,e]),N=r.useCallback(m=>{e(m)},[e]);return r.useEffect(()=>{b(p)},[p]),r.useEffect(()=>{f(u)},[u]),l.jsx(G.Provider,{value:{time:t,format:n,formattedTime:t?ce(t,n):"",isAM:i,isTyping:h,onSelectHour:s,onSelectMinute:d,onSelectAM:y,onSelectPM:w,setTimeDirectly:N,setIsTyping:o},children:a})};J.__docgenInfo={description:"",methods:[],displayName:"TimePickerProvider",props:{time:{required:!1,tsType:{name:"Date"},description:""},format:{required:!0,tsType:{name:"NonNullable",elements:[{name:"intersection['format']",raw:"TimePickerProps['format']"}],raw:"NonNullable<TimePickerProps['format']>"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(time: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"time"}],return:{name:"void"}}},description:""}}};const H=()=>{const a=r.useContext(G);if(!a)throw new Error("useTimePickerContext must be used within a TimePickerProvider");return a},me=R(["border","rounded","p-2.5","w-full","flex","items-center","justify-between","bg-white","border-gray-300","dark:border-metal-700","dark:bg-metal-800","cursor-pointer","transition-all","transition-duration-100","data-[open=true]:border-aurora-500","text-sm","text-slate-800","dark:text-slate-50"]),V=R(["snap-y","snap-mandatory","overflow-y-scroll","scrollbar-none","flex","flex-col","dark:text-metal-50"]),A=R(["w-15","h-10","snap-start","rounded","transition-all","transition-duration-100","outline-none","border-2","border-transparent","hover:bg-gray-100","focus-within:bg-gray-100","data-[active=true]:bg-blue-600","data-[active=true]:text-white","data-[active=true]:font-medium","data-[active=true]:hover:border-blue-200","data-[active=true]:focus-within:bg-blue-600","data-[active=true]:focus-within:border-blue-200","dark:data-[active=true]:bg-aurora-500","dark:data-[active=true]:text-metal-900","dark:data-[active=true]:hover:border-aurora-50","dark:data-[active=true]:focus-within:bg-aurora-500","dark:data-[active=true]:focus-within:border-aurora-50","dark:hover:bg-metal-700","dark:focus-within:bg-metal-700"]),j=R(["flex","items-center","justify-center","cursor-pointer","w-full","h-full","px-6","py-3","outline-none","text-sm"]),W=({hours:a,scrollBehavior:p})=>{const u=r.useRef(null),c=r.useRef(a),{format:n,isTyping:f,onSelectHour:t}=H(),b=n==="12"&&a>=12?a-12:a,h=n==="12"?12:24,o=r.useCallback((e,s)=>{e.currentTarget?.blur(),t(s)},[t]),i=r.useCallback((e,s)=>{const d=u.current?.querySelectorAll("button");if(!d)return;let y=s;if(e.key==="ArrowDown"||e.key==="Tab"&&!e.shiftKey)e.preventDefault(),y=(s+1)%h;else if(e.key==="ArrowUp"||e.key==="Tab"&&e.shiftKey)e.preventDefault(),y=(s-1+h)%h;else if(e.key==="Enter"){e.preventDefault();const w=n==="12"?s+1:s;t(w),document.querySelector('[aria-label="minutes"]')?.querySelector('li[data-active="true"] button')?.focus();return}y!==s&&d[y]?.focus()},[n,h,t]);if(r.useEffect(()=>{const e=u.current,s=c.current,d=n==="12"&&s>=12?s-12:s,y=d===0&&n==="12"?12:d;e&&e.querySelector(`[data-value="${`0${y}`.slice(-2)}"]`)?.scrollIntoView({behavior:p,block:"center"})},[n,p]),r.useEffect(()=>{if(!f)return;const e=u.current,s=n==="12"&&a>=12?a-12:a,d=s===0&&n==="12"?12:s;e&&e.querySelector(`[data-value="${`0${d}`.slice(-2)}"]`)?.scrollIntoView({behavior:"instant",block:"center"})},[a,n,f]),n==="12"){const e=b===0?12:b;return l.jsx("ul",{ref:u,className:T(V()),"aria-label":"hours",role:"listbox",children:Array.from({length:12},(s,d)=>{const y=e-1===d;return l.jsx("li",{className:T(A()),"data-value":`0${d+1}`.slice(-2),"data-active":y,role:"presentation",children:l.jsx("button",{type:"button",role:"option",tabIndex:y?0:-1,className:T(j()),onClick:w=>o(w,d+1),onKeyDown:w=>i(w,d),children:d+1})},d)})})}return l.jsx("ul",{ref:u,className:T(V()),"aria-label":"hours",role:"listbox",children:Array.from({length:24},(e,s)=>{const d=a===s;return l.jsx("li",{className:T(A()),"data-value":`0${s}`.slice(-2),"data-active":d,role:"presentation",children:l.jsx("button",{type:"button",role:"option",tabIndex:d?0:-1,className:T(j()),onClick:y=>o(y,s),onKeyDown:y=>i(y,s),children:s})},s)})})};W.displayName="HoursList";W.__docgenInfo={description:"",methods:[],displayName:"HoursList",props:{hours:{required:!0,tsType:{name:"number"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const F=({listClassName:a,listItemClassName:p,listItemButtonClassName:u,onClose:c})=>{const n=r.useRef(null),{format:f,isAM:t,onSelectAM:b,onSelectPM:h}=H(),o=r.useCallback((e,s)=>{e.currentTarget?.blur(),s()},[]),i=r.useCallback((e,s)=>{const d=n.current?.querySelectorAll("button");if(!d)return;const y=e.key==="Tab"&&!e.shiftKey,w=e.key==="Tab"&&e.shiftKey;e.key==="ArrowDown"||e.key==="ArrowUp"||y||w?(e.preventDefault(),s?d[1]?.focus():d[0]?.focus()):e.key==="Enter"&&(e.preventDefault(),s?b():h(),c?.())},[b,h,c]);return f==="24"?null:l.jsxs("ul",{ref:n,className:T("flex items-center justify-center flex-col",a),"aria-label":"meridian",role:"listbox",children:[l.jsx("li",{className:T(A({className:p})),"data-active":t,role:"presentation",children:l.jsx("button",{type:"button",role:"option",tabIndex:t?0:-1,className:T(j({className:u}),{"dark:text-slate-50":!t}),onClick:e=>o(e,b),onKeyDown:e=>i(e,!0),children:"AM"})}),l.jsx("li",{className:T(A({className:p})),"data-active":!t,role:"presentation",children:l.jsx("button",{type:"button",role:"option",tabIndex:t?-1:0,className:T(j({className:u}),{"dark:text-slate-50":t}),onClick:e=>o(e,h),onKeyDown:e=>i(e,!1),children:"PM"})})]})};F.displayName="MeridianList";F.__docgenInfo={description:"",methods:[],displayName:"MeridianList",props:{listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const U=({minutes:a,scrollBehavior:p,onClose:u})=>{const c=r.useRef(null),n=r.useRef(a),{isTyping:f,onSelectMinute:t}=H();r.useEffect(()=>{const o=c.current;if(o){const i=`0${n.current}`.slice(-2);o.querySelector(`[data-value="${i}"]`)?.scrollIntoView({behavior:p,block:"center"})}},[p]),r.useEffect(()=>{if(!f)return;const o=c.current;if(o){const i=`0${a}`.slice(-2);o.querySelector(`[data-value="${i}"]`)?.scrollIntoView({behavior:"instant",block:"center"})}},[a,f]);const b=r.useCallback((o,i)=>{t(o),i.currentTarget?.blur()},[t]),h=r.useCallback((o,i)=>{const e=c.current?.querySelectorAll("button");if(!e)return;let s=i;if(o.key==="ArrowDown"||o.key==="Tab"&&!o.shiftKey)o.preventDefault(),s=(i+1)%60;else if(o.key==="ArrowUp"||o.key==="Tab"&&o.shiftKey)o.preventDefault(),s=(i-1+60)%60;else if(o.key==="Enter"){if(o.preventDefault(),t(i),u){u();return}document.querySelector('[aria-label="meridian"]')?.querySelector('li[data-active="true"] button')?.focus();return}s!==i&&e[s]?.focus()},[t,u]);return l.jsx("ul",{ref:c,className:T(V()),"aria-label":"minutes",role:"listbox",children:Array.from({length:60},(o,i)=>{const e=a===i;return l.jsx("li",{className:T(A()),"data-value":`0${i}`.slice(-2),"data-active":e,role:"presentation",children:l.jsx("button",{type:"button",role:"option",tabIndex:e?0:-1,className:T(j()),onClick:s=>b(i,s),onKeyDown:s=>h(s,i),children:`0${i}`.slice(-2)})},i)})})};U.displayName="MinutesList";U.__docgenInfo={description:"",methods:[],displayName:"MinutesList",props:{minutes:{required:!0,tsType:{name:"number"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Q=({isOpen:a,scrollBehavior:p,listClassName:u,listItemClassName:c,listItemButtonClassName:n,onClose:f})=>{const{time:t,format:b}=H(),h=r.useMemo(()=>ue(t),[t]),o=r.useMemo(()=>de(t),[t]);return a?l.jsxs("div",{role:"group",className:T("flex","gap-1.5","p-2","rounded-md","shadow","w-max","max-h-54","absolute","bg-white","z-20","animate-in","fade-in-0","zoom-in-95","dark:bg-metal-800","dark:border","dark:border-metal-700","mt-1"),children:[l.jsx(W,{hours:h,scrollBehavior:p,listClassName:u,listItemClassName:c,listItemButtonClassName:n}),l.jsx(U,{minutes:o,scrollBehavior:p,listClassName:u,listItemClassName:c,listItemButtonClassName:n,onClose:b==="24"?f:void 0}),l.jsx(F,{listClassName:u,listItemClassName:c,listItemButtonClassName:n,onClose:f})]}):null};Q.__docgenInfo={description:"",methods:[],displayName:"WrapperList",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const X=({name:a,label:p,isRequired:u,scrollBehavior:c,className:n,listClassName:f,listItemClassName:t,listItemButtonClassName:b,disabled:h,mode:o="select",showList:i=!0,error:e,placeholder:s})=>{const d=r.useId(),[y,w]=r.useState(!1),N=r.useRef(!1),m=r.useRef(null),k=r.useRef(null),{format:P,formattedTime:q,setTimeDirectly:B,setIsTyping:S}=H(),$=a??`time-${d}`,[E,L]=r.useState(q),[Z,M]=r.useState(),_=e||Z;r.useEffect(()=>{N.current||(L(q),M(void 0))},[q]);const ee=r.useCallback(()=>{h||w(v=>!v)},[h]),te=r.useCallback(()=>{!h&&i&&w(!0),M(void 0)},[h,i]),re=r.useCallback(v=>{v.target!==k.current&&(N.current=!1,S(!1))},[S]),se=r.useCallback(v=>{if(m.current?.contains(v.relatedTarget))return;N.current=!1,S(!1),w(!1);const C=v.currentTarget.value.trim();if(C===""){M(void 0);return}const g=z(C,P);if(g){M(void 0),B(g);const x=g.getHours(),I=g.getMinutes().toString().padStart(2,"0");if(P==="24")L(`${x.toString().padStart(2,"0")}:${I}`);else{const D=x%12||12,O=x>=12?"PM":"AM";L(`${D}:${I} ${O}`)}}else M("Invalid time")},[P,B,S]),ae=r.useCallback(v=>{const C=v.target.value;let g="";N.current=!0,S(!0);const x=C.length<E.length;if(P==="12"){const D=C.replace(/[^0-9:apmAPM\s]/g,"").replace(/[apm]/gi,ne=>ne.toUpperCase());D.match(/^(\d{0,2}):?(\d{0,2})\s?(A|AM|P|PM)?$/i)||D===""?(g=D.slice(0,8),!x&&/^\d{2}$/.test(g)&&(g=g+":")):g=E}else g=C.replace(/[^0-9:]/g,"").replace(/:+/g,":").slice(0,5),!x&&/^\d{2}$/.test(g)&&(g=g+":");L(g),M(void 0);const I=z(g,P);I&&B(I)},[P,E,B,S]);return r.useEffect(()=>{const v=new AbortController,C=x=>{x.key==="Escape"&&w(!1)},g=x=>{m.current?.contains(x.target)||w(!1)};return document.addEventListener("mousedown",g,{signal:v.signal}),document.addEventListener("keydown",C,{signal:v.signal}),()=>{v.abort()}},[]),l.jsxs("div",{ref:m,onMouseDown:o==="input"?re:void 0,className:T("w-full","text-slate-800","text-sm","flex","flex-col","gap-2"),children:[p?l.jsxs(K,{component:"label",variant:"labelLarge",htmlFor:$,className:"font-medium",children:[p," ",u&&l.jsx(K,{component:"span",className:"text-red-600 dark:text-red-500 text-sm font-normal",children:"*"})]}):null,l.jsxs("div",{className:"relative",children:[o==="select"?l.jsxs("button",{"aria-label":$,"aria-haspopup":"listbox","aria-expanded":"true","aria-controls":"time-options",className:T(me({className:n}),h&&"opacity-50 cursor-not-allowed"),"data-open":y,onClick:ee,disabled:h,children:[q,l.jsx(le,{className:"w-4 h-4 transition-all text-gray-400 data-[open=true]:rotate-180","data-open":y})]}):l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("input",{ref:k,type:"text","aria-label":$,value:E,onChange:ae,onFocus:te,onBlur:se,disabled:h,"data-error":!!_,"data-open":y,placeholder:s,className:T("w-full","h-10","px-2.5","text-sm","rounded","border","border-gray-300","bg-white","text-slate-800","transition-all","placeholder:text-slate-400","focus-visible:outline-none","data-[open=true]:ring-1","data-[open=true]:ring-aurora-500","dark:bg-metal-800","dark:border-metal-700","dark:text-white","dark:placeholder:text-metal-300","dark:data-[open=true]:ring-aurora-500","disabled:cursor-not-allowed","disabled:bg-gray-50","disabled:text-slate-500","dark:disabled:bg-metal-900","dark:disabled:text-metal-400",{"border-red-600 data-[open=true]:border-red-600 data-[open=true]:ring-transparent dark:border-red-500":_})}),_&&l.jsx(K,{component:"span",className:"text-red-600 dark:text-red-500 text-xs",children:_})]}),i&&l.jsx(Q,{isOpen:y,scrollBehavior:c,listClassName:f,listItemClassName:t,listItemButtonClassName:b,onClose:()=>w(!1)})]}),l.jsx("input",{type:"hidden",name:$,value:q,className:"hidden"})]})};X.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{mode:{required:!1,tsType:{name:"union",raw:"'select' | 'input'",elements:[{name:"literal",value:"'select'"},{name:"literal",value:"'input'"}]},description:"",defaultValue:{value:"'select'",computed:!1}},showList:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},error:{required:!1,tsType:{name:"string"},description:""}}};const Y=({format:a="12",mode:p="select",showList:u=!0,time:c,onChange:n,...f})=>l.jsx(J,{format:a,time:c,onChange:n,children:l.jsx(X,{mode:p,showList:u,...f})});Y.displayName="KonstructTimePicker";Y.__docgenInfo={description:`A scrollable time picker component with 12 or 24 hour format support.
Features smooth scroll navigation through hours, minutes, and AM/PM options.

@example
\`\`\`tsx
<TimePicker
  label="Start Time"
  name="startTime"
  format="12"
  time={selectedTime}
  scrollBehavior="smooth"
/>
\`\`\`

@see {@link https://konstructio.github.io/konstruct-ui/?path=/docs/components-timepicker--docs Storybook}`,methods:[],displayName:"KonstructTimePicker",props:{format:{required:!1,tsType:{name:"union",raw:"'12' | '24'",elements:[{name:"literal",value:"'12'"},{name:"literal",value:"'24'"}]},description:"Time format: '12' for AM/PM or '24' for military time",defaultValue:{value:"'12'",computed:!1}},mode:{required:!1,tsType:{name:"union",raw:"'select' | 'input'",elements:[{name:"literal",value:"'select'"},{name:"literal",value:"'input'"}]},description:"Input mode: 'select' for dropdown only, 'input' for typing",defaultValue:{value:"'select'",computed:!1}},showList:{required:!1,tsType:{name:"boolean"},description:"Whether to show the dropdown list (default: true)",defaultValue:{value:"true",computed:!1}},scrollBehavior:{required:!1,tsType:{name:"union",raw:"'smooth' | 'auto'",elements:[{name:"literal",value:"'smooth'"},{name:"literal",value:"'auto'"}]},description:"Scroll behavior when navigating times"},time:{required:!1,tsType:{name:"Date"},description:"Currently selected time"},name:{required:!1,tsType:{name:"string"},description:"Form field name"},label:{required:!1,tsType:{name:"string"},description:"Label displayed above the picker"},isRequired:{required:!1,tsType:{name:"boolean"},description:"Whether the field is required"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS classes for the wrapper"},listClassName:{required:!1,tsType:{name:"string"},description:"Additional CSS classes for the scrollable list"},listItemClassName:{required:!1,tsType:{name:"string"},description:"Additional CSS classes for list items"},listItemButtonClassName:{required:!1,tsType:{name:"string"},description:"Additional CSS classes for list item buttons"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(time: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"time"}],return:{name:"void"}}},description:"Callback when time changes"},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the picker is disabled"},error:{required:!1,tsType:{name:"string"},description:"Error message to display (overrides internal validation error)"},placeholder:{required:!1,tsType:{name:"string"},description:"Placeholder text for input mode"},listPosition:{required:!1,tsType:{name:"union",raw:"'top' | 'bottom'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'bottom'"}]},description:"Direction to open the dropdown list (default: 'bottom')"}}};export{le as C,Y as T};
