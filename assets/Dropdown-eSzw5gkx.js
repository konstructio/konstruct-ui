import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{r as n}from"./iframe-n8P1tJcN.js";import{u as ee}from"./useToggle-CHlN6ftY.js";import{L as te}from"./Loading-qxA8l2ge.js";import{T as $}from"./Typography-DwzCoy7c.js";import{c as E,a as x}from"./index-CJCZd66Q.js";import{S as re}from"./index-BQG_PRjY.js";import{c as U}from"./createLucideIcon-Ck16gcpB.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ae=U("chevron-up",ne);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],le=U("search",se),B=n.createContext({highlightSearchEnabled:!1,isOpen:!1,searchTerm:"",value:void 0,setSearchTerm(){throw new Error("setSearchTerm function must be overridden")},setValue(){throw new Error("setValue function must be overridden")},toggleOpen(){throw new Error("toggleOpen function must be overridden")}}),L=()=>{const u=n.useContext(B);if(!u)throw new Error("useDropdownContext must be used within a DropdownProvider");return u},H=({children:u,value:d,name:i,highlightSearch:t=!1,onChange:a,onBlur:e})=>{const m=n.useRef(t),[s,o]=ee(!1),[c,g]=n.useState(""),h=n.useCallback((l,p)=>{p?.current&&(p.current.value=l),a?.({target:{value:l,name:i??""}}),e?.()},[a,i,e]);return r.jsx(B.Provider,{value:{highlightSearchEnabled:m.current,isOpen:s,searchTerm:c,value:d,setSearchTerm:g,setValue:h,toggleOpen:o},children:u})};H.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{highlightSearch:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},name:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"intersection['onChange']",raw:"DropdownProps['onChange']"},description:""},onBlur:{required:!1,tsType:{name:"intersection['onBlur']",raw:"DropdownProps['onBlur']"},description:""}}};const ie=({inputRef:u,searchable:d,ulRef:i,wrapperInputRef:t,wrapperRef:a})=>{const e=n.useRef(0),{isOpen:m}=L();n.useEffect(()=>{const s=i.current?.querySelectorAll("li")??[],o=Array.from(s).filter(l=>l.getAttribute("data-action")!=="true"),c=new AbortController,g=()=>{e.current<o.length-1?(e.current=e.current+1,o[e.current].focus()):(e.current=0,o[0].focus())},h=()=>{e.current>0?(e.current=e.current-1,o[e.current].focus()):(e.current=0,u?.current&&d?u.current.focus():t.current?.focus())};return i.current?.addEventListener("keydown",l=>{switch(l.preventDefault(),l.key){case"ArrowDown":{g();break}case"Tab":{l.shiftKey?h():g();break}case"ArrowUp":{e.current===0?t.current?.focus():h();break}case"Enter":{o[e.current]?.click();break}}},{signal:c.signal}),()=>{c.abort()}},[i,e,t,u,d]),n.useEffect(()=>{const s=new AbortController;return a.current?.addEventListener("mouseenter",()=>{(i.current?.querySelectorAll("li")??[]).forEach(c=>c.blur())},{signal:s.signal}),()=>{s.abort()}},[i,a]),n.useEffect(()=>{m||(e.current=0)},[m])},oe=E(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3","transition-bg","duration-250","hover:bg-gray-50","focus:bg-gray-50","dark:hover:bg-slate-700","dark:focus:bg-slate-700"]),O=({isClickable:u,className:d,inputRef:i,...t})=>{const{searchTerm:a,highlightSearchEnabled:e,setValue:m,toggleOpen:s}=L(),o=n.useRef(null),c=n.useCallback(l=>{m(l.value,i),s(!1)},[m,s]),g=n.useCallback((l,p)=>{l.key==="Enter"&&(l.stopPropagation(),c(p))},[c]),h=n.useCallback(l=>{if(typeof l!="string")return l;const p=e&&a.length>0?l.split(new RegExp(`(${a})`,"gi")).map(f=>f.toLowerCase()===a.toLowerCase()?r.jsx("mark",{className:"bg-transparent font-semibold text-slate-800 dark:text-slate-50",children:f},f):f):[l];return r.jsx($,{variant:"body2",className:"text-zinc-700 dark:text-slate-50",children:p})},[e,a]);return r.jsxs("li",{ref:o,role:"option","data-action":"false",className:x(oe({className:d})),tabIndex:0,onClick:l=>{u&&(c(t),l.stopPropagation())},onKeyDown:l=>g(l,t),children:[t.leftIcon?r.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:t.leftIcon}):null,h(t.label)]})};O.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},isClickable:{required:!0,tsType:{name:"boolean"},description:""},inputRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'input'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'input'"}],raw:"ComponentRef<'input'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'input'> | null>"},description:""}}};const ce=E(["absolute","bg-white","border","flex-col","mt-1","overflow-hidden","rounded-md","shadow-2xs","top-full","w-full","z-10","max-h-[185px]","overflow-y-auto","border-gray-200","text-zinc-700","animate-in","fade-in-50","zoom-in-95","duration-[200ms]","dark:bg-slate-800","dark:border-slate-700","dark:text-slate-50"]),M=n.forwardRef(({additionalOptions:u,className:d,inputRef:i,isLoading:t,itemClassName:a,name:e,options:m,searchable:s=!1,wrapperInputRef:o,wrapperRef:c},g)=>{const h=n.useRef(null),{isOpen:l,searchTerm:p}=L();n.useImperativeHandle(g,()=>h.current,[h]),ie({ulRef:h,wrapperRef:c,wrapperInputRef:o,inputRef:i,searchable:s});const f=s?m.filter(b=>{const k=p.toLowerCase();return(typeof b.label=="string"?b.label.toLowerCase():"").includes(k)}):m,T=f.length===0;return r.jsx("ul",{ref:h,title:e,role:"listbox",className:x(ce({className:d})),"data-state":l?"open":"closed",children:t?r.jsx(O,{className:x("select-none",a),isClickable:!1,inputRef:i,value:"Loading...",label:"Loading..."}):T?r.jsx(O,{className:x("select-none",a),isClickable:!1,inputRef:i,value:"No options",label:"No options"}):r.jsxs(r.Fragment,{children:[f.map(b=>r.jsx(O,{className:x("select-none",a),isClickable:!0,inputRef:i,...b},b.value)),u?.map((b,k)=>r.jsx("li",{role:"option","data-action":"true",children:r.jsx(re,{className:"flex p-2 w-full h-full gap-1 items-center text-sm [&>svg]:w-3.5 [&>svg]:h-3.5 [&>svg]:shrink-0 cursor-pointer select-none hover:bg-gray-50 hover:dark:bg-slate-700 focus:outline-0",children:b})},k))]})})});M.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},inputRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'input'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'input'"}],raw:"ComponentRef<'input'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'input'> | null>"},description:""},isLoading:{required:!0,tsType:{name:"boolean"},description:""},itemClassName:{required:!1,tsType:{name:"string"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const ue=E(["group","border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none","h-9","border-gray-200","focus-visible:bg-zinc-50","aria-expanded:border-aurora-500","aria-expanded:text-aurora-500","kubefirst:aria-expanded:border-kubefirst-primary","kubefirst:aria-expanded:text-kubefirst-secondary","dark:border-slate-600","dark:focus-visible:bg-slate-800"],{variants:{hasError:{true:["aria-expanded:border-red-600","aria-expanded:text-red-600","kubefirst:border-red-600","kubefirst:text-red-600"],false:""},disabled:{true:["cursor-default","bg-gray-100","dark:bg-slate-700/80"],false:[]}},defaultVariants:{hasError:!1,disabled:!1}}),de=E(["flex-1","bg-transparent","border-none","outline-none","text-zinc-700","text-sm","capitalize","placeholder:text-sm","placeholder:normal-case","placeholder:select-none","dark:placeholder:text-slate-400","dark:text-slate-50"]),me=E(["mb-1","cursor-pointer","text-sm","leading-5","tracking-[0.1px]","dark:text-slate-50"]),pe=({ulRef:u,inputRef:d,disabled:i})=>{const t=n.useRef(null),a=n.useRef(null),{toggleOpen:e}=L();n.useEffect(()=>{const s=new AbortController,o=g=>{g.key==="Escape"&&e(!1)},c=g=>{t.current?.contains(g.target)||e(!1)};return document.addEventListener("keydown",o,{signal:s.signal}),document.addEventListener("mousedown",c,{signal:s.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&e(!1)},{signal:s.signal}),a.current?.addEventListener("focus",()=>{i||e(!0)},{signal:s.signal}),()=>{s.abort()}},[e,t]),n.useEffect(()=>{const s=new AbortController;return a.current?.addEventListener("keydown",o=>{if(o.key==="ArrowDown"){const c=u.current?.querySelector("li");c&&c.focus()}},{signal:s.signal}),()=>{s.abort()}},[a,u]);const m=n.useCallback(()=>{e(!0),requestAnimationFrame(()=>d?.current?.focus())},[d,e]);return{wrapperRef:t,wrapperInputRef:a,handleOpen:m}},W=n.forwardRef(({additionalOptions:u,className:d,defaultValue:i,disabled:t=!1,error:a,iconClassName:e,inputClassName:m,isLoading:s,isRequired:o,label:c,labelClassName:g,listClassName:h,listItemClassName:l,name:p,options:f,placeholder:T,searchable:b=!1,showSearchIcon:k,theme:S,wrapperClassName:G,onBlur:z,..._},J)=>{const P=n.useId(),w=n.useRef(null),F=n.useRef(null),{wrapperRef:q,wrapperInputRef:K,handleOpen:V}=pe({ulRef:F,inputRef:w,disabled:t}),{isOpen:I,searchTerm:Q,value:C,toggleOpen:X,setValue:D,setSearchTerm:A}=L(),j=p?`${P}-${p}`:P;n.useImperativeHandle(J,()=>w.current,[w]);const v=n.useMemo(()=>f.find(({value:y})=>y===C),[f,C]);n.useEffect(()=>{w.current&&(w.current.value=C?v?.value:"")},[v,C]),n.useEffect(()=>{if(i&&!C){const y=f&&f.find(N=>N.value===i);y&&D(y.value)}},[i,f,D,C]),n.useEffect(()=>{const y=new AbortController;return q.current?.addEventListener("focusout",N=>{const R=N.relatedTarget;(!R||!q.current?.contains(R))&&(A(""),w.current?.value||z?.())}),()=>{y.abort()}},[X,q,A,z,C]);const Y=y=>{const N=y.target.value;A(N);const R=f.find(Z=>Z.value.toLocaleLowerCase()===N.toLocaleLowerCase());R&&D(R.value)};return r.jsxs("div",{ref:q,className:x("flex flex-col w-full relative",G),"data-theme":S,children:[c?r.jsxs("label",{id:j,className:x(me({className:g})),htmlFor:j,onClick:()=>!t&&V(),children:[c,o&&r.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}):null,r.jsxs("div",{ref:K,id:j,className:x(ue({className:d,hasError:!!a,disabled:t})),role:"combobox",onClick:()=>!t&&V(),"aria-expanded":I,tabIndex:0,"aria-labelledby":j,children:[r.jsxs("div",{className:"flex gap-2.5 items-center flex-1",children:[v?.leftIcon&&!k&&r.jsx("span",{className:"w-4 h-4 flex justify-center items-center dark:text-slate-50",children:v.leftIcon}),k&&r.jsx(le,{className:"w-4 h-4 text-zinc-500 select-none dark:text-slate-300 dark:group-focus-within:text-slate-50 transition-colors duration-300"}),b?r.jsx("input",{ref:w,type:"text",value:I?Q:v?.label||"",name:p,onChange:Y,placeholder:T,className:x(de({className:m}),{"text-red-700 placeholder:text-red-700":!!a}),onClick:y=>{y.stopPropagation(),t||V()},"aria-label":c||T,"aria-labelledby":j,required:o,autoComplete:"off",autoCapitalize:"words",disabled:t,..._}):r.jsx($,{variant:"body2",className:x("flex-1 text-zinc-400 text-sm dark:text-slate-400",{"text-red-700":!!a,"select-none":!v,"text-slate-800 dark:text-slate-50":v,"text-slate-400/50 dark:text-slate-50/50":t}),children:v?.label||T})]}),s?r.jsx(te,{className:"w-4 h-4 text-zinc-500 select-none"}):!k&&r.jsx(ae,{"data-state":I?"open":"closed",className:x("w-4 h-4 text-zinc-500 transition-all duration-100 data-[state=open]:rotate-0 data-[state=closed]:rotate-180 select-none dark:group-focus-within:text-slate-50",e,{"text-red-700":!!a,"text-slate-400/50 dark:group-focus-within:text-zinc-500":t})})]}),!b&&r.jsx("input",{ref:w,type:"text",name:p,className:"hidden","aria-hidden":"true",required:o,inert:!0,..._}),I&&r.jsx(M,{ref:F,additionalOptions:u,className:h,itemClassName:l,name:p,wrapperRef:q,wrapperInputRef:K,inputRef:w,options:f,isLoading:!!s,searchable:b})]})});W.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{disabled:{defaultValue:{value:"false",computed:!1},required:!1},searchable:{defaultValue:{value:"false",computed:!1},required:!1}}};const fe=n.forwardRef(({onChange:u,onBlur:d,value:i,error:t,helperText:a,name:e,highlightSearch:m,...s},o)=>r.jsx(H,{highlightSearch:m,name:e,value:i,onBlur:d,onChange:u,children:r.jsxs("div",{className:"relative w-full",children:[r.jsx(W,{name:e,error:t,ref:o,onBlur:d,...s}),t?r.jsx("span",{className:"text-xs text-red-700",children:t}):null,!t&&a?r.jsx("span",{className:"text-xs text-slate-600",children:a}):null]})}));fe.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{additionalOptions:{required:!1,tsType:{name:"union",raw:"ReactNode[] | string[]",elements:[{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},error:{required:!1,tsType:{name:"string"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},highlightSearch:{required:!1,tsType:{name:"boolean"},description:""},iconClassName:{required:!1,tsType:{name:"string"},description:""},inputClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},isRequired:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:""},showSearchIcon:{required:!1,tsType:{name:"boolean"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'light'
| 'kubefirst-dark'
| 'dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'light'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'dark'"},{name:"undefined"}]},description:""},value:{required:!1,tsType:{name:"string"},description:""},wrapperClassName:{required:!1,tsType:{name:"string"},description:""},onBlur:{required:!1,tsType:{name:"VoidFunction"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { target: { value: string; name: string } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: string; name: string } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""}}};export{fe as D};
