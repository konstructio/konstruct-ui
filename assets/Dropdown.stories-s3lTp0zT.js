import{j as n}from"./jsx-runtime-D_zvdyIk.js";import{r as t}from"./index-DUAV1Q2A.js";import{u as M}from"./useToggle-BkgZmkan.js";import{c as y}from"./index-CnCxUiSm.js";import{a as j}from"./index-Bj7X0qp-.js";import{T as q}from"./Typography-BhPkp4yD.js";import{L as G}from"./Loading-haRrekeT.js";import{C as J}from"./chevron-up-r50vysvG.js";import{u as Q}from"./theme.hook-gog7kSAh.js";import"./createLucideIcon-C1R0rZF2.js";import"./index-ux_S9feM.js";const P=t.createContext({isOpen:!1,toggleOpen(){throw new Error("toggleOpen function must be overridden")},value:void 0,setValue(){throw new Error("setValue function must be overridden")}}),h=()=>{const o=t.useContext(P);if(!o)throw new Error("useTheme must be used within a DropdownProvider");return o},V=({children:o,onChange:i,value:r,name:e})=>{const[s,l]=M(!1),d=t.useCallback(a=>{i==null||i({target:{value:a,name:e??""}})},[i,e]);return n.jsx(P.Provider,{value:{value:r,isOpen:s,setValue:d,toggleOpen:l},children:o})};V.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{onChange:{required:!1,tsType:{name:"DropdownProps['onChange']",raw:"DropdownProps['onChange']"},description:""},value:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""}}};const X=({ulRef:o,wrapperRef:i,wrapperInputRef:r})=>{const e=t.useRef(0),{isOpen:s}=h();t.useEffect(()=>{var m,p;const l=((m=o.current)==null?void 0:m.querySelectorAll("li"))??[],d=new AbortController,a=()=>{e.current<l.length-1?(e.current=e.current+1,l[e.current].focus()):(e.current=0,l[0].focus())},u=()=>{var c;e.current>0?(e.current=e.current-1,l[e.current].focus()):(e.current=0,(c=r.current)==null||c.focus())};return(p=o.current)==null||p.addEventListener("keydown",c=>{var v;switch(c.preventDefault(),c.key){case"ArrowDown":{a();break}case"Tab":{c.shiftKey?u():a();break}case"ArrowUp":{e.current===0?(v=r.current)==null||v.focus():u();break}case"Enter":{const g=l[e.current].querySelector("button");g==null||g.click();break}}},{signal:d.signal}),()=>{d.abort()}},[o,e,r]),t.useEffect(()=>{var d;const l=new AbortController;return(d=i.current)==null||d.addEventListener("mouseenter",()=>{var u;(((u=o.current)==null?void 0:u.querySelectorAll("li"))??[]).forEach(m=>m.blur())},{signal:l.signal}),()=>{l.abort()}},[o,i]),t.useEffect(()=>{s||(e.current=0)},[s])},Y=j(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3","hover:bg-slate-50","focus:bg-slate-50"],{variants:{theme:{kubefirst:[""],colony:["focus:bg-red-100","hover:bg-red-100"],civo:""}},defaultVariants:{theme:"kubefirst"}}),C=({isClickable:o,theme:i,...r})=>{const{setValue:e,toggleOpen:s}=h(),l=t.useRef(null),d=t.useCallback(u=>{e(u.value),s(!1)},[e,s]),a=t.useCallback((u,m)=>{u.key==="Enter"&&d(m)},[d]);return n.jsxs("li",{ref:l,role:"option",className:y(Y({theme:i})),tabIndex:0,onClick:()=>o&&d(r),onKeyDown:u=>a(u,r),children:[r.leftIcon?n.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:r.leftIcon}):null,n.jsx(q,{variant:"body2",className:"text-zinc-700",children:r.label})]})};C.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},theme:{required:!0,tsType:{name:"DropdownProps['theme']",raw:"DropdownProps['theme']"},description:""},isClickable:{required:!0,tsType:{name:"boolean"},description:""}}};const Z=j(["absolute","bg-white","border","duration-100","ease-in-out","flex-col","mt-1","overflow-hidden","rounded-md","shadow-sm","top-full","transition-all","w-full","z-10","max-h-[185px]","overflow-y-auto"],{variants:{theme:{colony:["border-red-400"],kubefirst:["text-zinc-700"],civo:""}},defaultVariants:{theme:"kubefirst"}}),z=t.forwardRef(({isLoading:o,options:i,theme:r,wrapperRef:e,wrapperInputRef:s,name:l},d)=>{const a=t.useRef(null),{isOpen:u}=h();t.useImperativeHandle(d,()=>a.current,[a]),X({ulRef:a,wrapperRef:e,wrapperInputRef:s});const m=i.length===0;return n.jsx("ul",{ref:a,title:l,role:"listbox",className:y(Z({theme:r}),u?"flex":"hidden"),children:o?n.jsx(C,{theme:r,isClickable:!1,value:"Loading...",label:"Loading..."}):m?n.jsx(C,{theme:r,isClickable:!1,value:"No options",label:"No options"}):i.map(p=>n.jsx(C,{theme:r,isClickable:!0,...p},p.value))})});z.__docgenInfo={description:"",methods:[],displayName:"List",props:{isLoading:{required:!0,tsType:{name:"boolean"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const ee=j(["border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none","h-9"],{variants:{theme:{kubefirst:["aria-expanded:border-kubefirst-primary","aria-expanded:text-kubefirst-secondary","focus-visible:bg-purple-100"],colony:["aria-expanded:border-red-400","aria-expanded:text-red-400","focus-visible:bg-red-100"],civo:""}},defaultVariants:{theme:"kubefirst"}}),te=j(["mb-1","cursor-pointer","text-[14px]","leading-[20px]","tracking-[0.1px]"],{variants:{theme:{kubefirst:"",colony:"",civo:""}}}),re=({ulRef:o})=>{const i=t.useRef(null),r=t.useRef(null),{isOpen:e,toggleOpen:s}=h();t.useEffect(()=>{var p;const a=new AbortController,u=c=>{c.key==="Escape"&&s(!1)},m=c=>{var v;(v=i.current)!=null&&v.contains(c.target)||s(!1)};return document.addEventListener("keydown",u,{signal:a.signal}),document.addEventListener("mousedown",m,{signal:a.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&s(!1)},{signal:a.signal}),(p=r.current)==null||p.addEventListener("focus",()=>{s(!0)},{signal:a.signal}),()=>{a.abort()}},[s,i]),t.useEffect(()=>{var u;const a=new AbortController;return(u=r.current)==null||u.addEventListener("keydown",m=>{var p;if(m.key==="ArrowDown"){const c=(p=o.current)==null?void 0:p.querySelector("li");c&&c.focus()}},{signal:a.signal}),()=>{a.abort()}},[r,o]);const l=t.useCallback(()=>s(!0),[s]),d=t.useCallback(()=>{e||s(!1)},[e,s]);return{wrapperRef:i,wrapperInputRef:r,handleOpen:l,handleOpenIfClosed:d}},F=t.forwardRef(({theme:o,label:i,labelClassName:r,placeholder:e,name:s,options:l,required:d,defaultValue:a,isLoading:u},m)=>{const p=t.useId(),c=t.useRef(null),v=t.useRef(null),{wrapperRef:g,wrapperInputRef:I,handleOpen:U,handleOpenIfClosed:$}=re({ulRef:v}),{isOpen:E,toggleOpen:O,value:b,setValue:L}=h(),{theme:H}=Q(),R=o??H,x=s?`${p}-${s}`:p;t.useImperativeHandle(m,()=>c.current,[c]);const f=t.useMemo(()=>l.find(({value:w})=>w===b),[l,b]);t.useEffect(()=>{c.current&&(c.current.value=b?f==null?void 0:f.value:"")},[f,b]),t.useEffect(()=>{if(a&&!b){const w=l&&l.find(k=>k.value===a);w&&L(w.value)}},[a,l,L,b]),t.useEffect(()=>{var k;const w=new AbortController;return(k=g.current)==null||k.addEventListener("focusout",B=>{var S;const D=B.relatedTarget;(!D||!((S=g.current)!=null&&S.contains(D)))&&O(!1)}),()=>{w.abort()}},[O,g]);const W=()=>f!=null&&f.leftIcon?n.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:f.leftIcon}):null;return n.jsxs("div",{ref:g,className:"flex flex-col w-full relative",children:[i?n.jsxs("label",{id:x,className:y(te({theme:R}),r),htmlFor:x,onClick:$,children:[i,d?n.jsx("span",{className:"text-red-500 ml-1",children:"*"}):null]}):null,n.jsxs("div",{ref:I,id:x,className:y(ee({theme:R})),role:"combobox",onClick:U,"aria-expanded":E,tabIndex:0,"aria-labelledby":x,children:[n.jsx("span",{className:"text-base text-inherit",children:b?n.jsxs(q,{variant:"body2",className:"flex gap-3 items-center text-zinc-700",children:[W(),f==null?void 0:f.label]}):n.jsx(q,{variant:"body2",className:"flex gap-3 items-center text-zinc-700",children:e})}),u?n.jsx(G,{className:"w-4 h-4 text-zinc-500"}):n.jsx(J,{className:y("w-4 h-4 text-zinc-500 transition-all duration-50",E?"rotate-0":"rotate-180")})]}),n.jsx("input",{ref:c,type:"text",name:s,className:"hidden","aria-hidden":"true",required:d}),n.jsx(z,{ref:v,name:s,wrapperRef:g,wrapperInputRef:I,options:l,isLoading:!!u,theme:R})]})});F.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:`({
  target: { value, name },
}: {
  target: { value: string; name: string };
}) => void`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  target: { value: string; name: string };
}`,signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:""}],return:{name:"void"}}},description:""},label:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""}},composes:["VariantProps","Omit"]};const T=t.forwardRef(({onChange:o,value:i,name:r,...e},s)=>n.jsx(V,{onChange:o,value:i,name:r,children:n.jsx(F,{name:r,ref:s,...e})}));T.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:`({
  target: { value, name },
}: {
  target: { value: string; name: string };
}) => void`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  target: { value: string; name: string };
}`,signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:""}],return:{name:"void"}}},description:""},label:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""}},composes:["VariantProps","Omit"]};const fe={title:"In Review/Dropdown",component:T},N={args:{options:[{label:"Talos",value:"talos",leftIcon:n.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:n.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option...",required:!1,labelClassName:"",isLoading:!1,theme:"kubefirst",name:"dropdown"},render:o=>{const[i,r]=t.useState();return n.jsx(n.Fragment,{children:n.jsx("div",{className:"max-w-[350px]",children:n.jsx(T,{label:"Dropdown with Kubefirst theme",...o,onChange:({target:{value:e}})=>{console.log("value",e),r(e)},value:i})})})}};var A,_,K;N.parameters={...N.parameters,docs:{...(A=N.parameters)==null?void 0:A.docs,source:{originalSource:`{
  args: {
    options: [{
      label: 'Talos',
      value: 'talos',
      leftIcon: <img src="./talos.svg" alt="Talos Logo" />
    }, {
      label: 'K3S',
      value: 'k3s',
      leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
    }],
    placeholder: 'Select an option...',
    required: false,
    labelClassName: '',
    isLoading: false,
    theme: 'kubefirst',
    name: 'dropdown'
  },
  render: args => {
    const [value, setValue] = useState<string>();
    return <>
        <div className="max-w-[350px]">
          <DropdownComponent label="Dropdown with Kubefirst theme" {...args} onChange={({
          target: {
            value
          }
        }) => {
          console.log('value', value);
          setValue(value);
        }} value={value} />
        </div>
      </>;
  }
}`,...(K=(_=N.parameters)==null?void 0:_.docs)==null?void 0:K.source}}};const ge=["Dropdown"];export{N as Dropdown,ge as __namedExportsOrder,fe as default};
