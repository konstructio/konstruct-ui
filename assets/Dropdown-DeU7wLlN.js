import{j as t}from"./jsx-runtime-u17CrQMm.js";import{r as n}from"./iframe-BOabx110.js";import{u as re}from"./useToggle-FBujv5vt.js";import{L as ne}from"./Loading-CBsA7vrs.js";import{T as U}from"./Typography-C6rrIcRo.js";import{c as E,a as g}from"./index-CJCZd66Q.js";import{S as ae}from"./index-BARYUGcd.js";import{c as B}from"./createLucideIcon-CzzuiwYq.js";const se=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ie=B("chevron-up",se);const le=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],oe=B("search",le),H=n.createContext({highlightSearchEnabled:!1,isOpen:!1,searchTerm:"",value:void 0,setSearchTerm(){throw new Error("setSearchTerm function must be overridden")},setValue(){throw new Error("setValue function must be overridden")},toggleOpen(){throw new Error("toggleOpen function must be overridden")}}),I=()=>{const c=n.useContext(H);if(!c)throw new Error("useDropdownContext must be used within a DropdownProvider");return c},M=({children:c,value:m,name:l,highlightSearch:a=!1,onChange:r,onBlur:e})=>{const p=n.useRef(a),[s,i]=re(!1),[u,f]=n.useState(""),y=n.useCallback((d,o)=>{o?.current&&(o.current.value=d),r?.({target:{value:d,name:l??""}}),e?.()},[r,l,e]);return t.jsx(H.Provider,{value:{highlightSearchEnabled:p.current,isOpen:s,searchTerm:u,value:m,setSearchTerm:f,setValue:y,toggleOpen:i},children:c})};M.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{highlightSearch:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},name:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"intersection['onChange']",raw:"DropdownProps['onChange']"},description:""},onBlur:{required:!1,tsType:{name:"intersection['onBlur']",raw:"DropdownProps['onBlur']"},description:""}}};const ce=({inputRef:c,searchable:m,ulRef:l,wrapperInputRef:a,wrapperRef:r})=>{const e=n.useRef(0),{isOpen:p}=I();n.useEffect(()=>{const s=l.current?.querySelectorAll("li")??[],i=Array.from(s).filter(d=>d.getAttribute("data-action")!=="true"),u=new AbortController,f=()=>{e.current<i.length-1?(e.current=e.current+1,i[e.current].focus()):(e.current=0,i[0].focus())},y=()=>{e.current>0?(e.current=e.current-1,i[e.current].focus()):(e.current=0,c?.current&&m?c.current.focus():a.current?.focus())};return l.current?.addEventListener("keydown",d=>{switch(d.preventDefault(),d.key){case"ArrowDown":{f();break}case"Tab":{d.shiftKey?y():f();break}case"ArrowUp":{e.current===0?a.current?.focus():y();break}case"Enter":{i[e.current]?.click();break}}},{signal:u.signal}),()=>{u.abort()}},[l,e,a,c,m]),n.useEffect(()=>{const s=new AbortController;return r.current?.addEventListener("mouseenter",()=>{(l.current?.querySelectorAll("li")??[]).forEach(u=>u.blur())},{signal:s.signal}),()=>{s.abort()}},[l,r]),n.useEffect(()=>{p||(e.current=0)},[p])},ue=E(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3","transition-bg","duration-250","hover:bg-gray-50","focus:bg-gray-50","dark:hover:bg-slate-700","dark:focus:bg-slate-700"]),D=({isClickable:c,className:m,inputRef:l,listItemSecondRowClassName:a,...r})=>{const{searchTerm:e,highlightSearchEnabled:p,setValue:s,toggleOpen:i}=I(),u=n.useRef(null),f=n.useCallback(o=>{s(o.value,l),i(!1)},[s,i]),y=n.useCallback((o,b)=>{o.key==="Enter"&&(o.stopPropagation(),f(b))},[f]),d=n.useCallback((o,b)=>{if(typeof o!="string")return o;const h=p&&e.length>0?o.split(new RegExp(`(${e})`,"gi")).map(w=>w.toLowerCase()===e.toLowerCase()?t.jsx("mark",{className:"bg-transparent font-semibold text-slate-800 dark:text-slate-50",children:w},w):w):[o];return t.jsxs(U,{variant:"body2",className:"text-zinc-700 dark:text-slate-50 font-medium",children:[h,b?t.jsx("span",{className:g("block font-normal text-sm text-slate-800 dark:text-slate-50",a),children:b}):null]})},[p,e]);return t.jsxs("li",{ref:u,role:"option","data-action":"false",className:g(ue({className:m})),tabIndex:0,onClick:o=>{c&&(f(r),o.stopPropagation())},onKeyDown:o=>y(o,r),children:[r.leftIcon?t.jsx("span",{className:g("w-4 h-4 flex justify-center",{"items-center":!r.subLabel,"items-baseline -translate-y-2":!!r.subLabel}),children:r.leftIcon}):null,d(r.label,r.subLabel)]})};D.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},subLabel:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},listItemSecondRowClassName:{required:!1,tsType:{name:"string"},description:""},isClickable:{required:!0,tsType:{name:"boolean"},description:""},inputRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'input'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'input'"}],raw:"ComponentRef<'input'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'input'> | null>"},description:""}}};const de=E(["absolute","bg-white","border","flex-col","mt-1","overflow-hidden","rounded-md","shadow-2xs","top-full","w-full","z-10","max-h-[185px]","overflow-y-auto","border-gray-200","text-zinc-700","animate-in","fade-in-50","zoom-in-95","duration-[200ms]","dark:bg-slate-800","dark:border-slate-700","dark:text-slate-50"]),W=n.forwardRef(({additionalOptions:c,className:m,inputRef:l,isLoading:a,itemClassName:r,name:e,options:p,searchable:s=!1,listItemSecondRowClassName:i,wrapperInputRef:u,wrapperRef:f},y)=>{const d=n.useRef(null),{isOpen:o,searchTerm:b}=I();n.useImperativeHandle(y,()=>d.current,[d]),ce({ulRef:d,wrapperRef:f,wrapperInputRef:u,inputRef:l,searchable:s});const h=s?p.filter(x=>{const q=b.toLowerCase();return(typeof x.label=="string"?x.label.toLowerCase():"").includes(q)}):p,w=h.length===0;return t.jsx("ul",{ref:d,title:e,role:"listbox",className:g(de({className:m})),"data-state":o?"open":"closed",children:a?t.jsx(D,{className:g("select-none",r),isClickable:!1,inputRef:l,value:"Loading...",label:"Loading...",listItemSecondRowClassName:i}):w?t.jsx(D,{className:g("select-none",r),isClickable:!1,inputRef:l,value:"No options",label:"No options",listItemSecondRowClassName:i}):t.jsxs(t.Fragment,{children:[h.map(x=>t.jsx(D,{className:g("select-none",r),isClickable:!0,inputRef:l,listItemSecondRowClassName:i,...x},x.value)),c?.map((x,q)=>t.jsx("li",{role:"option","data-action":"true",children:t.jsx(ae,{className:"flex p-2 w-full h-full gap-1 items-center text-sm [&>svg]:w-3.5 [&>svg]:h-3.5 [&>svg]:shrink-0 cursor-pointer select-none hover:bg-gray-50 hover:dark:bg-slate-700 focus:outline-0",children:x})},q))]})})});W.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},inputRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'input'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'input'"}],raw:"ComponentRef<'input'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'input'> | null>"},description:""},isLoading:{required:!0,tsType:{name:"boolean"},description:""},itemClassName:{required:!1,tsType:{name:"string"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},listItemSecondRowClassName:{required:!1,tsType:{name:"string"},description:""},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const me=E(["group","border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none","h-9","border-gray-200","focus-visible:bg-zinc-50","aria-expanded:border-aurora-500","aria-expanded:text-aurora-500","kubefirst:aria-expanded:border-kubefirst-primary","kubefirst:aria-expanded:text-kubefirst-secondary","dark:border-slate-600","dark:focus-visible:bg-slate-800"],{variants:{hasError:{true:["aria-expanded:border-red-600","aria-expanded:text-red-600","kubefirst:border-red-600","kubefirst:text-red-600"],false:""},disabled:{true:["cursor-default","bg-gray-100","dark:bg-slate-700/80"],false:[]}},defaultVariants:{hasError:!1,disabled:!1}}),pe=E(["flex-1","bg-transparent","border-none","outline-none","text-zinc-700","text-sm","capitalize","placeholder:text-sm","placeholder:normal-case","placeholder:select-none","dark:placeholder:text-slate-400","dark:text-slate-50"]),fe=E(["mb-1","cursor-pointer","text-sm","leading-5","tracking-[0.1px]","dark:text-slate-50"]),ge=({ulRef:c,inputRef:m,disabled:l})=>{const a=n.useRef(null),r=n.useRef(null),{toggleOpen:e}=I();n.useEffect(()=>{const s=new AbortController,i=f=>{f.key==="Escape"&&e(!1)},u=f=>{a.current?.contains(f.target)||e(!1)};return document.addEventListener("keydown",i,{signal:s.signal}),document.addEventListener("mousedown",u,{signal:s.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&e(!1)},{signal:s.signal}),r.current?.addEventListener("focus",()=>{l||e(!0)},{signal:s.signal}),()=>{s.abort()}},[e,a]),n.useEffect(()=>{const s=new AbortController;return r.current?.addEventListener("keydown",i=>{if(i.key==="ArrowDown"){const u=c.current?.querySelector("li");u&&u.focus()}},{signal:s.signal}),()=>{s.abort()}},[r,c]);const p=n.useCallback(()=>{e(!0),requestAnimationFrame(()=>m?.current?.focus())},[m,e]);return{wrapperRef:a,wrapperInputRef:r,handleOpen:p}},G=n.forwardRef(({additionalOptions:c,className:m,defaultValue:l,disabled:a=!1,error:r,iconClassName:e,inputClassName:p,isLoading:s,isRequired:i,label:u,labelClassName:f,listClassName:y,listItemClassName:d,listItemSecondRowClassName:o,name:b,options:h,placeholder:w,searchable:x=!1,onSearchChange:q,showSearchIcon:O,theme:J,wrapperClassName:Q,onBlur:z,..._},X)=>{const P=n.useId(),k=n.useRef(null),F=n.useRef(null),{wrapperRef:R,wrapperInputRef:K,handleOpen:A}=ge({ulRef:F,inputRef:k,disabled:a}),{isOpen:S,searchTerm:Y,value:C,toggleOpen:Z,setValue:V,setSearchTerm:$}=I(),j=b?`${P}-${b}`:P;n.useImperativeHandle(X,()=>k.current,[k]);const N=n.useMemo(()=>h.find(({value:v})=>v===C),[h,C]);n.useEffect(()=>{k.current&&(k.current.value=C&&N?.value||"")},[N,C]),n.useEffect(()=>{if(l&&!C){const v=h&&h.find(T=>T.value===l);v&&V(v.value)}},[l,h,V,C]),n.useEffect(()=>{const v=new AbortController;return R.current?.addEventListener("focusout",T=>{const L=T.relatedTarget;(!L||!R.current?.contains(L))&&(k.current?.value||z?.())}),()=>{v.abort()}},[Z,R,$,z,C]);const ee=v=>{const T=v.target.value;q?.(T),V(""),$(T||"");const L=h.find(te=>te.value.toLocaleLowerCase()===T.toLocaleLowerCase());L&&V(L.value)};return t.jsxs("div",{ref:R,className:g("flex flex-col w-full relative",Q),"data-theme":J,children:[u?t.jsxs("label",{id:j,className:g(fe({className:f})),htmlFor:j,onClick:()=>!a&&A(),children:[u,i&&t.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}):null,t.jsxs("div",{ref:K,id:j,className:g(me({className:m,hasError:!!r,disabled:a})),role:"combobox",onClick:()=>!a&&A(),"aria-expanded":S,tabIndex:0,"aria-labelledby":j,children:[t.jsxs("div",{className:"flex gap-2.5 items-center flex-1",children:[N?.leftIcon&&!O&&t.jsx("span",{className:"w-4 h-4 flex justify-center items-center dark:text-slate-50",children:N.leftIcon}),O&&t.jsx(oe,{className:"w-4 h-4 text-zinc-500 select-none dark:text-slate-300 dark:group-focus-within:text-slate-50 transition-colors duration-300"}),x?t.jsx("input",{ref:k,type:"text",value:S?Y:N?.label||"",name:b,onChange:ee,placeholder:w,className:g(pe({className:p}),{"text-red-700 placeholder:text-red-700":!!r}),onClick:v=>{v.stopPropagation(),a||A()},"aria-label":u||w,"aria-labelledby":j,required:i,autoComplete:"off",autoCapitalize:"words",disabled:a,..._}):t.jsx(U,{variant:"body2",className:g("flex-1 text-zinc-400 text-sm dark:text-slate-400",{"text-red-700":!!r,"select-none":!N,"text-slate-800 dark:text-slate-50":N,"text-slate-400/50 dark:text-slate-50/50":a}),children:N?.label||w})]}),s?t.jsx(ne,{className:"w-4 h-4 text-zinc-500 select-none"}):!O&&t.jsx(ie,{"data-state":S?"open":"closed",className:g("w-4 h-4 text-zinc-500 transition-all duration-100 data-[state=open]:rotate-0 data-[state=closed]:rotate-180 select-none dark:group-focus-within:text-slate-50",e,{"text-red-700":!!r,"text-slate-400/50 dark:group-focus-within:text-zinc-500":a})})]}),!x&&t.jsx("input",{ref:k,type:"text",name:b,className:"hidden","aria-hidden":"true",required:i,inert:!0,..._}),S&&t.jsx(W,{ref:F,additionalOptions:c,className:y,itemClassName:d,name:b,wrapperRef:R,wrapperInputRef:K,inputRef:k,options:h,isLoading:!!s,searchable:x,listItemSecondRowClassName:o})]})});G.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{disabled:{defaultValue:{value:"false",computed:!1},required:!1},searchable:{defaultValue:{value:"false",computed:!1},required:!1}}};const be=n.forwardRef(({onChange:c,onBlur:m,value:l,error:a,helperText:r,name:e,highlightSearch:p,...s},i)=>t.jsx(M,{highlightSearch:p,name:e,value:l,onBlur:m,onChange:c,children:t.jsxs("div",{className:"relative w-full",children:[t.jsx(G,{name:e,error:a,ref:i,onBlur:m,...s}),a?t.jsx("span",{className:"text-xs text-red-700",children:a}):null,!a&&r?t.jsx("span",{className:"text-xs text-slate-600",children:r}):null]})}));be.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{additionalOptions:{required:!1,tsType:{name:"union",raw:"ReactNode[] | string[]",elements:[{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},error:{required:!1,tsType:{name:"string"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},highlightSearch:{required:!1,tsType:{name:"boolean"},description:""},iconClassName:{required:!1,tsType:{name:"string"},description:""},inputClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},isRequired:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},listItemSecondRowClassName:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  subLabel?: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"subLabel",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!1}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:""},showSearchIcon:{required:!1,tsType:{name:"boolean"},description:""},theme:{required:!1,tsType:{name:"Theme"},description:""},value:{required:!1,tsType:{name:"string"},description:""},wrapperClassName:{required:!1,tsType:{name:"string"},description:""},onBlur:{required:!1,tsType:{name:"VoidFunction"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { target: { value: string; name: string } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: string; name: string } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""},onSearchChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(searchTerm: string) => void",signature:{arguments:[{type:{name:"string"},name:"searchTerm"}],return:{name:"void"}}},description:""}}};export{be as D};
