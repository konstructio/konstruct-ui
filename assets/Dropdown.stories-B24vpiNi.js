import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{r as t}from"./index-DUAV1Q2A.js";import{u as W}from"./useToggle-BkgZmkan.js";import{c as b}from"./index-CnCxUiSm.js";import{u as B}from"./theme.hook-gog7kSAh.js";import{a as R}from"./index-Bj7X0qp-.js";import{T as q}from"./Typography-BK5SjXYW.js";import{C as G}from"./chevron-up-r50vysvG.js";import"./index-ux_S9feM.js";const S=t.createContext({isOpen:!1,toggleOpen(){throw new Error("toggleOpen function must be overridden")},value:void 0,setValue(){throw new Error("setValue function must be overridden")}}),w=()=>{const a=t.useContext(S);if(!a)throw new Error("useTheme must be used within a DropdownProvider");return a},A=({children:a,onChange:n,value:i})=>{const[e,o]=W(!1),l=t.useCallback(u=>{n==null||n({target:{value:u}})},[n]);return r.jsx(S.Provider,{value:{value:i,isOpen:e,setValue:l,toggleOpen:o},children:a})};A.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{onChange:{required:!1,tsType:{name:"DropdownProps['onChange']",raw:"DropdownProps['onChange']"},description:""},value:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}},description:""}}};const J=({ulRef:a,wrapperRef:n,wrapperInputRef:i})=>{const e=t.useRef(0),{isOpen:o}=w();t.useEffect(()=>{var p,m;const l=((p=a.current)==null?void 0:p.querySelectorAll("li"))??[],u=new AbortController,s=()=>{e.current<l.length-1?(e.current=e.current+1,l[e.current].focus()):(e.current=0,l[0].focus())},c=()=>{var d;e.current>0?(e.current=e.current-1,l[e.current].focus()):(e.current=0,(d=i.current)==null||d.focus())};return(m=a.current)==null||m.addEventListener("keydown",d=>{var f;switch(d.preventDefault(),d.key){case"ArrowDown":{s();break}case"Tab":{d.shiftKey?c():s();break}case"ArrowUp":{e.current===0?(f=i.current)==null||f.focus():c();break}case"Enter":{const v=l[e.current].querySelector("button");v==null||v.click();break}}},{signal:u.signal}),()=>{u.abort()}},[a,e,i]),t.useEffect(()=>{var u;const l=new AbortController;return(u=n.current)==null||u.addEventListener("mouseenter",()=>{var c;(((c=a.current)==null?void 0:c.querySelectorAll("li"))??[]).forEach(p=>p.blur())},{signal:l.signal}),()=>{l.abort()}},[a,n]),t.useEffect(()=>{o||(e.current=0)},[o])},M=R(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3","hover:bg-slate-50","focus:bg-slate-50"],{variants:{theme:{kubefirst:[""],colony:["focus:bg-red-100","hover:bg-red-100"],civo:""}},defaultVariants:{theme:"kubefirst"}}),_=({theme:a,...n})=>{const{setValue:i,toggleOpen:e}=w(),o=t.useRef(null),l=t.useCallback(s=>{i(s),e(!1)},[i,e]),u=t.useCallback((s,c)=>{s.key==="Enter"&&l(c)},[l]);return r.jsxs("li",{ref:o,role:"option",className:b(M({theme:a})),tabIndex:0,onClick:()=>l(n),onKeyDown:s=>u(s,n),children:[n.leftIcon?r.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:n.leftIcon}):null,r.jsx(q,{variant:"body2",className:"text-zinc-700",children:n.label})]})};_.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},theme:{required:!0,tsType:{name:"DropdownProps['theme']",raw:"DropdownProps['theme']"},description:""}}};const Q=R(["absolute","bg-white","border","duration-100","ease-in-out","flex-col","mt-1","overflow-hidden","rounded-md","shadow-sm","top-full","transition-all","w-full","z-10"],{variants:{theme:{colony:["border-red-400"],kubefirst:["text-zinc-700"],civo:""}},defaultVariants:{theme:"kubefirst"}}),K=t.forwardRef(({options:a,theme:n,wrapperRef:i,wrapperInputRef:e,name:o},l)=>{const u=t.useRef(null),{isOpen:s}=w();return t.useImperativeHandle(l,()=>u.current,[u]),J({ulRef:u,wrapperRef:i,wrapperInputRef:e}),r.jsx("ul",{ref:u,title:o,role:"listbox",className:b(Q({theme:n}),s?"flex":"hidden"),children:a.map(c=>r.jsx(_,{theme:n,...c},c.value))})});K.__docgenInfo={description:"",methods:[],displayName:"List",props:{wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const X=R(["border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none","h-9"],{variants:{theme:{kubefirst:["aria-expanded:border-kubefirst-primary","aria-expanded:text-kubefirst-secondary","focus-visible:bg-purple-100"],colony:["aria-expanded:border-red-400","aria-expanded:text-red-400","focus-visible:bg-red-100"],civo:""}},defaultVariants:{theme:"kubefirst"}}),Y=R(["mb-1","cursor-pointer","text-[14px]","leading-[20px]","tracking-[0.1px]"],{variants:{theme:{kubefirst:"",colony:"",civo:""}}}),Z=({ulRef:a})=>{const n=t.useRef(null),i=t.useRef(null),{isOpen:e,toggleOpen:o}=w();t.useEffect(()=>{var m;const s=new AbortController,c=d=>{d.key==="Escape"&&o(!1)},p=d=>{var f;(f=n.current)!=null&&f.contains(d.target)||o(!1)};return document.addEventListener("keydown",c,{signal:s.signal}),document.addEventListener("mousedown",p,{signal:s.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&o(!1)},{signal:s.signal}),(m=i.current)==null||m.addEventListener("focus",()=>{o(!0)},{signal:s.signal}),()=>{s.abort()}},[o,n]),t.useEffect(()=>{var c;const s=new AbortController;return(c=i.current)==null||c.addEventListener("keydown",p=>{var m;if(p.key==="ArrowDown"){const d=(m=a.current)==null?void 0:m.querySelector("li");d&&d.focus()}},{signal:s.signal}),()=>{s.abort()}},[i,a]);const l=t.useCallback(()=>o(!0),[o]),u=t.useCallback(()=>{e||o(!1)},[e,o]);return{wrapperRef:n,wrapperInputRef:i,handleOpen:l,handleOpenIfClosed:u}},P=t.forwardRef(({theme:a,label:n,labelClassName:i,placeholder:e,name:o,options:l,required:u,defaultValue:s},c)=>{const p=t.useId(),m=t.useRef(null),d=t.useRef(null),{wrapperRef:f,wrapperInputRef:v,handleOpen:z,handleOpenIfClosed:F}=Z({ulRef:d}),{isOpen:I,toggleOpen:C,value:g,setValue:O}=w(),{theme:U}=B(),k=a??U,y=o?`${p}-${o}`:p;t.useImperativeHandle(c,()=>m.current,[m]),t.useEffect(()=>{m.current&&(m.current.value=g?g.value:"")},[g]),t.useEffect(()=>{if(s&&!g){const h=l.find(x=>x.value===s);h&&O(h)}},[s,l,O,g]),t.useEffect(()=>{var x;const h=new AbortController;return(x=f.current)==null||x.addEventListener("focusout",H=>{var E;const T=H.relatedTarget;(!T||!((E=f.current)!=null&&E.contains(T)))&&C(!1)}),()=>{h.abort()}},[C,f]);const $=()=>g!=null&&g.leftIcon?r.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:g.leftIcon}):null;return r.jsxs("div",{ref:f,className:"flex flex-col w-full relative",children:[n?r.jsxs("label",{id:y,className:b(Y({theme:k}),i),htmlFor:y,onClick:F,children:[n,u?r.jsx("span",{className:"text-red-500 ml-1",children:"*"}):null]}):null,r.jsxs("div",{ref:v,id:y,className:b(X({theme:k})),role:"combobox",onClick:z,"aria-expanded":I,tabIndex:0,"aria-labelledby":y,children:[r.jsx("span",{className:"text-base text-inherit",children:g?r.jsxs(q,{variant:"body2",className:"flex gap-3 items-center text-zinc-700",children:[$(),g.label]}):r.jsx(q,{variant:"body2",className:"flex gap-3 items-center text-zinc-700",children:e})}),r.jsx(G,{className:b("w-4 h-4 text-zinc-500 transition-all duration-50",I?"rotate-0":"rotate-180")})]}),r.jsx("input",{ref:m,type:"text",name:o,className:"hidden","aria-hidden":"true",required:u}),r.jsx(K,{ref:d,name:o,wrapperRef:f,wrapperInputRef:v,options:l,theme:k})]})});P.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"({ target: { value } }: { target: { value: Option } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: Option } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: Option }",signature:{properties:[{key:"value",value:{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]},required:!0}}]},required:!0}}]}},name:""}],return:{name:"void"}}},description:""},label:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}},description:""}},composes:["VariantProps","Omit"]};const j=t.forwardRef(({onChange:a,value:n,...i},e)=>r.jsx(A,{onChange:a,value:n,children:r.jsx(P,{ref:e,...i})}));j.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"({ target: { value } }: { target: { value: Option } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: Option } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: Option }",signature:{properties:[{key:"value",value:{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]},required:!0}}]},required:!0}}]}},name:""}],return:{name:"void"}}},description:""},label:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}},description:""}},composes:["VariantProps","Omit"]};const ue={title:"In Review/Dropdown",component:j},N={args:{options:[{label:"Talos",value:"talos",leftIcon:r.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:r.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option...",required:!1,labelClassName:"",theme:"kubefirst",defaultValue:"",value:{label:"Talos",value:"talos",leftIcon:r.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},onChange:a=>{console.log(a)}},render:a=>{const[n,i]=t.useState();return console.log(n),r.jsx(r.Fragment,{children:r.jsx("div",{className:"max-w-[350px]",children:r.jsx(j,{label:"Dropdown with Kubefirst theme",...a,onChange:e=>{i(e)},value:n})})})}};var D,L,V;N.parameters={...N.parameters,docs:{...(D=N.parameters)==null?void 0:D.docs,source:{originalSource:`{
  args: {
    options: [{
      label: 'Talos',
      value: 'talos',
      leftIcon: <img src="./talos.svg" alt="Talos Logo" />
    }, {
      label: 'K3S',
      value: 'k3s',
      leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
    }],
    placeholder: 'Select an option...',
    required: false,
    labelClassName: '',
    theme: 'kubefirst',
    defaultValue: '',
    value: {
      label: 'Talos',
      value: 'talos',
      leftIcon: <img src="./talos.svg" alt="Talos Logo" />
    },
    onChange: option => {
      console.log(option);
    }
  },
  render: args => {
    const [value, setValue] = useState<Option>();
    console.log(value);
    return <>
        <div className="max-w-[350px]">
          <DropdownComponent label="Dropdown with Kubefirst theme" {...args} onChange={option => {
          setValue(option as unknown as Option);
        }} value={value} />
        </div>
      </>;
  }
}`,...(V=(L=N.parameters)==null?void 0:L.docs)==null?void 0:V.source}}};const ce=["Dropdown"];export{N as Dropdown,ce as __namedExportsOrder,ue as default};
