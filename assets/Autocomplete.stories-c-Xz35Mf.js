import{j as f}from"./jsx-runtime-D_zvdyIk.js";import{r as a}from"./iframe-BD1y-Aqw.js";import{c as x,f as V,a as h}from"./index-Cr-WShRT.js";import"./preload-helper-Dp1pzeXC.js";const j=x(["flex","w-full","rounded-md","border","border-zinc-200","bg-transparent","text-zinc-700","transition-colors","placeholder:text-muted-foreground","focus-visible:outline-none","focus-visible:ring-1","focus-visible:ring-ring","disabled:cursor-not-allowed","disabled:opacity-50","shadow-2xs","py-1","px-2","focus:ring-kubefirst-primary","colony:focus:focus:ring-red-400","civo:focus:focus:ring-blue-400"],{variants:{variant:{default:""}},defaultVariants:{variant:"default"}}),E=x(["pl-1","mb-2","text-base","cursor-pointer"],{variants:{variant:{default:""}},defaultVariants:{variant:"default"}}),T=({options:n,inputRef:s,wrapperRef:i,onChange:c})=>{const[t,r]=a.useState(()=>n??[]),[m,u]=a.useState(!1),[d,l]=a.useState("");a.useEffect(()=>{var p;const e=new AbortController;return(p=s.current)==null||p.addEventListener("focus",()=>u(!0),{signal:e.signal}),()=>{e.abort()}},[s]),a.useEffect(()=>{const e=new AbortController,p=o=>{var k;o.key==="Escape"&&(u(!1),(k=s.current)==null||k.blur())},g=o=>{var k;(k=i.current)!=null&&k.contains(o.target)||u(!1)};return document.addEventListener("keydown",p,{signal:e.signal}),document.addEventListener("mousedown",g,{signal:e.signal}),()=>{e.abort()}},[s,i]),a.useEffect(()=>{var p;const e=new AbortController;return(p=i.current)==null||p.addEventListener("focusout",g=>{var o;(o=i.current)!=null&&o.contains(g.relatedTarget)||u(!1)},{signal:e.signal}),()=>{e.abort()}},[i]);const v=a.useCallback(e=>{if(e.length===0)r(n);else{const p=n.map(({value:o})=>o),g=V(p,e).map(o=>({value:o}));r(g)}},[n]),b=a.useCallback(e=>{l(e.target.value),v(e.target.value),c==null||c(e.target.value)},[v,c]),y=a.useCallback(e=>{l(e),v(e),c==null||c(e),u(!1)},[v,c]);return{inputRef:s,newOptions:t,showOptions:m,value:d,handleChange:b,handleSelectValue:y}},S=({ulRef:n,inputRef:s,wrapperRef:i,options:c})=>{const t=a.useRef(0);a.useEffect(()=>{var l,v;const r=((l=n.current)==null?void 0:l.querySelectorAll("li"))??[],m=new AbortController,u=()=>{t.current<r.length-1?(t.current=t.current+1,r[t.current].focus()):(t.current=0,r[0].focus())},d=()=>{var b;t.current>0?(t.current=t.current-1,r[t.current].focus()):(t.current=0,(b=s.current)==null||b.focus())};return(v=n.current)==null||v.addEventListener("keydown",b=>{var y;switch(b.preventDefault(),b.key){case"ArrowDown":{u();break}case"Tab":{b.shiftKey?d():u();break}case"ArrowUp":{t.current===0?(y=s.current)==null||y.focus():d();break}case"Enter":{const e=r[t.current].querySelector("button");e==null||e.click();break}}},{signal:m.signal}),()=>{m.abort()}},[s,n,c,t]),a.useEffect(()=>{var m;const r=new AbortController;return(m=s.current)==null||m.addEventListener("keydown",u=>{var d;if(u.key==="ArrowDown"){const l=(d=n.current)==null?void 0:d.querySelector("li");l&&l.focus()}},{signal:r.signal}),()=>{r.abort()}},[s,n,c]),a.useEffect(()=>{var m;const r=new AbortController;return(m=i.current)==null||m.addEventListener("mouseenter",()=>{var d;(((d=n.current)==null?void 0:d.querySelectorAll("li"))??[]).forEach(l=>l.blur())},{signal:r.signal}),()=>{r.abort()}},[n,i])},L=x(["max-h-[250px]","overflow-y-auto"],{variants:{variant:{default:"bg-white"}},defaultVariants:{variant:"default"}}),R=x(["p-1","text-center","w-full","block","bg-white"],{variants:{variant:{default:""}},defaultVariants:{variant:"default"}}),I=x(["focus-visible:outline-none","focus:bg-purple-100","hover:bg-purple-100","border-transparent","colony:focus:bg-red-100","colony:hover:bg-red-100","civo:focus:bg-blue-100","civo:hover:bg-blue-100"],{variants:{variant:{default:""}},defaultVariants:{variant:"default"}}),_=x(["cursor-pointer","focus-visible:outline-none","px-3","py-1.5","w-full","text-left","focus:bg-purple-100","hover:bg-purple-100","colony:focus:bg-red-100","colony:hover:bg-red-100","civo:focus:bg-blue-100","civo:hover:bg-blue-100"],{variants:{variant:{default:""}},defaultVariants:{variant:"default"}}),q=({className:n,inputRef:s,options:i,placeholder:c,placeholderClassName:t,variant:r,wrapperRef:m,onClick:u})=>{const d=a.useRef(null);return S({ulRef:d,inputRef:s,wrapperRef:m,options:i}),i.length===0?f.jsx("span",{className:h(R({variant:r,className:t})),children:c}):f.jsx("ul",{ref:d,role:"listbox",className:h(L({variant:r,className:n})),children:i.map(({value:l})=>f.jsx("li",{role:"option",tabIndex:0,className:h(I({variant:r})),children:f.jsx("button",{type:"button",role:"button",className:h(_({variant:r})),onClick:()=>u(l),children:l})},l))})};q.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},inputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'input'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'input'"}],raw:"ComponentRef<'input'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'input'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},placeholderClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["VariantProps"]};const w=a.forwardRef(({autoComplete:n="off",className:s,label:i,labelClassName:c,name:t,options:r,placeholder:m,placeHolderEmptyValues:u="No values...",placeHolderEmptyValuesClassName:d,theme:l,variant:v,onChange:b},y)=>{const e=a.useRef(null),p=a.useRef(null),g=a.useId();a.useImperativeHandle(y,()=>p.current,[p]);const o=T({options:r,inputRef:p,wrapperRef:e,onChange:b});return f.jsxs("div",{ref:e,className:"relative flex flex-col","data-theme":l,children:[i?f.jsx("label",{htmlFor:t??g,className:h(E({variant:v,className:c})),children:i}):null,f.jsx("input",{ref:p,id:t??g,type:"text",name:t,role:"combobox",autoComplete:n,className:h(j({variant:v,className:s})),onChange:o.handleChange,value:o.value,placeholder:m,"aria-expanded":o.showOptions?"true":"false"}),o.showOptions&&f.jsx("div",{className:"absolute z-10 top-full w-full rounded-md mt-1 border shadow-sm border-zinc-200 overflow-hidden",children:f.jsx(q,{className:s,inputRef:p,wrapperRef:e,options:o.newOptions,placeholder:u,placeholderClassName:d,variant:v,onClick:o.handleSelectValue})})]})});w.displayName="Autocomplete";w.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{autoComplete:{required:!1,tsType:{name:"literal",value:"'off'"},description:"",defaultValue:{value:"'off'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},placeHolderEmptyValues:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:"",defaultValue:{value:"'No values...'",computed:!1}},placeHolderEmptyValuesClassName:{required:!1,tsType:{name:"string"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'colony'
| 'civo'
| 'kubefirst-dark'
| 'colony-dark'
| 'civo-dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'colony'"},{name:"literal",value:"'civo'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'colony-dark'"},{name:"literal",value:"'civo-dark'"},{name:"undefined"}]},description:""}},composes:["VariantProps"]};const H={title:"In Review/Autocomplete",component:w},N={args:{placeholder:"Search...",options:[{value:"Option 1"},{value:"Option 2"},{value:"Option 3"},{value:"Option 4"},{value:"Option 5"},{value:"Option 6"}]},render:n=>f.jsxs("div",{className:"w-[350px] flex flex-col gap-3",children:[f.jsx(w,{label:"Kubefirst colors",...n}),f.jsx(w,{label:"Colony colors",theme:"colony",...n}),f.jsx(w,{label:"Civo colors",theme:"civo",...n})]})};var O,C,A;N.parameters={...N.parameters,docs:{...(O=N.parameters)==null?void 0:O.docs,source:{originalSource:`{
  args: {
    placeholder: 'Search...',
    options: [{
      value: 'Option 1'
    }, {
      value: 'Option 2'
    }, {
      value: 'Option 3'
    }, {
      value: 'Option 4'
    }, {
      value: 'Option 5'
    }, {
      value: 'Option 6'
    }]
  },
  render: args => <div className="w-[350px] flex flex-col gap-3">
      <AutocompleteComponent label="Kubefirst colors" {...args} />
      <AutocompleteComponent label="Colony colors" theme="colony" {...args} />
      <AutocompleteComponent label="Civo colors" theme="civo" {...args} />
    </div>
}`,...(A=(C=N.parameters)==null?void 0:C.docs)==null?void 0:A.source}}};const P=["Autocomplete"];export{N as Autocomplete,P as __namedExportsOrder,H as default};
