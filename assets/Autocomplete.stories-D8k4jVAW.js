import{j as c}from"./jsx-runtime-D_zvdyIk.js";import{r as a}from"./iframe-OZS6fSrA.js";import{c as h,f as N,a as g}from"./index-CJCZd66Q.js";import"./preload-helper-D9Z9MdNV.js";const O=h(["flex","w-full","rounded-md","border","border-zinc-200","bg-transparent","text-zinc-700","transition-colors","placeholder:text-muted-foreground","focus-visible:outline-none","focus-visible:ring-1","focus-visible:ring-ring","disabled:cursor-not-allowed","disabled:opacity-50","shadow-2xs","py-1","px-2","focus:ring-kubefirst-primary","civo:focus:focus:ring-blue-400"],{variants:{variant:{default:""}},defaultVariants:{variant:"default"}}),q=h(["pl-1","mb-2","text-base","cursor-pointer"],{variants:{variant:{default:""}},defaultVariants:{variant:"default"}}),A=({options:n,inputRef:o,wrapperRef:l,onChange:d})=>{const[t,r]=a.useState(()=>n??[]),[p,s]=a.useState(!1),[f,u]=a.useState("");a.useEffect(()=>{const e=new AbortController;return o.current?.addEventListener("focus",()=>s(!0),{signal:e.signal}),()=>{e.abort()}},[o]),a.useEffect(()=>{const e=new AbortController,m=i=>{i.key==="Escape"&&(s(!1),o.current?.blur())},b=i=>{l.current?.contains(i.target)||s(!1)};return document.addEventListener("keydown",m,{signal:e.signal}),document.addEventListener("mousedown",b,{signal:e.signal}),()=>{e.abort()}},[o,l]),a.useEffect(()=>{const e=new AbortController;return l.current?.addEventListener("focusout",m=>{l.current?.contains(m.relatedTarget)||s(!1)},{signal:e.signal}),()=>{e.abort()}},[l]);const v=a.useCallback(e=>{if(e.length===0)r(n);else{const m=n.map(({value:i})=>i),b=N(m,e).map(i=>({value:i}));r(b)}},[n]),x=a.useCallback(e=>{u(e.target.value),v(e.target.value),d?.(e.target.value)},[v,d]),k=a.useCallback(e=>{u(e),v(e),d?.(e),s(!1)},[v,d]);return{inputRef:o,newOptions:t,showOptions:p,value:f,handleChange:x,handleSelectValue:k}},V=({ulRef:n,inputRef:o,wrapperRef:l,options:d})=>{const t=a.useRef(0);a.useEffect(()=>{const r=n.current?.querySelectorAll("li")??[],p=new AbortController,s=()=>{t.current<r.length-1?(t.current=t.current+1,r[t.current].focus()):(t.current=0,r[0].focus())},f=()=>{t.current>0?(t.current=t.current-1,r[t.current].focus()):(t.current=0,o.current?.focus())};return n.current?.addEventListener("keydown",u=>{switch(u.preventDefault(),u.key){case"ArrowDown":{s();break}case"Tab":{u.shiftKey?f():s();break}case"ArrowUp":{t.current===0?o.current?.focus():f();break}case"Enter":{r[t.current].querySelector("button")?.click();break}}},{signal:p.signal}),()=>{p.abort()}},[o,n,d,t]),a.useEffect(()=>{const r=new AbortController;return o.current?.addEventListener("keydown",p=>{if(p.key==="ArrowDown"){const s=n.current?.querySelector("li");s&&s.focus()}},{signal:r.signal}),()=>{r.abort()}},[o,n,d]),a.useEffect(()=>{const r=new AbortController;return l.current?.addEventListener("mouseenter",()=>{(n.current?.querySelectorAll("li")??[]).forEach(s=>s.blur())},{signal:r.signal}),()=>{r.abort()}},[n,l])},E=h(["max-h-[250px]","overflow-y-auto"],{variants:{variant:{default:"bg-white"}},defaultVariants:{variant:"default"}}),j=h(["p-1","text-center","w-full","block","bg-white"],{variants:{variant:{default:""}},defaultVariants:{variant:"default"}}),T=h(["focus-visible:outline-none","focus:bg-purple-100","hover:bg-purple-100","border-transparent","civo:focus:bg-blue-100","civo:hover:bg-blue-100"],{variants:{variant:{default:""}},defaultVariants:{variant:"default"}}),S=h(["cursor-pointer","focus-visible:outline-none","px-3","py-1.5","w-full","text-left","focus:bg-purple-100","hover:bg-purple-100","civo:focus:bg-blue-100","civo:hover:bg-blue-100"],{variants:{variant:{default:""}},defaultVariants:{variant:"default"}}),C=({className:n,inputRef:o,options:l,placeholder:d,placeholderClassName:t,variant:r,wrapperRef:p,onClick:s})=>{const f=a.useRef(null);return V({ulRef:f,inputRef:o,wrapperRef:p,options:l}),l.length===0?c.jsx("span",{className:g(j({variant:r,className:t})),children:d}):c.jsx("ul",{ref:f,role:"listbox",className:g(E({variant:r,className:n})),children:l.map(({value:u})=>c.jsx("li",{role:"option",tabIndex:0,className:g(T({variant:r})),children:c.jsx("button",{type:"button",role:"button",className:g(S({variant:r})),onClick:()=>s(u),children:u})},u))})};C.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},inputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'input'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'input'"}],raw:"ComponentRef<'input'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'input'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},placeholderClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["VariantProps"]};const y=a.forwardRef(({autoComplete:n="off",className:o,label:l,labelClassName:d,name:t,options:r,placeholder:p,placeHolderEmptyValues:s="No values...",placeHolderEmptyValuesClassName:f,theme:u,variant:v,onChange:x},k)=>{const e=a.useRef(null),m=a.useRef(null),b=a.useId();a.useImperativeHandle(k,()=>m.current,[m]);const i=A({options:r,inputRef:m,wrapperRef:e,onChange:x});return c.jsxs("div",{ref:e,className:"relative flex flex-col","data-theme":u,children:[l?c.jsx("label",{htmlFor:t??b,className:g(q({variant:v,className:d})),children:l}):null,c.jsx("input",{ref:m,id:t??b,type:"text",name:t,role:"combobox",autoComplete:n,className:g(O({variant:v,className:o})),onChange:i.handleChange,value:i.value,placeholder:p,"aria-expanded":i.showOptions?"true":"false"}),i.showOptions&&c.jsx("div",{className:"absolute z-10 top-full w-full rounded-md mt-1 border shadow-sm border-zinc-200 overflow-hidden",children:c.jsx(C,{className:o,inputRef:m,wrapperRef:e,options:i.newOptions,placeholder:s,placeholderClassName:f,variant:v,onClick:i.handleSelectValue})})]})});y.displayName="Autocomplete";y.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{autoComplete:{required:!1,tsType:{name:"literal",value:"'off'"},description:"",defaultValue:{value:"'off'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},placeHolderEmptyValues:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:"",defaultValue:{value:"'No values...'",computed:!1}},placeHolderEmptyValuesClassName:{required:!1,tsType:{name:"string"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'civo'
| 'kubefirst-dark'
| 'civo-dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'civo'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'civo-dark'"},{name:"undefined"}]},description:""}},composes:["VariantProps"]};const z={title:"In Review/Autocomplete",component:y},w={args:{placeholder:"Search...",options:[{value:"Option 1"},{value:"Option 2"},{value:"Option 3"},{value:"Option 4"},{value:"Option 5"},{value:"Option 6"}]},render:n=>c.jsxs("div",{className:"w-[350px] flex flex-col gap-3",children:[c.jsx(y,{label:"Kubefirst colors",...n}),c.jsx(y,{label:"Civo colors",theme:"civo",...n})]})};w.parameters={...w.parameters,docs:{...w.parameters?.docs,source:{originalSource:`{
  args: {
    placeholder: 'Search...',
    options: [{
      value: 'Option 1'
    }, {
      value: 'Option 2'
    }, {
      value: 'Option 3'
    }, {
      value: 'Option 4'
    }, {
      value: 'Option 5'
    }, {
      value: 'Option 6'
    }]
  },
  render: args => <div className="w-[350px] flex flex-col gap-3">
      <AutocompleteComponent label="Kubefirst colors" {...args} />
      <AutocompleteComponent label="Civo colors" theme="civo" {...args} />
    </div>
}`,...w.parameters?.docs?.source}}};const K=["Autocomplete"];export{w as Autocomplete,K as __namedExportsOrder,z as default};
