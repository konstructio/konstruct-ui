import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{r}from"./iframe-B9AI4aWu.js";import{u as ne}from"./useToggle-C0BKuWW7.js";import{L as se}from"./Loading-CMn-MZKx.js";import{c as L,a as x}from"./index-DJQVxuCM.js";import{T as Q}from"./Typography-qu6Z1e5h.js";import{C as oe}from"./chevron-up-CoYT15fS.js";import{M as U}from"./Modal-qR8r3wzm.js";import{B as le}from"./Button-dhQMVP_o.js";import"./createLucideIcon-RCdyzEA5.js";import"./index-CpO6tK0t.js";import"./index-DOgF4wQY.js";import"./index-BIwEoO6b.js";import"./index-C30Px5Hu.js";import"./index-BQCu312a.js";import"./index-CuGPqyjD.js";import"./Combination-BTt0FqyE.js";import"./x-BJnxY4Ij.js";const X=r.createContext({isOpen:!1,toggleOpen(){throw new Error("toggleOpen function must be overridden")},value:void 0,setValue(){throw new Error("setValue function must be overridden")},searchTerm:"",setSearchTerm(){throw new Error("setSearchTerm function must be overridden")}}),T=()=>{const l=r.useContext(X);if(!l)throw new Error("useDropdownContext must be used within a DropdownProvider");return l},Y=({children:l,onChange:o,value:a,name:e})=>{const[n,u]=ne(!1),[m,c]=r.useState(""),s=r.useCallback(i=>{o==null||o({target:{value:i,name:e??""}})},[o,e]);return t.jsx(X.Provider,{value:{value:a,isOpen:n,setValue:s,toggleOpen:u,searchTerm:m,setSearchTerm:c},children:l})};Y.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{onChange:{required:!1,tsType:{name:"DropdownProps['onChange']",raw:"DropdownProps['onChange']"},description:""},value:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""}}};const ie=({ulRef:l,wrapperRef:o,wrapperInputRef:a})=>{const e=r.useRef(0),{isOpen:n}=T();r.useEffect(()=>{var i,p;const u=((i=l.current)==null?void 0:i.querySelectorAll("li"))??[],m=new AbortController,c=()=>{e.current<u.length-1?(e.current=e.current+1,u[e.current].focus()):(e.current=0,u[0].focus())},s=()=>{var d;e.current>0?(e.current=e.current-1,u[e.current].focus()):(e.current=0,(d=a.current)==null||d.focus())};return(p=l.current)==null||p.addEventListener("keydown",d=>{var g;switch(d.preventDefault(),d.key){case"ArrowDown":{c();break}case"Tab":{d.shiftKey?s():c();break}case"ArrowUp":{e.current===0?(g=a.current)==null||g.focus():s();break}case"Enter":{const b=u[e.current].querySelector("button");b==null||b.click();break}}},{signal:m.signal}),()=>{m.abort()}},[l,e,a]),r.useEffect(()=>{var m;const u=new AbortController;return(m=o.current)==null||m.addEventListener("mouseenter",()=>{var s;(((s=l.current)==null?void 0:s.querySelectorAll("li"))??[]).forEach(i=>i.blur())},{signal:u.signal}),()=>{u.abort()}},[l,o]),r.useEffect(()=>{n||(e.current=0)},[n])},ce=L(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3","hover:bg-slate-50","focus:bg-slate-50","colony:focus:bg-red-100","colony:hover:bg-red-100"]),O=({isClickable:l,className:o,...a})=>{const{setValue:e,toggleOpen:n}=T(),u=r.useRef(null),m=r.useCallback(s=>{e(s.value),n(!1)},[e,n]),c=r.useCallback((s,i)=>{s.key==="Enter"&&(s.stopPropagation(),m(i))},[m]);return t.jsxs("li",{ref:u,role:"option",className:x(ce({className:o})),tabIndex:0,onClick:s=>{l&&(m(a),s.stopPropagation())},onKeyDown:s=>c(s,a),children:[a.leftIcon?t.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:a.leftIcon}):null,t.jsx(Q,{variant:"body2",className:"text-zinc-700",children:a.label})]})};O.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},isClickable:{required:!0,tsType:{name:"boolean"},description:""}}};const ue=L(["absolute","bg-white","border","duration-100","ease-in-out","flex-col","mt-1","overflow-hidden","rounded-md","shadow-2xs","top-full","transition-all","w-full","z-10","max-h-[185px]","overflow-y-auto","border-gray-200","text-zinc-700","data-[state=open]:block","data-[state=closed]:hidden"]),Z=r.forwardRef(({className:l,isLoading:o,itemClassName:a,name:e,options:n,searchable:u=!1,wrapperInputRef:m,wrapperRef:c},s)=>{const i=r.useRef(null),{isOpen:p,searchTerm:d}=T();r.useImperativeHandle(s,()=>i.current,[i]),ie({ulRef:i,wrapperRef:c,wrapperInputRef:m});const g=u?n.filter(y=>{const S=d.toLowerCase();return(typeof y.label=="string"?y.label.toLowerCase():"").includes(S)}):n,b=g.length===0;return t.jsx("ul",{ref:i,title:e,role:"listbox",className:x(ue({className:l})),"data-state":p?"open":"closed",children:o?t.jsx(O,{className:a,isClickable:!1,value:"Loading...",label:"Loading..."}):b?t.jsx(O,{className:a,isClickable:!1,value:"No options",label:"No options"}):g.map(y=>t.jsx(O,{className:a,isClickable:!0,...y},y.value))})});Z.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},itemClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!0,tsType:{name:"boolean"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const de=L(["border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none","h-9","border-gray-200","aria-expanded:border-kubefirst-primary","aria-expanded:text-kubefirst-secondary","focus-visible:bg-zinc-50","colony:aria-expanded:border-red-400","colony:aria-expanded:text-red-400","colony:focus-visible:bg-red-100"]),me=L(["mb-1","cursor-pointer","text-[14px]","leading-[20px]","tracking-[0.1px]"]),pe=({ulRef:l})=>{const o=r.useRef(null),a=r.useRef(null),{isOpen:e,toggleOpen:n}=T();r.useEffect(()=>{var p;const c=new AbortController,s=d=>{d.key==="Escape"&&n(!1)},i=d=>{var g;(g=o.current)!=null&&g.contains(d.target)||n(!1)};return document.addEventListener("keydown",s,{signal:c.signal}),document.addEventListener("mousedown",i,{signal:c.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&n(!1)},{signal:c.signal}),(p=a.current)==null||p.addEventListener("focus",()=>{n(!0)},{signal:c.signal}),()=>{c.abort()}},[n,o]),r.useEffect(()=>{var s;const c=new AbortController;return(s=a.current)==null||s.addEventListener("keydown",i=>{var p;if(i.key==="ArrowDown"){const d=(p=l.current)==null?void 0:p.querySelector("li");d&&d.focus()}},{signal:c.signal}),()=>{c.abort()}},[a,l]);const u=r.useCallback(()=>n(!0),[n]),m=r.useCallback(()=>{e||n(!1)},[e,n]);return{wrapperRef:o,wrapperInputRef:a,handleOpen:u,handleOpenIfClosed:m}},ee=r.forwardRef(({className:l,defaultValue:o,iconClassName:a,isLoading:e,label:n,labelClassName:u,listClassName:m,listItemClassName:c,name:s,options:i,placeholder:p,required:d,searchable:g=!1,theme:b,wrapperClassName:y},S)=>{const D=r.useId(),k=r.useRef(null),_=r.useRef(null),{wrapperRef:C,wrapperInputRef:P,handleOpen:V,handleOpenIfClosed:te}=pe({ulRef:_}),{isOpen:K,toggleOpen:z,value:h,setValue:A,setSearchTerm:M,searchTerm:re}=T(),N=s?`${D}-${s}`:D;r.useImperativeHandle(S,()=>k.current,[k]);const f=r.useMemo(()=>i.find(({value:v})=>v===h),[i,h]);r.useEffect(()=>{k.current&&(k.current.value=h?f==null?void 0:f.value:"")},[f,h]),r.useEffect(()=>{if(o&&!h){const v=i&&i.find(w=>w.value===o);v&&A(v.value)}},[o,i,A,h]),r.useEffect(()=>{var w;const v=new AbortController;return(w=C.current)==null||w.addEventListener("focusout",q=>{var B;const j=q.relatedTarget;(!j||!((B=C.current)!=null&&B.contains(j)))&&(z(!1),M(""))}),()=>{v.abort()}},[z,C,M]);const ae=v=>{const w=v.target.value;M(w);const q=i.find(j=>j.value.toLowerCase()===w.toLowerCase());q&&A(q.value)};return t.jsxs("div",{ref:C,className:x("flex flex-col w-full relative",y),"data-theme":b,children:[n?t.jsxs("label",{id:N,className:x(me({className:u})),htmlFor:N,onClick:te,children:[n,d?t.jsx("span",{className:"text-red-500 ml-1",children:"*"}):null]}):null,t.jsxs("div",{ref:P,id:N,className:x(de({className:l})),role:"combobox",onClick:V,"aria-expanded":K,tabIndex:0,"aria-labelledby":N,children:[t.jsxs("div",{className:"flex gap-3 items-center flex-1",children:[(f==null?void 0:f.leftIcon)&&t.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:f.leftIcon}),g?t.jsx("input",{type:"text",value:K?re:(f==null?void 0:f.label)||"",onChange:ae,placeholder:p,className:"flex-1 bg-transparent border-none outline-none text-zinc-700 text-base",onClick:v=>{v.stopPropagation(),V()},"aria-label":n||p,"aria-labelledby":N}):t.jsx(Q,{variant:"body2",className:"flex-1 text-zinc-700 text-base",children:(f==null?void 0:f.label)||p})]}),e?t.jsx(se,{className:"w-4 h-4 text-zinc-500"}):t.jsx(oe,{"data-state":K?"open":"closed",className:x("w-4 h-4 text-zinc-500 transition-all duration-50 data-[state=open]:rotate-0 data-[state=closed]:rotate-180",a)})]}),t.jsx("input",{ref:k,type:"text",name:s,className:"hidden","aria-hidden":"true",required:d}),t.jsx(Z,{ref:_,className:m,itemClassName:c,name:s,wrapperRef:C,wrapperInputRef:P,options:i,isLoading:!!e,searchable:g})]})});ee.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{className:{required:!1,tsType:{name:"string"},description:""},iconClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'colony'
| 'civo'
| 'kubefirst-dark'
| 'colony-dark'
| 'civo-dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'colony'"},{name:"literal",value:"'civo'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'colony-dark'"},{name:"literal",value:"'civo-dark'"},{name:"undefined"}]},description:""},value:{required:!1,tsType:{name:"string"},description:""},wrapperClassName:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { target: { value: string; name: string } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: string; name: string } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""}},composes:["VariantProps","Omit"]};const E=r.forwardRef(({onChange:l,value:o,name:a,...e},n)=>t.jsx(Y,{onChange:l,value:o,name:a,children:t.jsx(ee,{name:a,ref:n,...e})}));E.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{className:{required:!1,tsType:{name:"string"},description:""},iconClassName:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},label:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:""},theme:{required:!1,tsType:{name:"union",raw:`| 'kubefirst'
| 'colony'
| 'civo'
| 'kubefirst-dark'
| 'colony-dark'
| 'civo-dark'
| undefined`,elements:[{name:"literal",value:"'kubefirst'"},{name:"literal",value:"'colony'"},{name:"literal",value:"'civo'"},{name:"literal",value:"'kubefirst-dark'"},{name:"literal",value:"'colony-dark'"},{name:"literal",value:"'civo-dark'"},{name:"undefined"}]},description:""},value:{required:!1,tsType:{name:"string"},description:""},wrapperClassName:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { target: { value: string; name: string } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: string; name: string } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: string; name: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}}]},required:!0}}]}},name:"params"}],return:{name:"void"}}},description:""}},composes:["VariantProps","Omit"]};const Ee={title:"In Review/Dropdown",component:E},I={args:{options:[{label:"Talos",value:"talos",leftIcon:t.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:t.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option...",required:!1,labelClassName:"",isLoading:!1,theme:"kubefirst",name:"dropdown",searchable:!0},render:l=>{const[o,a]=r.useState();return t.jsx("div",{className:"max-w-[350px]",children:t.jsx(E,{label:"Dropdown with Kubefirst theme",onChange:({target:{value:e}})=>a(e),value:o,...l})})}},R={render:()=>{const[l,o]=r.useState(!1),[a,e]=r.useState();return t.jsxs("div",{children:[t.jsx(le,{onClick:()=>o(!0),theme:"kubefirst",children:"Open Modal with Dropdown"}),t.jsx(U,{isOpen:l,onClose:()=>o(!1),theme:"kubefirst",className:"min-h-[100px]",children:t.jsx(U.Body,{children:t.jsx("div",{className:"p-6",children:t.jsx(E,{label:"Choose your distribution",options:[{label:"Talos",value:"talos",leftIcon:t.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:t.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option...",onChange:({target:{value:n}})=>{console.log("value",n),e(n)},value:a,theme:"kubefirst",name:"modal-dropdown"})})})})]})}};var $,F,H;I.parameters={...I.parameters,docs:{...($=I.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    options: [{
      label: 'Talos',
      value: 'talos',
      leftIcon: <img src="./talos.svg" alt="Talos Logo" />
    }, {
      label: 'K3S',
      value: 'k3s',
      leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
    }],
    placeholder: 'Select an option...',
    required: false,
    labelClassName: '',
    isLoading: false,
    theme: 'kubefirst',
    name: 'dropdown',
    searchable: true
  },
  render: args => {
    const [value, setValue] = useState<string>();
    return <div className="max-w-[350px]">
        <DropdownComponent label="Dropdown with Kubefirst theme" onChange={({
        target: {
          value
        }
      }) => setValue(value)} value={value} {...args} />
      </div>;
  }
}`,...(H=(F=I.parameters)==null?void 0:F.docs)==null?void 0:H.source}}};var W,G,J;R.parameters={...R.parameters,docs:{...(W=R.parameters)==null?void 0:W.docs,source:{originalSource:`{
  render: () => {
    const [isOpen, setIsOpen] = useState(false);
    const [value, setValue] = useState<string>();
    return <div>
        <Button onClick={() => setIsOpen(true)} theme="kubefirst">
          Open Modal with Dropdown
        </Button>

        <Modal isOpen={isOpen} onClose={() => setIsOpen(false)} theme="kubefirst" className="min-h-[100px]">
          <Modal.Body>
            <div className="p-6">
              <DropdownComponent label="Choose your distribution" options={[{
              label: 'Talos',
              value: 'talos',
              leftIcon: <img src="./talos.svg" alt="Talos Logo" />
            }, {
              label: 'K3S',
              value: 'k3s',
              leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
            }]} placeholder="Select an option..." onChange={({
              target: {
                value
              }
            }) => {
              console.log('value', value);
              setValue(value);
            }} value={value} theme="kubefirst" name="modal-dropdown" />
            </div>
          </Modal.Body>
        </Modal>
      </div>;
  }
}`,...(J=(G=R.parameters)==null?void 0:G.docs)==null?void 0:J.source}}};const Se=["Dropdown","DropdownInModal"];export{I as Dropdown,R as DropdownInModal,Se as __namedExportsOrder,Ee as default};
