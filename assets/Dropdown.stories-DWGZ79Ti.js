import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as n}from"./index-DUAV1Q2A.js";import{u as H}from"./useToggle-BkgZmkan.js";import{c as b}from"./index-CnCxUiSm.js";import{a as k}from"./index-Bj7X0qp-.js";import{T as q}from"./Typography-BhPkp4yD.js";import{C as B}from"./chevron-up-r50vysvG.js";import{u as G}from"./theme.hook-gog7kSAh.js";import"./index-ux_S9feM.js";const A=n.createContext({value:null,isOpen:!1,toggleOpen(){throw new Error("toggleOpen function must be overridden")},setValue(){throw new Error("setValue function must be overridden")}}),v=()=>{const r=n.useContext(A);if(!r)throw new Error("useTheme must be used within a DropdownProvider");return r},K=({children:r,onChange:t})=>{const[l,o]=H(!1),[a,i]=n.useState(null),c=n.useCallback(s=>{t==null||t(s),i(s)},[t]);return e.jsx(A.Provider,{value:{value:a,isOpen:l,setValue:c,toggleOpen:o},children:r})};K.__docgenInfo={description:"",methods:[],displayName:"DropdownProvider",props:{onChange:{required:!1,tsType:{name:"DropdownProps['onChange']",raw:"DropdownProps['onChange']"},description:""}}};const J=({ulRef:r,wrapperRef:t,wrapperInputRef:l})=>{const o=n.useRef(0),{isOpen:a}=v();n.useEffect(()=>{var p,m;const i=((p=r.current)==null?void 0:p.querySelectorAll("li"))??[],c=new AbortController,s=()=>{o.current<i.length-1?(o.current=o.current+1,i[o.current].focus()):(o.current=0,i[0].focus())},d=()=>{var u;o.current>0?(o.current=o.current-1,i[o.current].focus()):(o.current=0,(u=l.current)==null||u.focus())};return(m=r.current)==null||m.addEventListener("keydown",u=>{var f;switch(u.preventDefault(),u.key){case"ArrowDown":{s();break}case"Tab":{u.shiftKey?d():s();break}case"ArrowUp":{o.current===0?(f=l.current)==null||f.focus():d();break}case"Enter":{const w=i[o.current].querySelector("button");w==null||w.click();break}}},{signal:c.signal}),()=>{c.abort()}},[r,o,l]),n.useEffect(()=>{var c;const i=new AbortController;return(c=t.current)==null||c.addEventListener("mouseenter",()=>{var d;(((d=r.current)==null?void 0:d.querySelectorAll("li"))??[]).forEach(p=>p.blur())},{signal:i.signal}),()=>{i.abort()}},[r,t]),n.useEffect(()=>{a||(o.current=0)},[a])},M=k(["cursor-pointer","py-2","px-2","h-full","focus-visible:outline-none","m-0","w-full","flex","items-center","gap-3","hover:bg-slate-50","focus:bg-slate-50"],{variants:{theme:{kubefirst:[""],colony:["focus:bg-red-100","hover:bg-red-100"],civo:""}},defaultVariants:{theme:"kubefirst"}}),S=({theme:r,...t})=>{const{setValue:l,toggleOpen:o}=v(),a=n.useRef(null),i=n.useCallback(s=>{l(s),o(!1)},[l,o]),c=n.useCallback((s,d)=>{s.key==="Enter"&&i(d)},[i]);return e.jsxs("li",{ref:a,role:"option",className:b(M({theme:r})),tabIndex:0,onClick:()=>i(t),onKeyDown:s=>c(s,t),children:[t.leftIcon?e.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:t.leftIcon}):null,e.jsx(q,{variant:"body2",className:"text-zinc-700",children:t.label})]})};S.__docgenInfo={description:"",methods:[],displayName:"ListItem",props:{label:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},leftIcon:{required:!1,tsType:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}]},description:""},value:{required:!0,tsType:{name:"string"},description:""},theme:{required:!0,tsType:{name:"DropdownProps['theme']",raw:"DropdownProps['theme']"},description:""}}};const Q=k(["absolute","bg-white","border","duration-100","ease-in-out","flex-col","mt-1","overflow-hidden","rounded-md","shadow-sm","top-full","transition-all","w-full","z-10"],{variants:{theme:{colony:["border-red-400"],kubefirst:["text-zinc-700"],civo:""}},defaultVariants:{theme:"kubefirst"}}),_=n.forwardRef(({options:r,theme:t,wrapperRef:l,wrapperInputRef:o,name:a},i)=>{const c=n.useRef(null),{isOpen:s}=v();return n.useImperativeHandle(i,()=>c.current,[c]),J({ulRef:c,wrapperRef:l,wrapperInputRef:o}),e.jsx("ul",{ref:c,title:a,role:"listbox",className:b(Q({theme:t}),s?"flex":"hidden"),children:r.map(d=>e.jsx(S,{theme:t,...d},d.value))})});_.__docgenInfo={description:"",methods:[],displayName:"List",props:{wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},wrapperInputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""}}};const X=k(["border","cursor-pointer","ease-in-out","flex","items-center","justify-between","px-3","py-1","relative","rounded-md","transition-all","w-full","outline-none","h-9"],{variants:{theme:{kubefirst:["aria-expanded:border-kubefirst-primary","aria-expanded:text-kubefirst-secondary","focus-visible:bg-purple-100"],colony:["aria-expanded:border-red-400","aria-expanded:text-red-400","focus-visible:bg-red-100"],civo:""}},defaultVariants:{theme:"kubefirst"}}),Y=k(["mb-1","cursor-pointer","text-[14px]","leading-[20px]","tracking-[0.1px]"],{variants:{theme:{kubefirst:"",colony:"",civo:""}}}),Z=({ulRef:r})=>{const t=n.useRef(null),l=n.useRef(null),{isOpen:o,toggleOpen:a}=v();n.useEffect(()=>{var m;const s=new AbortController,d=u=>{u.key==="Escape"&&a(!1)},p=u=>{var f;(f=t.current)!=null&&f.contains(u.target)||a(!1)};return document.addEventListener("keydown",d,{signal:s.signal}),document.addEventListener("mousedown",p,{signal:s.signal}),document.addEventListener("visibilitychange",()=>{document.hidden&&a(!1)},{signal:s.signal}),(m=l.current)==null||m.addEventListener("focus",()=>{a(!0)},{signal:s.signal}),()=>{s.abort()}},[a,t]),n.useEffect(()=>{var d;const s=new AbortController;return(d=l.current)==null||d.addEventListener("keydown",p=>{var m;if(p.key==="ArrowDown"){const u=(m=r.current)==null?void 0:m.querySelector("li");u&&u.focus()}},{signal:s.signal}),()=>{s.abort()}},[l,r]);const i=n.useCallback(()=>a(!0),[a]),c=n.useCallback(()=>{o||a(!1)},[o,a]);return{wrapperRef:t,wrapperInputRef:l,handleOpen:i,handleOpenIfClosed:c}},P=n.forwardRef(({theme:r,label:t,labelClassName:l,placeholder:o,name:a,options:i,defaultValue:c,required:s},d)=>{const p=n.useId(),m=n.useRef(null),u=n.useRef(null),{wrapperRef:f,wrapperInputRef:w,handleOpen:z,handleOpenIfClosed:W}=Z({ulRef:u}),{isOpen:j,value:g,setValue:I,toggleOpen:D}=v(),{theme:F}=G(),C=r??F,x=a?`${p}-${a}`:p;n.useImperativeHandle(d,()=>m.current,[m]),n.useEffect(()=>{m.current&&(m.current.value=g?g.value:"")},[g]),n.useEffect(()=>{if(c){const y=i.find(N=>N.value===c);y&&I(y)}},[c,i,I]),n.useEffect(()=>{var N;const y=new AbortController;return(N=f.current)==null||N.addEventListener("focusout",$=>{var E;const T=$.relatedTarget;(!T||!((E=f.current)!=null&&E.contains(T)))&&D(!1)}),()=>{y.abort()}},[D,f]);const U=()=>g!=null&&g.leftIcon?e.jsx("span",{className:"w-4 h-4 flex justify-center items-center",children:g.leftIcon}):null;return e.jsxs("div",{ref:f,className:"flex flex-col w-full relative",children:[t?e.jsxs("label",{id:x,className:b(Y({theme:C}),l),htmlFor:x,onClick:W,children:[t,s?e.jsx("span",{className:"text-red-500",children:"*"}):null]}):null,e.jsxs("div",{ref:w,id:x,className:b(X({theme:C})),role:"combobox",onClick:z,"aria-expanded":j,tabIndex:0,"aria-labelledby":x,children:[e.jsx("span",{className:"text-base text-inherit",children:g?e.jsxs(q,{variant:"body2",className:"flex gap-3 items-center text-zinc-700",children:[U(),g.label]}):e.jsx(q,{variant:"body2",className:"flex gap-3 items-center text-zinc-700",children:o})}),e.jsx(B,{className:b("w-4 h-4 text-zinc-500 transition-all duration-50",j?"rotate-0":"rotate-180")})]}),e.jsx("input",{ref:m,type:"text",name:a,className:"hidden","aria-hidden":"true",required:s}),e.jsx(_,{ref:u,name:a,wrapperRef:f,wrapperInputRef:w,options:i,theme:C})]})});P.__docgenInfo={description:"",methods:[],displayName:"Wrapper",props:{defaultValue:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: Option) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}},name:"value"}],return:{name:"void"}}},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""}},composes:["VariantProps"]};const h=n.forwardRef(({onChange:r,...t},l)=>e.jsx(K,{onChange:r,children:e.jsx(P,{ref:l,...t})}));h.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{defaultValue:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: Option) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  label: string | ReactNode;
  leftIcon?: ReactNode | string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!0}},{key:"leftIcon",value:{name:"union",raw:"ReactNode | string",elements:[{name:"ReactNode"},{name:"string"}],required:!1}},{key:"value",value:{name:"string",required:!0}}]}},name:"value"}],return:{name:"void"}}},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""}},composes:["VariantProps"]};const ce={title:"In Review/Dropdown",component:h},R={args:{options:[{label:"Talos",value:"talos",leftIcon:e.jsx("img",{src:"./talos.svg",alt:"Talos Logo"})},{label:"K3S",value:"k3s",leftIcon:e.jsx("img",{src:"./k3s.svg",alt:"K3S Logo"})}],placeholder:"Select an option...",required:!1,labelClassName:""},render:r=>{const t=r.options.map(l=>({...l,leftIcon:void 0}));return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Dropdowns without icons"}),e.jsxs("div",{className:"max-w-[350px]",children:[e.jsx(h,{label:"Dropdown with Kubefirst theme",theme:"kubefirst",name:"components-dropdown",...r,required:!0,options:t}),e.jsx(h,{label:"Dropdown with Colony theme",theme:"colony",name:"components-dropdown",...r,options:t})]}),e.jsx("h2",{className:"text-xl font-bold mt-8",children:"Dropdowns with icons"}),e.jsxs("div",{className:"max-w-[350px]",children:[e.jsx(h,{label:"Dropdown with Kubefirst theme",theme:"kubefirst",name:"components-dropdown",...r}),e.jsx(h,{label:"Dropdown with Colony theme",theme:"colony",name:"components-dropdown",...r})]})]})}};var O,L,V;R.parameters={...R.parameters,docs:{...(O=R.parameters)==null?void 0:O.docs,source:{originalSource:`{
  args: {
    options: [{
      label: 'Talos',
      value: 'talos',
      leftIcon: <img src="./talos.svg" alt="Talos Logo" />
    }, {
      label: 'K3S',
      value: 'k3s',
      leftIcon: <img src="./k3s.svg" alt="K3S Logo" />
    }],
    placeholder: 'Select an option...',
    required: false,
    labelClassName: ''
  },
  render: args => {
    const optionsWithoutLeftIcon = args.options.map(option => ({
      ...option,
      leftIcon: undefined
    }));
    return <>
        <h2 className="text-xl font-bold">Dropdowns without icons</h2>
        <div className="max-w-[350px]">
          <DropdownComponent label="Dropdown with Kubefirst theme" theme="kubefirst" name="components-dropdown" {...args} required options={optionsWithoutLeftIcon} />

          <DropdownComponent label="Dropdown with Colony theme" theme="colony" name="components-dropdown" {...args} options={optionsWithoutLeftIcon} />
        </div>

        <h2 className="text-xl font-bold mt-8">Dropdowns with icons</h2>
        <div className="max-w-[350px]">
          <DropdownComponent label="Dropdown with Kubefirst theme" theme="kubefirst" name="components-dropdown" {...args} />

          <DropdownComponent label="Dropdown with Colony theme" theme="colony" name="components-dropdown" {...args} />
        </div>
      </>;
  }
}`,...(V=(L=R.parameters)==null?void 0:L.docs)==null?void 0:V.source}}};const de=["Dropdown"];export{R as Dropdown,de as __namedExportsOrder,ce as default};
