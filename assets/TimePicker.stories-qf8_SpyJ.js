import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as a}from"./iframe-D01DnpOT.js";import{c as y,a as d}from"./index-CJCZd66Q.js";import{C as $}from"./chevron-down-BIzxA5gs.js";import"./preload-helper-PPVm8Dsz.js";import"./createLucideIcon-olUwYCFx.js";const L=(t,n)=>n==="12"?`${t.getHours()%12||12}:${t.getMinutes().toString().padStart(2,"0")} ${t.getHours()>=12?"PM":"AM"}`:`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`,R=t=>t.getHours(),D=t=>t.getMinutes(),S=a.createContext({time:new Date,format:"12",formattedTime:"",isAM:!1,onSelectHour(){throw new Error("onSelectHour is not implemented")},onSelectMinute(){throw new Error("onSelectMinute is not implemented")},onSelectAM(){throw new Error("onSelectAM is not implemented")},onSelectPM(){throw new Error("onSelectPM is not implemented")}}),I=({children:t,time:n,format:u})=>{const[l,c]=a.useState(u),[r,i]=a.useState(()=>n??new Date),s=a.useMemo(()=>r.getHours()<12,[r]),o=a.useCallback(p=>{const T=new Date(r);l==="12"?p===12?T.setHours(s?0:12):T.setHours(s?p:p+12):T.setHours(p),i(T)},[l,s,r]),m=a.useCallback(p=>{const T=new Date(r);T.setMinutes(p),i(T)},[r]),f=a.useCallback(()=>{const p=new Date(r),T=p.getHours();s||p.setHours(T-12),i(p)},[s,r]),b=a.useCallback(()=>{const p=new Date(r),T=p.getHours();s&&p.setHours(T+12),i(p)},[s,r]);return a.useEffect(()=>{c(l)},[l]),e.jsx(S.Provider,{value:{time:r,format:l,formattedTime:L(r,l),isAM:s,onSelectHour:o,onSelectMinute:m,onSelectAM:f,onSelectPM:b},children:t})};I.__docgenInfo={description:"",methods:[],displayName:"TimePickerProvider",props:{time:{required:!1,tsType:{name:"Date"},description:""},format:{required:!0,tsType:{name:"NonNullable",elements:[{name:"intersection['format']",raw:"TimePickerProps['format']"}],raw:"NonNullable<TimePickerProps['format']>"},description:""}}};const P=()=>{const t=a.useContext(S);if(!t)throw new Error("useTimePickerContext must be used within a TimePickerProvider");return t},V=y(["border","rounded","p-[0.625rem]","w-full","flex","items-center","justify-between","border-gray-300","cursor-pointer","transition-all","transition-duration-100","data-[open=true]:border-aurora-500","text-sm"]),k=y(["snap-y","snap-mandatory","overflow-y-scroll","scrollbar-none","flex","flex-col"]),N=y(["w-[60px]","h-[40px]","snap-start","rounded","transition-all","transition-duration-100","focus-within:outline-2","border-2","border-transparent","outline-none","hover:bg-gray-100","hover:border-2","hover:border-white","data-[active=true]:bg-blue-600","data-[active=true]:hover:border-blue-200","data-[active=true]:text-white","data-[active=true]:font-medium","focus-visible:border-blue-200","focus-within:border-blue-200"]),w=y(["flex","items-center","justify-center","cursor-pointer","w-full","h-full","px-6","py-3","outline-none","focus:border-blue-200","text-sm"]),M=({hours:t,scrollBehavior:n})=>{const u=a.useRef(null),l=a.useRef(!0),{format:c,onSelectHour:r}=P(),i=c==="12"&&t>=12?t-12:t,s=a.useCallback((o,m)=>{o.currentTarget?.blur(),r(m)},[r]);if(a.useEffect(()=>{if(l.current){const o=u.current,m=i===0&&c==="12"?12:i;o&&o.querySelector(`[data-value="${`0${m}`.slice(-2)}"]`)?.scrollIntoView({behavior:n,block:"center"}),l.current=!1}},[c,i,n]),c==="12"){const o=i===0?12:i;return e.jsx("ul",{ref:u,className:d(k()),"aria-label":"hours",role:"listbox",children:Array.from({length:12},(m,f)=>e.jsx("li",{className:d(N()),"data-value":`0${f+1}`.slice(-2),"data-active":o-1===f,role:"presentation",children:e.jsx("button",{type:"button",role:"option",className:d(w()),onClick:b=>s(b,f+1),children:f+1})},f))})}return e.jsx("ul",{ref:u,className:d(k()),"aria-label":"hours",role:"listbox",children:Array.from({length:24},(o,m)=>e.jsx("li",{className:d(N()),"data-value":`0${m}`.slice(-2),"data-active":t===m,role:"presentation",children:e.jsx("button",{type:"button",role:"option",className:d(w()),onClick:f=>s(f,m),children:m})},m))})};M.displayName="HoursList";M.__docgenInfo={description:"",methods:[],displayName:"HoursList",props:{hours:{required:!0,tsType:{name:"number"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const j=({listClassName:t,listItemClassName:n,listItemButtonClassName:u})=>{const{format:l,isAM:c,onSelectAM:r,onSelectPM:i}=P(),s=a.useCallback((o,m)=>{o.currentTarget?.blur(),m()},[]);return l==="24"?null:e.jsxs("ul",{className:d("flex items-center justify-center flex-col",t),"aria-label":"meridian",role:"listbox",children:[e.jsx("li",{className:d(N({className:n})),"data-active":c,role:"presentation",children:e.jsx("button",{type:"button",role:"option",className:d(w({className:u})),onClick:o=>s(o,r),children:"AM"})}),e.jsx("li",{className:d(N({className:n})),"data-active":!c,role:"presentation",children:e.jsx("button",{type:"button",role:"option",className:d(w({className:u})),onClick:o=>s(o,i),children:"PM"})})]})};j.displayName="MeridianList";j.__docgenInfo={description:"",methods:[],displayName:"MeridianList",props:{listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const q=({minutes:t,scrollBehavior:n})=>{const u=a.useRef(null),l=a.useRef(t),{onSelectMinute:c}=P();a.useEffect(()=>{const i=u.current;if(i){const s=`0${l.current}`.slice(-2);i.querySelector(`[data-value="${s}"]`)?.scrollIntoView({behavior:n,block:"center"})}},[n]);const r=a.useCallback((i,s)=>{c(i),s.currentTarget?.blur()},[c]);return e.jsx("ul",{ref:u,className:d(k()),"aria-label":"minutes",role:"listbox",children:Array.from({length:60},(i,s)=>e.jsx("li",{className:d(N()),"data-value":`0${s}`.slice(-2),"data-active":t===s,role:"presentation",children:e.jsx("button",{type:"button",role:"option",className:d(w()),onClick:o=>r(s,o),children:`0${s}`.slice(-2)})},s))})};q.displayName="MinutesList";q.__docgenInfo={description:"",methods:[],displayName:"MinutesList",props:{minutes:{required:!0,tsType:{name:"number"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const O=y(["flex","gap-1.5","p-2","rounded-md","shadow","w-full","max-h-[216px]","absolute mt-1","bg-white","z-10"]),H=({isOpen:t,scrollBehavior:n,listClassName:u,listItemClassName:l,listItemButtonClassName:c})=>{const{time:r}=P(),i=a.useMemo(()=>R(r),[r]),s=a.useMemo(()=>D(r),[r]);return t?e.jsxs("div",{role:"group",className:d(O()),children:[e.jsx(M,{hours:i,scrollBehavior:n,listClassName:u,listItemClassName:l,listItemButtonClassName:c}),e.jsx(q,{minutes:s,scrollBehavior:n,listClassName:u,listItemClassName:l,listItemButtonClassName:c}),e.jsx(j,{listClassName:u,listItemClassName:l,listItemButtonClassName:c})]}):null};H.__docgenInfo={description:"",methods:[],displayName:"WrapperList",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},scrollBehavior:{required:!1,tsType:{name:"intersection['scrollBehavior']",raw:"TimePickerProps['scrollBehavior']"},description:""},listClassName:{required:!1,tsType:{name:"intersection['listClassName']",raw:"TimePickerProps['listClassName']"},description:""},listItemClassName:{required:!1,tsType:{name:"intersection['listItemClassName']",raw:"TimePickerProps['listItemClassName']"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"intersection['listItemButtonClassName']",raw:"TimePickerProps['listItemButtonClassName']"},description:""}}};const _=({name:t,label:n,required:u,scrollBehavior:l,className:c,listClassName:r,listItemClassName:i,listItemButtonClassName:s})=>{const o=a.useId(),[m,f]=a.useState(!1),b=a.useRef(null),{format:p,formattedTime:T}=P(),v=t??`time-${o}`,B=a.useCallback(()=>f(h=>!h),[]);return a.useEffect(()=>{const h=new AbortController,A=g=>{g.key==="Escape"&&f(!1)},E=g=>{b.current?.contains(g.target)||f(!1)};return document.addEventListener("mousedown",E,{signal:h.signal}),document.addEventListener("keydown",A,{signal:h.signal}),()=>{h.abort()}},[]),e.jsxs("div",{ref:b,className:d("w-max text-slate-800 text-sm flex flex-col gap-2",p==="12"?"w-[208px]":"w-[140px]"),children:[n?e.jsxs("label",{htmlFor:v,className:"text-slate-500 font-medium",children:[n," ",u&&e.jsx("span",{className:"text-red-600",children:"*"})]}):null,e.jsxs("div",{className:"relative",children:[e.jsxs("button",{"aria-label":v,"aria-haspopup":"listbox","aria-expanded":"true","aria-controls":"time-options",className:d(V({className:c})),"data-open":m,onClick:B,children:[T,e.jsx($,{className:"w-4 h-4 transition-all text-gray-400 data-[open=true]:rotate-180","data-open":m})]}),e.jsx(H,{isOpen:m,scrollBehavior:l,listClassName:r,listItemClassName:i,listItemButtonClassName:s})]}),e.jsx("input",{type:"hidden",name:v,value:T,className:"hidden"})]})};_.__docgenInfo={description:"",methods:[],displayName:"Wrapper"};const x=({format:t="12",...n})=>e.jsx(I,{format:t,children:e.jsx(_,{...n})});x.displayName="TimePicker";x.__docgenInfo={description:"",methods:[],displayName:"TimePicker",props:{format:{required:!1,tsType:{name:"union",raw:"'12' | '24'",elements:[{name:"literal",value:"'12'"},{name:"literal",value:"'24'"}]},description:"",defaultValue:{value:"'12'",computed:!1}},scrollBehavior:{required:!1,tsType:{name:"union",raw:"'smooth' | 'auto'",elements:[{name:"literal",value:"'smooth'"},{name:"literal",value:"'auto'"}]},description:""},time:{required:!1,tsType:{name:"Date"},description:""},name:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},listItemClassName:{required:!1,tsType:{name:"string"},description:""},listItemButtonClassName:{required:!1,tsType:{name:"string"},description:""}}};const Q={title:"In Review/TimePicker",component:x},C={render:()=>e.jsxs("div",{className:"max-w-[350px] flex flex-col gap-2",children:[e.jsx(x,{name:"time-12",label:"Time 12 format",required:!0}),e.jsx(x,{name:"time-24",label:"Time 24 format",format:"24",required:!0})]})};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  render: () => <div className="max-w-[350px] flex flex-col gap-2">
      <TimePickerComponent name="time-12" label="Time 12 format" required />

      <TimePickerComponent name="time-24" label="Time 24 format" format="24" required />
    </div>
}`,...C.parameters?.docs?.source}}};const U=["TimePicker"];export{C as TimePicker,U as __namedExportsOrder,Q as default};
