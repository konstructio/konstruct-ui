import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{B as oe}from"./Button-BOIWnrEP.js";import{T as ne}from"./theme.provider-KqnJgRo3.js";import{u as ue,S as Y}from"./index-CDkZDzqB.js";import{r as o}from"./index-DUAV1Q2A.js";import{r as Se}from"./index-D5_VCx2I.js";import{c as je,d as Ie,b as g,a as H,u as _e}from"./index-BN8WzV49.js";import{c as Fe}from"./index-iqBVyVpj.js";import{B as Ae,R as De,P as ke}from"./index-BBj-WFAJ.js";import{P as Le}from"./index-CbLQBpw1.js";import{P as A,d as Oe}from"./index-CAE_e3kU.js";import{V as de,R as Me}from"./index-BH45yGIV.js";import{u as Ve}from"./theme.hook-gog7kSAh.js";import{c as z}from"./index-BVvdOpju.js";import{a as ee}from"./index-Bj7X0qp-.js";import{X as Ke}from"./x-DjazElhu.js";import"./index-CqVsPxxY.js";import"./index-ux_S9feM.js";var te="ToastProvider",[se,Be,He]=Fe("Toast"),[pe,_t]=je("Toast",[He]),[We,q]=pe(te),me=e=>{const{__scopeToast:n,label:r="Notification",duration:t=5e3,swipeDirection:l="right",swipeThreshold:d=50,children:p}=e,[f,h]=o.useState(null),[a,v]=o.useState(0),w=o.useRef(!1),S=o.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${te}\`. Expected non-empty \`string\`.`),s.jsx(se.Provider,{scope:n,children:s.jsx(We,{scope:n,label:r,duration:t,swipeDirection:l,swipeThreshold:d,toastCount:a,viewport:f,onViewportChange:h,onToastAdd:o.useCallback(()=>v(P=>P+1),[]),onToastRemove:o.useCallback(()=>v(P=>P-1),[]),isFocusedToastEscapeKeyDownRef:w,isClosePausedRef:S,children:p})})};me.displayName=te;var fe="ToastViewport",qe=["F8"],J="toast.viewportPause",Q="toast.viewportResume",Te=o.forwardRef((e,n)=>{const{__scopeToast:r,hotkey:t=qe,label:l="Notifications ({hotkey})",...d}=e,p=q(fe,r),f=Be(r),h=o.useRef(null),a=o.useRef(null),v=o.useRef(null),w=o.useRef(null),S=ue(n,w,p.onViewportChange),P=t.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=p.toastCount>0;o.useEffect(()=>{const i=y=>{var T;t.length!==0&&t.every(x=>y[x]||y.code===x)&&((T=w.current)==null||T.focus())};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t]),o.useEffect(()=>{const i=h.current,y=w.current;if(R&&i&&y){const m=()=>{if(!p.isClosePausedRef.current){const C=new CustomEvent(J);y.dispatchEvent(C),p.isClosePausedRef.current=!0}},T=()=>{if(p.isClosePausedRef.current){const C=new CustomEvent(Q);y.dispatchEvent(C),p.isClosePausedRef.current=!1}},x=C=>{!i.contains(C.relatedTarget)&&T()},E=()=>{i.contains(document.activeElement)||T()};return i.addEventListener("focusin",m),i.addEventListener("focusout",x),i.addEventListener("pointermove",m),i.addEventListener("pointerleave",E),window.addEventListener("blur",m),window.addEventListener("focus",T),()=>{i.removeEventListener("focusin",m),i.removeEventListener("focusout",x),i.removeEventListener("pointermove",m),i.removeEventListener("pointerleave",E),window.removeEventListener("blur",m),window.removeEventListener("focus",T)}}},[R,p.isClosePausedRef]);const u=o.useCallback(({tabbingDirection:i})=>{const m=f().map(T=>{const x=T.ref.current,E=[x,...rt(x)];return i==="forwards"?E:E.reverse()});return(i==="forwards"?m.reverse():m).flat()},[f]);return o.useEffect(()=>{const i=w.current;if(i){const y=m=>{var E,C,j;const T=m.altKey||m.ctrlKey||m.metaKey;if(m.key==="Tab"&&!T){const D=document.activeElement,_=m.shiftKey;if(m.target===i&&_){(E=a.current)==null||E.focus();return}const I=u({tabbingDirection:_?"backwards":"forwards"}),O=I.findIndex(c=>c===D);G(I.slice(O+1))?m.preventDefault():_?(C=a.current)==null||C.focus():(j=v.current)==null||j.focus()}};return i.addEventListener("keydown",y),()=>i.removeEventListener("keydown",y)}},[f,u]),s.jsxs(Ae,{ref:h,role:"region","aria-label":l.replace("{hotkey}",P),tabIndex:-1,style:{pointerEvents:R?void 0:"none"},children:[R&&s.jsx(Z,{ref:a,onFocusFromOutsideViewport:()=>{const i=u({tabbingDirection:"forwards"});G(i)}}),s.jsx(se.Slot,{scope:r,children:s.jsx(A.ol,{tabIndex:-1,...d,ref:S})}),R&&s.jsx(Z,{ref:v,onFocusFromOutsideViewport:()=>{const i=u({tabbingDirection:"backwards"});G(i)}})]})});Te.displayName=fe;var he="ToastFocusProxy",Z=o.forwardRef((e,n)=>{const{__scopeToast:r,onFocusFromOutsideViewport:t,...l}=e,d=q(he,r);return s.jsx(de,{"aria-hidden":!0,tabIndex:0,...l,ref:n,style:{position:"fixed"},onFocus:p=>{var a;const f=p.relatedTarget;!((a=d.viewport)!=null&&a.contains(f))&&t()}})});Z.displayName=he;var $="Toast",$e="toast.swipeStart",Xe="toast.swipeMove",Ue="toast.swipeCancel",Ye="toast.swipeEnd",ve=o.forwardRef((e,n)=>{const{forceMount:r,open:t,defaultOpen:l,onOpenChange:d,...p}=e,[f=!0,h]=Ie({prop:t,defaultProp:l,onChange:d});return s.jsx(Le,{present:r||f,children:s.jsx(Je,{open:f,...p,ref:n,onClose:()=>h(!1),onPause:H(e.onPause),onResume:H(e.onResume),onSwipeStart:g(e.onSwipeStart,a=>{a.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:g(e.onSwipeMove,a=>{const{x:v,y:w}=a.detail.delta;a.currentTarget.setAttribute("data-swipe","move"),a.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${v}px`),a.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${w}px`)}),onSwipeCancel:g(e.onSwipeCancel,a=>{a.currentTarget.setAttribute("data-swipe","cancel"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),a.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:g(e.onSwipeEnd,a=>{const{x:v,y:w}=a.detail.delta;a.currentTarget.setAttribute("data-swipe","end"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),a.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${v}px`),a.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${w}px`),h(!1)})})})});ve.displayName=$;var[ze,Ge]=pe($,{onClose(){}}),Je=o.forwardRef((e,n)=>{const{__scopeToast:r,type:t="foreground",duration:l,open:d,onClose:p,onEscapeKeyDown:f,onPause:h,onResume:a,onSwipeStart:v,onSwipeMove:w,onSwipeCancel:S,onSwipeEnd:P,...R}=e,u=q($,r),[i,y]=o.useState(null),m=ue(n,c=>y(c)),T=o.useRef(null),x=o.useRef(null),E=l||u.duration,C=o.useRef(0),j=o.useRef(E),D=o.useRef(0),{onToastAdd:_,onToastRemove:X}=u,F=H(()=>{var b;(i==null?void 0:i.contains(document.activeElement))&&((b=u.viewport)==null||b.focus()),p()}),I=o.useCallback(c=>{!c||c===1/0||(window.clearTimeout(D.current),C.current=new Date().getTime(),D.current=window.setTimeout(F,c))},[F]);o.useEffect(()=>{const c=u.viewport;if(c){const b=()=>{I(j.current),a==null||a()},N=()=>{const k=new Date().getTime()-C.current;j.current=j.current-k,window.clearTimeout(D.current),h==null||h()};return c.addEventListener(J,N),c.addEventListener(Q,b),()=>{c.removeEventListener(J,N),c.removeEventListener(Q,b)}}},[u.viewport,E,h,a,I]),o.useEffect(()=>{d&&!u.isClosePausedRef.current&&I(E)},[d,E,u.isClosePausedRef,I]),o.useEffect(()=>(_(),()=>X()),[_,X]);const O=o.useMemo(()=>i?ge(i):null,[i]);return u.viewport?s.jsxs(s.Fragment,{children:[O&&s.jsx(Qe,{__scopeToast:r,role:"status","aria-live":t==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),s.jsx(ze,{scope:r,onClose:F,children:Se.createPortal(s.jsx(se.ItemSlot,{scope:r,children:s.jsx(De,{asChild:!0,onEscapeKeyDown:g(f,()=>{u.isFocusedToastEscapeKeyDownRef.current||F(),u.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(A.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":d?"open":"closed","data-swipe-direction":u.swipeDirection,...R,ref:m,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:g(e.onKeyDown,c=>{c.key==="Escape"&&(f==null||f(c.nativeEvent),c.nativeEvent.defaultPrevented||(u.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:g(e.onPointerDown,c=>{c.button===0&&(T.current={x:c.clientX,y:c.clientY})}),onPointerMove:g(e.onPointerMove,c=>{if(!T.current)return;const b=c.clientX-T.current.x,N=c.clientY-T.current.y,k=!!x.current,L=["left","right"].includes(u.swipeDirection),M=["left","up"].includes(u.swipeDirection)?Math.min:Math.max,Re=L?M(0,b):0,Ne=L?0:M(0,N),U=c.pointerType==="touch"?10:2,V={x:Re,y:Ne},re={originalEvent:c,delta:V};k?(x.current=V,K(Xe,w,re,{discrete:!1})):ae(V,u.swipeDirection,U)?(x.current=V,K($e,v,re,{discrete:!1}),c.target.setPointerCapture(c.pointerId)):(Math.abs(b)>U||Math.abs(N)>U)&&(T.current=null)}),onPointerUp:g(e.onPointerUp,c=>{const b=x.current,N=c.target;if(N.hasPointerCapture(c.pointerId)&&N.releasePointerCapture(c.pointerId),x.current=null,T.current=null,b){const k=c.currentTarget,L={originalEvent:c,delta:b};ae(b,u.swipeDirection,u.swipeThreshold)?K(Ye,P,L,{discrete:!0}):K(Ue,S,L,{discrete:!0}),k.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),u.viewport)})]}):null}),Qe=e=>{const{__scopeToast:n,children:r,...t}=e,l=q($,n),[d,p]=o.useState(!1),[f,h]=o.useState(!1);return tt(()=>p(!0)),o.useEffect(()=>{const a=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(a)},[]),f?null:s.jsx(ke,{asChild:!0,children:s.jsx(de,{...t,children:d&&s.jsxs(s.Fragment,{children:[l.label," ",r]})})})},Ze="ToastTitle",we=o.forwardRef((e,n)=>{const{__scopeToast:r,...t}=e;return s.jsx(A.div,{...t,ref:n})});we.displayName=Ze;var et="ToastDescription",xe=o.forwardRef((e,n)=>{const{__scopeToast:r,...t}=e;return s.jsx(A.div,{...t,ref:n})});xe.displayName=et;var Ee="ToastAction",ye=o.forwardRef((e,n)=>{const{altText:r,...t}=e;return r.trim()?s.jsx(Pe,{altText:r,asChild:!0,children:s.jsx(be,{...t,ref:n})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ee}\`. Expected non-empty \`string\`.`),null)});ye.displayName=Ee;var Ce="ToastClose",be=o.forwardRef((e,n)=>{const{__scopeToast:r,...t}=e,l=Ge(Ce,r);return s.jsx(Pe,{asChild:!0,children:s.jsx(A.button,{type:"button",...t,ref:n,onClick:g(e.onClick,l.onClose)})})});be.displayName=Ce;var Pe=o.forwardRef((e,n)=>{const{__scopeToast:r,altText:t,...l}=e;return s.jsx(A.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":t||void 0,...l,ref:n})});function ge(e){const n=[];return Array.from(e.childNodes).forEach(t=>{if(t.nodeType===t.TEXT_NODE&&t.textContent&&n.push(t.textContent),st(t)){const l=t.ariaHidden||t.hidden||t.style.display==="none",d=t.dataset.radixToastAnnounceExclude==="";if(!l)if(d){const p=t.dataset.radixToastAnnounceAlt;p&&n.push(p)}else n.push(...ge(t))}}),n}function K(e,n,r,{discrete:t}){const l=r.originalEvent.currentTarget,d=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});n&&l.addEventListener(e,n,{once:!0}),t?Oe(l,d):l.dispatchEvent(d)}var ae=(e,n,r=0)=>{const t=Math.abs(e.x),l=Math.abs(e.y),d=t>l;return n==="left"||n==="right"?d&&t>r:!d&&l>r};function tt(e=()=>{}){const n=H(e);_e(()=>{let r=0,t=0;return r=window.requestAnimationFrame(()=>t=window.requestAnimationFrame(n)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(t)}},[n])}function st(e){return e.nodeType===e.ELEMENT_NODE}function rt(e){const n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>{const l=t.tagName==="INPUT"&&t.type==="hidden";return t.disabled||t.hidden||l?NodeFilter.FILTER_SKIP:t.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)n.push(r.currentNode);return n}function G(e){const n=document.activeElement;return e.some(r=>r===n?!0:(r.focus(),document.activeElement!==n))}var ot=me,nt=Te,at=ve,it=we,ct=xe,lt=ye;const ut=ee(["bg-white","rounded-md","shadow-md","p-4","flex","flex-col","relative","border","overflow-hidden","data-[state=open]:animate-slide-in","data-[state=closed]:animate-hide","data-[swipe=move]:translate-x-4","data-[swipe=cancel]:translate-x-0","data-[swipe=end]:animate-swipe-out"],{variants:{theme:{kubefirst:["shadow-purple-200","border-purple-100"],colony:["shadow-red-200","border-red-100"],civo:""}},defaultVariants:{theme:"kubefirst"}}),dt=ee(["fixed","bottom-0","right-0","flex","flex-col","p-[var(--viewport-padding)]","gap-8","w-[390px]","max-w-[100vw]","m-0","z-50","outline-none"],{variants:{theme:{kubefirst:"",colony:"",civo:""}},defaultVariants:{theme:"kubefirst"}}),pt=ee(["top-2","right-2","w-4","h-4"],{variants:{theme:{kubefirst:["text-kubefirst-primary"],colony:["text-red-400"],civo:""}},defaultVariants:{theme:"kubefirst"}}),W=({title:e,duration:n=5e3,titleClassName:r,descriptionClassName:t,description:l,children:d,theme:p,showCloseButton:f=!0,className:h})=>{const[a,v]=o.useState(!1),w=o.useRef(0),{theme:S}=Ve(),P=p??S;o.useEffect(()=>()=>clearTimeout(w.current),[]);const R=o.useMemo(()=>o.isValidElement(e)?s.jsx(Y,{className:r,children:e}):s.jsx("h6",{className:r,children:e}),[e,r]),u=o.useMemo(()=>o.isValidElement(l)?s.jsx(Y,{className:t,children:l}):s.jsx("h6",{className:t,children:l}),[l,t]),i=o.useCallback(()=>{v(!1),w.current=window.setTimeout(()=>v(!0),100)},[]);return s.jsxs(ot,{swipeDirection:"right",duration:n,children:[s.jsx(Y,{onClick:i,children:d}),s.jsxs(at,{className:z(ut({theme:P,className:h})),open:a,onOpenChange:v,children:[s.jsx(it,{asChild:!0,className:"text-lg mb-2 font-semibold",children:R}),s.jsx(ct,{asChild:!0,children:u}),f&&s.jsx(lt,{asChild:!0,altText:"Close the toast",children:s.jsxs("button",{type:"button",className:"absolute right-1.5 top-1.5",children:[s.jsx(Ke,{className:z(pt({theme:P}))}),s.jsx(Me,{children:"Close toast"})]})})]}),s.jsx(nt,{className:z(dt({theme:P}))})]})};W.__docgenInfo={description:"",methods:[],displayName:"Toast",props:{className:{required:!1,tsType:{name:"string"},description:""},description:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},descriptionClassName:{required:!1,tsType:{name:"string"},description:""},duration:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5000",computed:!1}},showCloseButton:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},title:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},titleClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["PropsWithChildren","VariantProps"]};const Ft={title:"In Review/Toast",component:W},B={args:{duration:1500},render:e=>s.jsxs("div",{className:"w-[350px] flex flex-col gap-3",children:[s.jsx(ne,{theme:"kubefirst",children:s.jsx(W,{...e,title:s.jsx("h6",{children:"This is a title"}),description:s.jsx("p",{children:"This is a description"}),titleClassName:"text-kubefirst-secondary",descriptionClassName:"text-kubefirst-primary",className:"bg-purple-50",children:s.jsx(oe,{children:"Show Toast Kubefirst Theme"})})}),s.jsx(ne,{theme:"colony",children:s.jsx(W,{...e,title:s.jsx("h6",{children:"This is a title"}),description:s.jsx("p",{children:"This is a description"}),titleClassName:"text-red-600",descriptionClassName:"text-red-400",className:"bg-red-50",children:s.jsx(oe,{children:"Show Toast Colony Theme"})})})]})};var ie,ce,le;B.parameters={...B.parameters,docs:{...(ie=B.parameters)==null?void 0:ie.docs,source:{originalSource:`{
  args: {
    duration: 1500
  },
  render: args => <div className="w-[350px] flex flex-col gap-3">
      <ThemeProvider theme="kubefirst">
        <ToastComponent {...args} title={<h6>This is a title</h6>} description={<p>This is a description</p>} titleClassName="text-kubefirst-secondary" descriptionClassName="text-kubefirst-primary" className="bg-purple-50">
          <Button>Show Toast Kubefirst Theme</Button>
        </ToastComponent>
      </ThemeProvider>

      <ThemeProvider theme="colony">
        <ToastComponent {...args} title={<h6>This is a title</h6>} description={<p>This is a description</p>} titleClassName="text-red-600" descriptionClassName="text-red-400" className="bg-red-50">
          <Button>Show Toast Colony Theme</Button>
        </ToastComponent>
      </ThemeProvider>
    </div>
}`,...(le=(ce=B.parameters)==null?void 0:ce.docs)==null?void 0:le.source}}};const At=["Toast"];export{B as Toast,At as __namedExportsOrder,Ft as default};
