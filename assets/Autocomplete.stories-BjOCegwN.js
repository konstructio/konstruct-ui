import{j as b}from"./jsx-runtime-BjgbQsUx.js";import{r as s}from"./index-BuYn5Wpo.js";import{f as C,a as k,c as w}from"./index-Dl2HxxTD.js";import{u as S}from"./theme.hook-3iWrhCdO.js";import"./index-D2MAbzvX.js";const q=({options:o,inputRef:a,wrapperRef:l,onChange:i})=>{const[t,r]=s.useState(()=>o??[]),[n,c]=s.useState(!1),[f,u]=s.useState("");s.useEffect(()=>{var m;const e=new AbortController;return(m=a.current)==null||m.addEventListener("focus",()=>c(!0),{signal:e.signal}),()=>{e.abort()}},[a]),s.useEffect(()=>{const e=new AbortController,m=p=>{var h;p.key==="Escape"&&(c(!1),(h=a.current)==null||h.blur())},g=p=>{var h;(h=l.current)!=null&&h.contains(p.target)||c(!1)};return document.addEventListener("keydown",m,{signal:e.signal}),document.addEventListener("mousedown",g,{signal:e.signal}),()=>{e.abort()}},[a,l]),s.useEffect(()=>{var m;const e=new AbortController;return(m=l.current)==null||m.addEventListener("focusout",g=>{var p;(p=l.current)!=null&&p.contains(g.relatedTarget)||c(!1)},{signal:e.signal}),()=>{e.abort()}},[l]);const d=s.useCallback(e=>{if(e.length===0)r(o);else{const m=o.map(({value:p})=>p),g=C(m,e).map(p=>({value:p}));r(g)}},[o]),v=s.useCallback(e=>{u(e.target.value),d(e.target.value),i==null||i(e.target.value)},[d,i]),y=s.useCallback(e=>{u(e),d(e),i==null||i(e),c(!1)},[d,i]);return{inputRef:a,newOptions:t,showOptions:n,value:f,handleChange:v,handleSelectValue:y}},L=({ulRef:o,inputRef:a,wrapperRef:l,options:i})=>{const t=s.useRef(0);s.useEffect(()=>{var u,d;const r=((u=o.current)==null?void 0:u.querySelectorAll("li"))??[],n=new AbortController,c=()=>{t.current<r.length-1?(t.current=t.current+1,r[t.current].focus()):(t.current=0,r[0].focus())},f=()=>{var v;t.current>0?(t.current=t.current-1,r[t.current].focus()):(t.current=0,(v=a.current)==null||v.focus())};return(d=o.current)==null||d.addEventListener("keydown",v=>{var y;switch(v.preventDefault(),v.key){case"ArrowDown":{c();break}case"Tab":{v.shiftKey?f():c();break}case"ArrowUp":{t.current===0?(y=a.current)==null||y.focus():f();break}case"Enter":{const e=r[t.current].querySelector("button");e==null||e.click();break}}},{signal:n.signal}),()=>{n.abort()}},[a,o,i,t]),s.useEffect(()=>{var n;const r=new AbortController;return(n=a.current)==null||n.addEventListener("keydown",c=>{var f;if(c.key==="ArrowDown"){const u=(f=o.current)==null?void 0:f.querySelector("li");u&&u.focus()}},{signal:r.signal}),()=>{r.abort()}},[a,o,i]),s.useEffect(()=>{var n;const r=new AbortController;return(n=l.current)==null||n.addEventListener("mouseenter",()=>{var f;(((f=o.current)==null?void 0:f.querySelectorAll("li"))??[]).forEach(u=>u.blur())},{signal:r.signal}),()=>{r.abort()}},[o,l])},T=k(["max-h-[250px]","overflow-y-auto"],{variants:{variant:{default:"bg-white"},theme:{kubefirst:"",colony:"",civo:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),I=k(["p-1","text-center","w-full block","bg-white"],{variants:{variant:{default:""},theme:{kubefirst:"",colony:"",civo:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),R=k(["focus-visible:outline-none"],{variants:{variant:{default:""},theme:{kubefirst:["focus:bg-purple-100","hover:bg-purple-100"],colony:["focus:bg-red-100","hover:bg-red-100"],civo:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),_=k(["cursor-pointer","focus-visible:outline-none","px-3","py-1.5","w-full","text-left"],{variants:{variant:{default:""},theme:{kubefirst:["focus:bg-purple-100","hover:bg-purple-100"],colony:["focus:bg-red-100","hover:bg-red-100"],civo:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),j=({className:o,inputRef:a,options:l,placeholder:i,placeholderClassName:t,variant:r,theme:n,wrapperRef:c,onClick:f})=>{const u=s.useRef(null);return L({ulRef:u,inputRef:a,wrapperRef:c,options:l}),l.length===0?b.jsx("span",{className:w(I({theme:n,variant:r,className:t})),children:i}):b.jsx("ul",{ref:u,role:"listbox",className:w(T({variant:r,theme:n,className:o})),children:l.map(({value:d})=>b.jsx("li",{role:"option",tabIndex:0,className:w(R({theme:n,variant:r})),children:b.jsx("button",{type:"button",role:"button",className:w(_({theme:n,variant:r})),onClick:()=>f(d),children:d})},d))})};j.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},inputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'input'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'input'"}],raw:"ComponentRef<'input'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'input'> | null>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"union",raw:"ComponentRef<'div'> | null",elements:[{name:"ComponentRef",elements:[{name:"literal",value:"'div'"}],raw:"ComponentRef<'div'>"},{name:"null"}]}],raw:"RefObject<ComponentRef<'div'> | null>"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},placeholderClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["VariantProps"]};const D=k(["flex","w-full","rounded-md","border","border-zinc-200","bg-transparent","text-base","text-zinc-700","transition-colors","placeholder:text-muted-foreground","focus-visible:outline-none","focus-visible:ring-1","focus-visible:ring-ring","disabled:cursor-not-allowed","disabled:opacity-50","shadow-sm","py-1","px-2"],{variants:{variant:{default:""},theme:{kubefirst:["focus:ring-kubefirst-primary"],colony:["focus:focus:ring-red-400"],civo:""}},defaultVariants:{theme:"kubefirst",variant:"default"}}),K=k(["pl-1","mb-2","text-base","cursor-pointer"],{variants:{variant:{default:""},theme:{kubefirst:"",colony:"",civo:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),O=s.forwardRef(({autoComplete:o="off",className:a,label:l,labelClassName:i,name:t,options:r,placeHolderEmptyValues:n="No values...",placeHolderEmptyValuesClassName:c,placeholder:f,theme:u,variant:d,onChange:v},y)=>{const e=s.useRef(null),m=s.useRef(null),g=s.useId(),{theme:p}=S(),h=u??p;s.useImperativeHandle(y,()=>m.current,[m]);const x=q({options:r,inputRef:m,wrapperRef:e,onChange:v});return b.jsxs("div",{ref:e,className:"relative flex flex-col",children:[l?b.jsx("label",{htmlFor:t??g,className:w(K({theme:h,variant:d,className:i})),children:l}):null,b.jsx("input",{ref:m,id:t??g,type:"text",name:t,role:"combobox",autoComplete:o,className:w(D({theme:h,variant:d,className:a})),onChange:x.handleChange,value:x.value,placeholder:f,"aria-expanded":x.showOptions?"true":"false"}),x.showOptions&&b.jsx("div",{className:"absolute z-10 top-full w-full rounded-md mt-1 border shadow-sm",children:b.jsx(j,{className:a,inputRef:m,wrapperRef:e,options:x.newOptions,placeholder:n,placeholderClassName:c,variant:d,theme:h,onClick:x.handleSelectValue})})]})});O.displayName="Autocomplete";O.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{autoComplete:{defaultValue:{value:"'off'",computed:!1},required:!1},placeHolderEmptyValues:{defaultValue:{value:"'No values...'",computed:!1},required:!1}}};const U={title:"Design System/Autocomplete",component:O},N={args:{placeholder:"Search...",options:[{value:"Option 1"},{value:"Option 2"},{value:"Option 3"},{value:"Option 4"},{value:"Option 5"},{value:"Option 6"}]},render:o=>b.jsxs("div",{className:"w-[350px] flex flex-col gap-3",children:[b.jsx(O,{label:"Kubefirst colors",...o}),b.jsx(O,{label:"Colony colors",theme:"colony",...o})]})};var A,E,V;N.parameters={...N.parameters,docs:{...(A=N.parameters)==null?void 0:A.docs,source:{originalSource:`{
  args: {
    placeholder: 'Search...',
    options: [{
      value: 'Option 1'
    }, {
      value: 'Option 2'
    }, {
      value: 'Option 3'
    }, {
      value: 'Option 4'
    }, {
      value: 'Option 5'
    }, {
      value: 'Option 6'
    }]
  },
  render: args => <div className="w-[350px] flex flex-col gap-3">
      <AutocompleteComponent label="Kubefirst colors" {...args} />
      <AutocompleteComponent label="Colony colors" theme="colony" {...args} />
    </div>
}`,...(V=(E=N.parameters)==null?void 0:E.docs)==null?void 0:V.source}}};const $=["Autocomplete"];export{N as Autocomplete,$ as __namedExportsOrder,U as default};
