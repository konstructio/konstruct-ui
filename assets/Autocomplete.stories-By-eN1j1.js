import{j as p}from"./jsx-runtime-DR9Q75dM.js";import{r as s}from"./index-DRjF_FHU.js";import{c as k}from"./index-Bb4qSo10.js";import{f as V}from"./index-Ch1LPoRI.js";import{u as L}from"./theme.hook-BDfr3XbF.js";const T=({options:o,inputRef:a,wrapperRef:l,onChange:c})=>{const[t,r]=s.useState(()=>o??[]),[n,u]=s.useState(!1),[m,i]=s.useState("");s.useEffect(()=>{var f;const e=new AbortController;return(f=a.current)==null||f.addEventListener("focus",()=>u(!0),{signal:e.signal}),()=>{e.abort()}},[a]),s.useEffect(()=>{const e=new AbortController,f=b=>{var v;b.key==="Escape"&&(u(!1),(v=a.current)==null||v.blur())},h=b=>{var v;(v=l.current)!=null&&v.contains(b.target)||u(!1)};return document.addEventListener("keydown",f,{signal:e.signal}),document.addEventListener("mousedown",h,{signal:e.signal}),()=>{e.abort()}},[a,l]),s.useEffect(()=>{var f;const e=new AbortController;return(f=l.current)==null||f.addEventListener("focusout",h=>{var b;(b=l.current)!=null&&b.contains(h.relatedTarget)||u(!1)},{signal:e.signal}),()=>{e.abort()}},[l]);const d=s.useCallback(e=>{if(e.length===0)r(o);else{const f=o.map(({value:b})=>b),h=V(f,e).map(b=>({value:b}));r(h)}},[o]),g=s.useCallback(e=>{i(e.target.value),d(e.target.value),c==null||c(e.target.value)},[d,c]),x=s.useCallback(e=>{i(e),d(e),c==null||c(e),u(!1)},[d,c]);return{inputRef:a,newOptions:t,showOptions:n,value:m,handleChange:g,handleSelectValue:x}},q=({ulRef:o,inputRef:a,wrapperRef:l,options:c})=>{const t=s.useRef(0);s.useEffect(()=>{var i,d;const r=((i=o.current)==null?void 0:i.querySelectorAll("li"))??[],n=new AbortController,u=()=>{t.current<r.length-1?(t.current=t.current+1,r[t.current].focus()):(t.current=0,r[0].focus())},m=()=>{var g;t.current>0?(t.current=t.current-1,r[t.current].focus()):(t.current=0,(g=a.current)==null||g.focus())};return(d=o.current)==null||d.addEventListener("keydown",g=>{var x;switch(g.preventDefault(),g.key){case"ArrowDown":{u();break}case"Tab":{g.shiftKey?m():u();break}case"ArrowUp":{t.current===0?(x=a.current)==null||x.focus():m();break}case"Enter":{const e=r[t.current].querySelector("button");e==null||e.click();break}}},{signal:n.signal}),()=>{n.abort()}},[a,o,c,t]),s.useEffect(()=>{var n;const r=new AbortController;return(n=a.current)==null||n.addEventListener("keydown",u=>{var m;if(u.key==="ArrowDown"){const i=(m=o.current)==null?void 0:m.querySelector("li");i&&i.focus()}},{signal:r.signal}),()=>{r.abort()}},[a,o,c]),s.useEffect(()=>{var n;const r=new AbortController;return(n=l.current)==null||n.addEventListener("mouseenter",()=>{var m;(((m=o.current)==null?void 0:m.querySelectorAll("li"))??[]).forEach(i=>i.blur())},{signal:r.signal}),()=>{r.abort()}},[o,l])},S=k(["max-h-[250px]","overflow-y-auto"],{variants:{variant:{default:"bg-white"},theme:{kubefirst:"",konstruct:"",colony:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),C=k(["p-1","text-center","w-full block","bg-white"],{variants:{variant:{default:""},theme:{kubefirst:"",konstruct:"",colony:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),I=k(["focus-visible:outline-none"],{variants:{variant:{default:""},theme:{kubefirst:["focus:bg-purple-100","hover:bg-purple-100"],konstruct:["focus:bg-orange-100","hover:bg-orange-100"],colony:["focus:bg-red-100","hover:bg-red-100"]}},defaultVariants:{variant:"default",theme:"kubefirst"}}),H=k(["cursor-pointer","focus-visible:outline-none","px-3","py-1.5","w-full","text-left"],{variants:{variant:{default:""},theme:{kubefirst:["focus:bg-purple-100","hover:bg-purple-100"],konstruct:["focus:bg-orange-100","hover:bg-orange-100"],colony:["focus:bg-red-100","hover:bg-red-100"]}},defaultVariants:{variant:"default",theme:"kubefirst"}}),j=({className:o,inputRef:a,options:l,placeholder:c,placeholderClassName:t,variant:r,theme:n,wrapperRef:u,onClick:m})=>{const i=s.useRef(null);return q({ulRef:i,inputRef:a,wrapperRef:u,options:l}),l.length===0?p.jsx("span",{className:C({theme:n,variant:r,className:t}),children:c}):p.jsx("ul",{ref:i,role:"listbox",className:S({variant:r,theme:n,className:o}),children:l.map(({value:d})=>p.jsx("li",{role:"option",tabIndex:0,className:I({theme:n,variant:r}),children:p.jsx("button",{type:"button",role:"button",className:H({theme:n,variant:r}),onClick:()=>m(d),children:d})},d))})};j.__docgenInfo={description:"",methods:[],displayName:"List",props:{className:{required:!1,tsType:{name:"string"},description:""},inputRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLInputElement"}],raw:"RefObject<HTMLInputElement>"},description:""},wrapperRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLDivElement"}],raw:"RefObject<HTMLDivElement>"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}],raw:"Option[]"},description:""},placeholder:{required:!0,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},placeholderClassName:{required:!1,tsType:{name:"string"},description:""}},composes:["VariantProps"]};const K=k(["flex","w-full","rounded-md","border","border-zinc-200","bg-transparent","text-base","text-zinc-700","transition-colors","placeholder:text-muted-foreground","focus-visible:outline-none","focus-visible:ring-1","focus-visible:ring-ring","disabled:cursor-not-allowed","disabled:opacity-50","shadow-sm","py-1","px-2"],{variants:{variant:{default:""},theme:{kubefirst:["focus:ring-kubefirst-purple-light"],konstruct:["focus:focus:ring-orange-400"],colony:["focus:focus:ring-red-400"]}},defaultVariants:{theme:"kubefirst",variant:"default"}}),_=k(["pl-1","mb-2","text-base","cursor-pointer"],{variants:{variant:{default:""},theme:{kubefirst:"",konstruct:"",colony:""}},defaultVariants:{variant:"default",theme:"kubefirst"}}),y=s.forwardRef(({autoComplete:o="off",className:a,label:l,labelClassName:c,name:t,options:r,placeHolderEmptyValues:n="No values...",placeHolderEmptyValuesClassName:u,placeholder:m,theme:i,variant:d,onChange:g},x)=>{const e=s.useRef(null),f=s.useRef(null),h=s.useId(),{theme:b}=L(),v=i??b;s.useImperativeHandle(x,()=>f.current,[f]);const w=T({options:r,inputRef:f,wrapperRef:e,onChange:g});return p.jsxs("div",{ref:e,className:"relative flex flex-col",children:[l?p.jsx("label",{htmlFor:t??h,className:_({theme:v,variant:d,className:c}),children:l}):null,p.jsx("input",{ref:f,id:t??h,type:"text",name:t,role:"combobox",autoComplete:o,className:K({theme:v,variant:d,className:a}),onChange:w.handleChange,value:w.value,placeholder:m}),w.showOptions&&p.jsx("div",{className:"absolute z-10 top-full w-full rounded-md mt-1 border shadow-sm",children:p.jsx(j,{className:a,inputRef:f,wrapperRef:e,options:w.newOptions,placeholder:n,placeholderClassName:u,variant:d,theme:v,onClick:w.handleSelectValue})})]})});y.displayName="Autocomplete";y.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{autoComplete:{defaultValue:{value:"'off'",computed:!1},required:!1},placeHolderEmptyValues:{defaultValue:{value:"'No values...'",computed:!1},required:!1}}};const P={component:y},O={args:{placeholder:"Search...",options:[{value:"Option 1"},{value:"Option 2"},{value:"Option 3"},{value:"Option 4"},{value:"Option 5"},{value:"Option 6"}]},render:o=>p.jsxs("div",{className:"w-[350px] flex flex-col gap-3",children:[p.jsx(y,{label:"Kubefirst colors",...o}),p.jsx(y,{label:"Konstruct colors",theme:"konstruct",...o}),p.jsx(y,{label:"Colony colors",theme:"colony",...o})]})};var E,N,A;O.parameters={...O.parameters,docs:{...(E=O.parameters)==null?void 0:E.docs,source:{originalSource:`{
  args: {
    placeholder: 'Search...',
    options: [{
      value: 'Option 1'
    }, {
      value: 'Option 2'
    }, {
      value: 'Option 3'
    }, {
      value: 'Option 4'
    }, {
      value: 'Option 5'
    }, {
      value: 'Option 6'
    }]
  },
  render: args => <div className="w-[350px] flex flex-col gap-3">
      <AutocompleteComponent label="Kubefirst colors" {...args} />
      <AutocompleteComponent label="Konstruct colors" theme="konstruct" {...args} />
      <AutocompleteComponent label="Colony colors" theme="colony" {...args} />
    </div>
}`,...(A=(N=O.parameters)==null?void 0:N.docs)==null?void 0:A.source}}};const U=["Autocomplete"];export{O as Autocomplete,U as __namedExportsOrder,P as default};
